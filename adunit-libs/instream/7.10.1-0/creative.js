var EXPO_CREATIVE_CONFIG_JSON={Core:{transitions:{teaser2VPM:{duration:3e3,easing:"Sine.easeIn"},teaser2VPMFast:{duration:500,easing:"Sine.easeIn"},teaserToCollapsed:{duration:500,easing:"Sine.easeIn"},vpm2Teaser:{duration:500,easing:"Sine.easeIn"},vpm2TeaserFast:{duration:20,easing:"Sine.easeIn"},teaser2Collapsed:{duration:500,easing:"Sine.easeIn"},collapsedTeaser2vpm:{duration:3e3,easing:"Sine.easeIn"},collapsedTeaser2vpmFast:{duration:500,easing:"Sine.easeIn"},vpm2collapsedTeaser:{duration:500,easing:"Sine.easeIn"},vpm2collapsedTeaserFast:{duration:20,easing:"Sine.easeIn"},vpm2MainUnit:{duration:500,easing:"Sine.easeIn"},MainUnit2collapsedTeaserFast:{duration:20,easing:"Sine.easeIn"},MainUnit2TeaserFast:{duration:20,easing:"Sine.easeIn"}},sound:{start:2e3,end:4e3,level:"0.5"},states:{TEASER:{},VPM:{delayTime:4400}}},VideoPlayer:{},Close:{},Localization:{locales:{ar:{name:"Arabic",direction:"right-to-left"},zh:{name:"Cantonese",direction:"left-to-right"},de:{name:"German",direction:"left-to-right"},es:{name:"Spanish",direction:"left-to-right"},"es-es":{name:"Spanish",country:"Spain",direction:"left-to-right"},"es-mx":{name:"Spanish",country:"Mexico",direction:"left-to-right"},en:{name:"English",direction:"left-to-right"},"en-us":{name:"English",country:"US",direction:"left-to-right"},fr:{name:"French",direction:"left-to-right"},"fr-ca":{name:"French",country:"Canada",direction:"left-to-right"},"fr-fr":{name:"French",country:"France",direction:"left-to-right"},hi:{name:"Hindi",direction:"left-to-right"},id:{name:"Indonesian",direction:"left-to-right"},it:{name:"Italian",direction:"left-to-right"},ms:{name:"Malaysian",direction:"left-to-right"},nl:{name:"Dutch",direction:"left-to-right"},pt:{name:"Portuguese",direction:"left-to-right"},th:{name:"Thai",direction:"left-to-right"}},translations:{"default":"en",en:{explore:{text:"Explore",fontSize:12,fontSize_160_600:6,isFallback:!0},"click-to-explore":{text:"Click to explore",fontSize:10,fontSize_160_600:8,isFallback:!0},"rollover-to-explore":{text:"Rollover to explore",fontSize:10,fontSize_160_600:8,isFallback:!0},"tap-to-explore":{text:"Tap to explore",fontSize:14,isFallback:!0},"ads-by":{text:"VDX BY %s",fontSize:10,isFallback:!0},"starting-in":{text:"Starting in",fontSize:14,isFallback:!0},"click-to-expand":{text:"Click to expand",fontSize:14,isFallback:!0},"explore-more":{text:"Explore more",fontSize:16,isFallback:!0},"click-to-replay":{text:"Click to replay",fontSize:11,fontSize_160_600:9,isFallback:!0},exit:{text:"Exit",fontSize:12,isFallback:!0},replay:{text:"Replay",fontSize:12,isFallback:!0},close:{text:"Close",fontSize:12,isFallback:!0},"click-to-explore-now":{text:"Click to explore now",fontSize:14,isFallback:!0},"content-starting-in":{text:"Content starting in",fontSize:12,isFallback:!0}},ar:{explore:{text:"اكتشف‬",fontSize:12,fontSize_160_600:8,isFallback:!1},"rollover-to-explore":{text:"مرر الفأرة للاستكشاف‬",fontSize:14,fontSize_160_600:10,isFallback:!1},"tap-to-explore":{text:"أنقر للاستكشاف‬",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"يبدأ خلال‬",fontSize:14,isFallback:!1},"click-to-expand":{text:"اضغط للتوسيع‬",fontSize:14,isFallback:!1},"explore-more":{text:"اكتشف المزيد‬",fontSize:16,isFallback:!1},"click-to-replay":{text:"اضغط لاعادةالمشاهدة",fontSize:14,fontSize_160_600:11,isFallback:!1},exit:{text:"خروج‬",fontSize:12,isFallback:!1},replay:{text:"اعادة‬",fontSize:12,isFallback:!1},close:{text:"اغلاق‬",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"اضغط لاكتشاف المزيد هنا",fontSize:18,isFallback:!1},"content-starting-in":{text:"سيبدأ المحتوى خلال‬",fontSize:14,isFallback:!1}},id:{explore:{text:"Jelajah",fontSize:12,fontSize_160_600:8,isFallback:!1},"rollover-to-explore":{text:"Rollover to explore",fontSize:10,fontSize_160_600:8,isFallback:!1},"tap-to-explore":{text:"sentuh untuk jelajahi",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"Dimulai dalam",fontSize:14,isFallback:!1},"click-to-expand":{text:"Klik untuk memperbesar",fontSize:11,isFallback:!1},"explore-more":{text:"jelajahi lebih lanjut",fontSize:16,isFallback:!1},"click-to-replay":{text:"klik untuk mengulang",fontSize:9,fontSize_160_600:7,isFallback:!1},exit:{text:"keluar",fontSize:12,isFallback:!1},replay:{text:"Memulai ulang",fontSize:6,isFallback:!1},close:{text:"Tutup",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"Klik untuk menjelajahi",fontSize:14,isFallback:!1},"content-starting-in":{text:"konten akan dimulai dalam",fontSize:12,isFallback:!1}},it:{explore:{text:"Espandi",fontSize:12,fontSize_160_600:10,isFallback:!1},"rollover-to-explore":{text:"Espandi qui",fontSize:11,fontSize_160_600:10,isFallback:!1},"tap-to-explore":{text:"Scopri",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"Inizia in",fontSize:14,isFallback:!1},"click-to-expand":{text:"Clicca per espandere",fontSize:14,isFallback:!1},"explore-more":{text:"Scopri di più",fontSize:16,isFallback:!1},"click-to-replay":{text:"Clicca per rivedere",fontSize:10,fontSize_160_600:7,isFallback:!1},exit:{text:"Esci",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Chiudi",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"Scopri di più",fontSize:14,isFallback:!1},"content-starting-in":{text:"Il tuo video partirà in",fontSize:12,isFallback:!1}},fr:{explore:{text:"Ouvrir",fontSize:12,fontSize_160_600:7,isFallback:!1},"rollover-to-explore":{text:"Découvrir",fontSize:11,fontSize_160_600:9,isFallback:!1},"tap-to-explore":{text:"Découvrir",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"Commence dans",fontSize:12,isFallback:!1},"click-to-expand":{text:"Agrandir",fontSize:14,isFallback:!1},"explore-more":{text:"Plus de détails",fontSize:16,isFallback:!1},"click-to-replay":{text:"Revoir",fontSize:11,fontSize_160_600:10,isFallback:!1},exit:{text:"Fermer",fontSize:12,isFallback:!1},replay:{text:"Rejouer",fontSize:11,isFallback:!1},close:{text:"Fermer",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Cliquer pour voir",fontSize:14,isFallback:!1},"content-starting-in":{text:"Le contenu commence dans",fontSize:12,isFallback:!1}},zh:{explore:{text:"了解更多",fontSize:12,fontSize_160_600:10,isFallback:!1},"rollover-to-explore":{text:"翻起了解更多",fontSize:12,fontSize_160_600:9,isFallback:!1},"tap-to-explore":{text:"按此了解更多",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"開始",fontSize:14,isFallback:!1},"click-to-expand":{text:"按此放大廣告",fontSize:14,isFallback:!1},"explore-more":{text:"了解更多",fontSize:16,isFallback:!1},"click-to-replay":{text:"按此重播",fontSize:12,fontSize_160_600:10,isFallback:!1},exit:{text:"離開",fontSize:12,isFallback:!1},replay:{text:"再看一次",fontSize:12,isFallback:!1},close:{text:"關閉",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"按此了解更多",fontSize:14,isFallback:!1},"content-starting-in":{text:"内容將會呈現",fontSize:12,isFallback:!1}},nl:{explore:{text:"Bekijk",fontSize:12,fontSize_160_600:10,isFallback:!1},"rollover-to-explore":{text:"Roll over om te zien",fontSize:10,fontSize_160_600:7,isFallback:!1},"tap-to-explore":{text:"Tap om te zien",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"Uw video begint in",fontSize:11,isFallback:!1},"click-to-expand":{text:"Klik om te vergroten",fontSize:14,isFallback:!1},"explore-more":{text:"Ontdek meer",fontSize:16,isFallback:!1},"click-to-replay":{text:"Klik om te herstarten",fontSize:10,fontSize_160_600:7,isFallback:!1},exit:{text:"Sluit",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Sluit",fontSize:12,isFallback:!1},"click-to-explore-now":{text:"Klik om te ontdekken",fontSize:14,isFallback:!1},"content-starting-in":{text:"De content begint in",fontSize:12,isFallback:!1}},de:{explore:{text:"Entdecke",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Rollover to explore",fontSize:10,fontSize_160_600:7,isFallback:!1},"tap-to-explore":{text:"Mehr erfahren",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"Startet in",fontSize:14,isFallback:!1},"click-to-expand":{text:"Zur Vollansicht klicken",fontSize:14,isFallback:!1},"explore-more":{text:"Mehr entdecken",fontSize:16,isFallback:!1},"click-to-replay":{text:"Click to replay",fontSize:11,fontSize_160_600:8,isFallback:!1},exit:{text:"Beenden",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Schließen",fontSize:7,isFallback:!1},"click-to-explore-now":{text:"Hier entdecken",fontSize:14,isFallback:!1},"content-starting-in":{text:"Inhalt startet in",fontSize:12,isFallback:!1}},es:{explore:{text:"Ver más",fontSize:12,isFallback:!1},"rollover-to-explore":{text:"Click para descubrir",fontSize:10,fontSize_160_600:7,isFallback:!1},"tap-to-explore":{text:"Toca para descubrir",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"Abriendo en",fontSize:14,isFallback:!1},"click-to-expand":{text:"Click para expandir",fontSize:14,isFallback:!1},"explore-more":{text:"Clic para reproducir",fontSize:13,isFallback:!1},"click-to-replay":{text:"Click para reproducir",fontSize:10,fontSize_160_600:7,isFallback:!1},exit:{text:"Cerrar",fontSize:12,isFallback:!1},replay:{text:"Repetir",fontSize:12,isFallback:!1},close:{text:"Cerrar",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Clic para expandir",fontSize:14,isFallback:!1},"content-starting-in":{text:"El contenido empezará en",fontSize:12,isFallback:!1}},"es-es":{explore:{text:"Ver más",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Expande para ver más",fontSize:10,fontSize_160_600:7,isFallback:!1},"tap-to-explore":{text:"Toca para descubrir",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:14,isFallback:!1},"starting-in":{text:"Abriendo en",fontSize:14,isFallback:!1},"click-to-expand":{text:"Click para expandir",fontSize:14,isFallback:!1},"explore-more":{text:"Descubre más",fontSize:16,isFallback:!1},"click-to-replay":{text:"Click para reproducir",fontSize:10,fontSize_160_600:7,isFallback:!1},exit:{text:"Cerrar",fontSize:12,isFallback:!1},replay:{text:"Repetir",fontSize:10,isFallback:!1},close:{text:"Cerrar",fontSize:11,isFallback:!1},"click-to-explore-now":{text:"Clic para expandir",fontSize:14,isFallback:!1},"content-starting-in":{text:"El contenido empezará en",fontSize:12,isFallback:!1}},"es-mx":{explore:{text:"Explorar",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Rollover para expandir",fontSize:9,fontSize_160_600:6,isFallback:!1},"tap-to-explore":{text:"Tap para Expandir",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:13,isFallback:!1},"starting-in":{text:"Empezando en",fontSize:14,isFallback:!1},"click-to-expand":{text:"Click para expandir",fontSize:14,isFallback:!1},"explore-more":{text:"Explora más",fontSize:16,isFallback:!1},"click-to-replay":{text:"Click para volver a ver",fontSize:9,fontSize_160_600:6,isFallback:!1},exit:{text:"Salir",fontSize:12,isFallback:!1},replay:{text:"Repetir",fontSize:12,isFallback:!1},close:{text:"Cerrar",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Click para ver más",fontSize:14,isFallback:!1},"content-starting-in":{text:"Cargando contenido en",fontSize:12,isFallback:!1}},pt:{explore:{text:"Explorar",fontSize:10,isFallback:!1},"rollover-to-explore":{text:"Passe o mouse",fontSize:11,fontSize_160_600:8,isFallback:!1},"tap-to-explore":{text:"Toque para Expandir",fontSize:14,isFallback:!1},"ads-by":{text:"VDX BY %s",fontSize:13,isFallback:!1},"starting-in":{text:"Início em",fontSize:14,isFallback:!1},"click-to-expand":{text:"Clique para expandir",fontSize:14,isFallback:!1},"explore-more":{text:"Explore mais",fontSize:16,isFallback:!1},"click-to-replay":{text:"Clique para o replay",fontSize:10,fontSize_160_600:7,isFallback:!1},exit:{text:"Sair",fontSize:12,isFallback:!1},replay:{text:"Replay",fontSize:12,isFallback:!1},close:{text:"Fechar",fontSize:10,isFallback:!1},"click-to-explore-now":{text:"Clique para explorer agora",fontSize:14,isFallback:!1},"content-starting-in":{text:"Começando em",fontSize:12,isFallback:!1}}}}};!function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var e=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-e}}}();var TWEEN=TWEEN||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var i=e.indexOf(t);i!==-1&&e.splice(i,1)},update:function(t){if(0===e.length)return!1;var i=0;for(t=void 0!==t?t:window.performance.now();i<e.length;)e[i].update(t)?i++:e.splice(i,1);return!0}}}();TWEEN.Tween=function(e){var t=e,i={},n={},s={},o=1e3,r=0,a=!1,l=!1,c=!1,d=0,u=null,h=TWEEN.Easing.Linear.None,m=TWEEN.Interpolation.Linear,f=[],p=null,g=!1,v=null,C=null,E=null;for(var y in e)i[y]=parseFloat(e[y],10);this.to=function(e,t){return void 0!==t&&(o=t),n=e,this},this.start=function(e){TWEEN.add(this),l=!0,g=!1,u=void 0!==e?e:window.performance.now(),u+=d;for(var o in n){if(n[o]instanceof Array){if(0===n[o].length)continue;n[o]=[t[o]].concat(n[o])}i[o]=t[o],i[o]instanceof Array==!1&&(i[o]*=1),s[o]=i[o]||0}return this},this.stop=function(){return l?(TWEEN.remove(this),l=!1,null!==E&&E.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=f.length;e<t;e++)f[e].stop()},this.delay=function(e){return d=e,this},this.repeat=function(e){return r=e,this},this.yoyo=function(e){return a=e,this},this.easing=function(e){return h=e,this},this.interpolation=function(e){return m=e,this},this.chain=function(){return f=arguments,this},this.onStart=function(e){return p=e,this},this.onUpdate=function(e){return v=e,this},this.onComplete=function(e){return C=e,this},this.onStop=function(e){return E=e,this},this.update=function(e){var l,E,y;if(e<u)return!0;g===!1&&(null!==p&&p.call(t),g=!0),E=(e-u)/o,E=E>1?1:E,y=h(E);for(l in n){var T=i[l]||0,S=n[l];S instanceof Array?t[l]=m(S,y):("string"==typeof S&&(S=T+parseFloat(S,10)),"number"==typeof S&&(t[l]=T+(S-T)*y))}if(null!==v&&v.call(t,y),1===E){if(r>0){isFinite(r)&&r--;for(l in s){if("string"==typeof n[l]&&(s[l]=s[l]+parseFloat(n[l],10)),a){var w=s[l];s[l]=n[l],n[l]=w}i[l]=s[l]}return a&&(c=!c),u=e+d,!0}null!==C&&C.call(t);for(var b=0,x=f.length;b<x;b++)f[b].start(u+o);return!1}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},Out:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},InOut:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var i=e.length-1,n=i*t,s=Math.floor(n),o=TWEEN.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],n):t>1?o(e[i],e[i-1],i-n):o(e[s],e[s+1>i?i:s+1],n-s)},Bezier:function(e,t){for(var i=0,n=e.length-1,s=Math.pow,o=TWEEN.Interpolation.Utils.Bernstein,r=0;r<=n;r++)i+=s(1-t,n-r)*s(t,r)*e[r]*o(n,r);return i},CatmullRom:function(e,t){var i=e.length-1,n=i*t,s=Math.floor(n),o=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(s=Math.floor(n=i*(1+t))),o(e[(s-1+i)%i],e[s],e[(s+1)%i],e[(s+2)%i],n-s)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[i]-(o(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):o(e[s?s-1:0],e[s],e[i<s+1?i:s+1],e[i<s+2?i:s+2],n-s)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=TWEEN.Interpolation.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:function(){var e=[1];return function(t){var i=1;if(e[t])return e[t];for(var n=t;n>1;n--)i*=n;return e[t]=i,i}}(),CatmullRom:function(e,t,i,n,s){var o=.5*(i-e),r=.5*(n-t),a=s*s,l=s*a;return(2*t-2*i+o+r)*l+(-3*t+3*i-2*o-r)*a+o*s+t}}},function(e){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"object"==typeof exports?module.exports=TWEEN:void 0!==e&&(e.TWEEN=TWEEN)}(this),function(e,t){"use strict";var i="0.7.12",n="",s="?",o="function",r="undefined",a="object",l="string",c="major",d="model",u="name",h="type",m="vendor",f="version",p="architecture",g="console",v="mobile",C="tablet",E="smarttv",y="wearable",T="embedded",S={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2===0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===l?e.replace(/[^\d\.]/g,"").split(".")[0]:t},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},w={rgx:function(){for(var e,i,n,s,l,c,d,u=0,h=arguments;u<h.length&&!c;){var m=h[u],f=h[u+1];if(typeof e===r){e={};for(s in f)f.hasOwnProperty(s)&&(l=f[s],typeof l===a?e[l[0]]=t:e[l]=t)}for(i=n=0;i<m.length&&!c;)if(c=m[i++].exec(this.getUA()))for(s=0;s<f.length;s++)d=c[++n],l=f[s],typeof l===a&&l.length>0?2==l.length?typeof l[1]==o?e[l[0]]=l[1].call(this,d):e[l[0]]=l[1]:3==l.length?typeof l[1]!==o||l[1].exec&&l[1].test?e[l[0]]=d?d.replace(l[1],l[2]):t:e[l[0]]=d?l[1].call(this,d,l[2]):t:4==l.length&&(e[l[0]]=d?l[3].call(this,d.replace(l[1],l[2])):t):e[l]=d?d:t;u+=2}return e},str:function(e,i){for(var n in i)if(typeof i[n]===a&&i[n].length>0){for(var o=0;o<i[n].length;o++)if(S.has(i[n][o],e))return n===s?t:n}else if(S.has(i[n],e))return n===s?t:n;return e}},b={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},x={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,f],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[u,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[u,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[u,f],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],f],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],f],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[u,f],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],f],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],f],[/;fbav\/([\w\.]+);/i],[f,[u,"Facebook"]],[/fxios\/([\w\.-]+)/i],[f,[u,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[f,w.str,b.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,S.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",S.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[p,S.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,m,[h,C]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[m,"Apple"],[h,C]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[m,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[m,d,[h,C]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[d,[m,"Amazon"],[h,C]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[d,w.str,b.device.amazon.model],[m,"Amazon"],[h,v]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,m,[h,v]],[/\((ip[honed|\s\w*]+);/i],[d,[m,"Apple"],[h,v]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[m,d,[h,v]],[/\(bb10;\s(\w+)/i],[d,[m,"BlackBerry"],[h,v]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[d,[m,"Asus"],[h,C]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[m,"Sony"],[d,"Xperia Tablet"],[h,C]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[m,"Sony"],[d,"Xperia Phone"],[h,v]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[m,d,[h,g]],[/android.+;\s(shield)\sbuild/i],[d,[m,"Nvidia"],[h,g]],[/(playstation\s[34portablevi]+)/i],[d,[m,"Sony"],[h,g]],[/(sprint\s(\w+))/i],[[m,w.str,b.device.sprint.vendor],[d,w.str,b.device.sprint.model],[h,v]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[m,d,[h,C]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[m,[d,/_/g," "],[h,v]],[/(nexus\s9)/i],[d,[m,"HTC"],[h,C]],[/(nexus\s6p)/i],[d,[m,"Huawei"],[h,v]],[/(microsoft);\s(lumia[\s\w]+)/i],[m,d,[h,v]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[m,"Microsoft"],[h,g]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[m,"Microsoft"],[h,v]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[d,[m,"Motorola"],[h,v]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[m,"Motorola"],[h,C]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[m,S.trim],[d,S.trim],[h,E]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[m,"Samsung"],[h,E]],[/\(dtv[\);].+(aquos)/i],[d,[m,"Sharp"],[h,E]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[m,"Samsung"],d,[h,C]],[/smart-tv.+(samsung)/i],[m,[h,E],d],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[m,"Samsung"],d,[h,v]],[/sie-(\w+)*/i],[d,[m,"Siemens"],[h,v]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[m,"Nokia"],d,[h,v]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[d,[m,"Acer"],[h,C]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[m,"LG"],d,[h,C]],[/(lg) netcast\.tv/i],[m,d,[h,E]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[d,[m,"LG"],[h,v]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[m,"Lenovo"],[h,C]],[/linux;.+((jolla));/i],[m,d,[h,v]],[/((pebble))app\/[\d\.]+\s/i],[m,d,[h,y]],[/android.+;\s(glass)\s\d/i],[d,[m,"Google"],[h,y]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[d,/_/g," "],[m,"Xiaomi"],[h,v]],[/android.+a000(1)\s+build/i],[d,[m,"OnePlus"],[h,v]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,S.lowerize],m,d]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,f],[/rv\:([\w\.]+).*(gecko)/i],[f,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[f,w.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[f,w.str,b.os.windows.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[u,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[u,"Symbian"],f],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[u,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[u,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[u,f],[/(haiku)\s(\w+)/i],[u,f],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[u,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[u,f]]},I=function(t,i){if(this instanceof I){var s=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:n),o=i?S.extend(x,i):x;return this.getBrowser=function(){var e=w.rgx.apply(this,o.browser);return e.major=S.major(e.version),e},this.getCPU=function(){return w.rgx.apply(this,o.cpu)},this.getDevice=function(){return w.rgx.apply(this,o.device)},this.getEngine=function(){return w.rgx.apply(this,o.engine)},this.getOS=function(){return w.rgx.apply(this,o.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return s},this.setUA=function(e){return s=e,this},this}return new I(t,i).getResult()};I.VERSION=i,I.BROWSER={NAME:u,MAJOR:c,VERSION:f},I.CPU={ARCHITECTURE:p},I.DEVICE={MODEL:d,VENDOR:m,TYPE:h,CONSOLE:g,MOBILE:v,SMARTTV:E,TABLET:C,WEARABLE:y,EMBEDDED:T},I.ENGINE={NAME:u,VERSION:f},I.OS={NAME:u,VERSION:f},typeof exports!==r?(typeof module!==r&&module.exports&&(exports=module.exports=I),exports.UAParser=I):typeof define===o&&define.amd?define(function(){return I}):e.UAParser=I;var P=e.jQuery||e.Zepto;if(typeof P!==r){var A=new I;P.ua=A.getResult(),P.ua.get=function(){return A.getUA()},P.ua.set=function(e){A.setUA(e);var t=A.getResult();for(var i in t)P.ua[i]=t[i]}}}("object"==typeof window?window:this),function(e,t){"use strict";function i(){this.win=window,this.doc=window.document,this.windowCtx=window}var n,s,o,r,a,l,c,d,u,h,m,f,p,g,v,C,E,y,T,S,w,b,x=Object.prototype.toString,I=Array.prototype.slice,P=Object.prototype.hasOwnProperty,A=function(e){var t=new RegExp("\\[object "+e+"\\]","i");return function(e){return t.test(x.call(e))}},_=_||{},k=function(){},D=["log","warn","info","error","trace","clear"];D.forEach(function(e){_[e]||(_[e]=k)});var V=i.prototype;r=V.isString=A("String"),l=V.isFunction=A("Function"),c=V.isObject=A("Object"),a=V.isArray=A("Array"),u=V.isBoolean=A("Boolean"),d=V.isNumber=A("Number"),h=V.isUndefined=A("Undefined"),m=V.isNull=A("Null"),f=V.doesExists=function(e){return!(h(e)||m(e))},p=V.doesNotExists=function(e){return!f(e)},s=V.hasProperty=function(e,t){return P.call(e,t)},E=V.toArray=function(e){return I.call(e,0)},V.toCapital=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":e.toUpperCase()})},V.deprecate=function(e){_.warn(e)},V.getProperty=function(e,t){return/(\(|\))/gi.test(t)?void _.warn("Please provide a valid property accessor"):(t='["'+t.replace(/[.]/g,'"]["')+'"]',new Function("o","return o"+t)(e))},V.compose=function(){var e=arguments,t=e.length;return function(){for(var i=t-1,n=e[i].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},V.curry=function(e){function t(e){return function(){var t=[].slice.call(arguments);return i(e,t)}}function i(i,s){var o=i.concat(s);return o.length<n?t(o):e.apply(this,o)}var n=e.length;return t([])},T=V.each=function(e,t){var i;y(c(e),"each Can only be called on Object"),y(l(t),"Provide a callback");for(i in e)s(e,i)&&t(e[i],i,e)},V.setWindowContext=function(e){n=e||n},V.getWindowContext=function(){return n},V.getQueryParamter=function O(e){e=e||n.location.search,e=0===e.indexOf("?")?e.substring(1):e;var t=O.cache||(O.cache={}),i=t[e],s=e.split("&");return i||(i={},s.forEach(function(e){e=e.split("="),i[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),O.cache[e]=i),O.cache[e]},y=V.assert=function(e,t){var i=!1;if(i=l(e)?!e():!e)throw new Error("Assertion Failed: "+t)},V.getRunTimeAdConfig=function(e,t,i){var n=t[i]?t[i]:e.teaser[i];return n},V.getElement=function(e,t){return"undefined"!=typeof t?t.document.getElementById(e):n.document.getElementById(e)},V.isCrossDomain=function(){try{return window.self!==window.top}catch(e){return!0}},o=V.extend=function(e,t){var i=function(i,n){return function(){var s=e._super;e._super=t[i];var o=n.apply(e,arguments);return e._super=s,o}};for(var n in t)e[n]=s(e,n)&&l(e[n])&&l(t[n])?i(n,e[n]):s(e,n)?e[n]:a(t[n])?t[n].concat():c(t[n])?o(t[n],{}):t[n];return e;
},V.deepObjectExtend=w=function N(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]&&"object"==typeof t[i]?N(e[i],t[i]):e[i]=t[i]);return e},V.inherit=function(e,t){var i=function(e,i){return function(){var n=this._super;this._super=i;var s=t[e].apply(this,arguments);return this._super=n,s}};for(var n in t)e[n]=l(e[n])&&l(t[n])?i(n,e[n]):t[n];return e},V.noop=function(){},g=V.ajax=function(e,t,i,n,s,o){var r=new XMLHttpRequest,a=document.write;r.open("GET",e,!0),r.onreadystatechange=function(){if(r.status>=200&&r.status<400&&4===r.readyState){var e,t,i=document.createElement("div"),l=0,c=0,d=function(){l===t&&(o(i.innerHTML),document.write=a)};if(i.innerHTML=r.responseText,!s){e=i.getElementsByTagName("script"),e=Array.prototype.slice.call(e,0),t=e.length,document.write=function(i){var n=document.createElement("div");n.innerHTML=i,i=n.childNodes[0],e.splice(c,0,i),t++};var u=function(){var t=e[c];if(t){c++;var i,n=document.createElement("script"),s=t.attributes,o=s.length;for(i=0;i<o;i++)n.setAttributeNode(s[i].cloneNode(!0));t.src?(n.src=t.src,n.onload=function(){u(),++l,d()},n.onerror=function(){throw new Error("Failed to load the script")},document.body.appendChild(n)):(n.innerHTML=t.innerHTML,document.body.appendChild(n),u(),++l),t.parentNode.removeChild(t)}};u()}n(i.innerHTML,r)}},r.send(i)},v=V.ajax.get=function(e,t,i,n,s){this(e,"GET",s,t,i,n)},C=V.ajax.post=function(e,t,i,n,s){this(e,"POST",t,i,n,s)},b=V.throttle=function(e,t,i){var n,s,o,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:Date.now(),r=null,o=e.apply(n,s),r||(n=s=null)};return function(){var c=Date.now();a||i.leading!==!1||(a=c);var d=t-(c-a);return n=this,s=arguments,d<=0||d>t?(r&&(clearTimeout(r),r=null),a=c,o=e.apply(n,s),r||(n=s=null)):r||i.trailing===!1||(r=setTimeout(l,d)),o}},S=V.debounce=function(e,t,i){var n;return function(){i=i||this;var s=arguments,o=function(){n=null,e.apply(i,s)};window.clearTimeout(n),n=window.setTimeout(o,t)}},V.createSameDomainIframeNode=function(e,t,i,s,o){var r=(new Date).getTime()%20000001+parseInt(1e4*Math.random(),10),a=n;if(e+=r,!a.document.getElementById(e)){var l=document.createElement("iframe");l.setAttribute("frameBorder","0"),l.setAttribute("allowtransparency","true"),l.setAttribute("marginheight","0"),l.setAttribute("marginwidth","0"),l.setAttribute("scrolling","no"),l.setAttribute("width",t),l.setAttribute("height",i),l.setAttribute("hspace","0"),l.setAttribute("vspace","0"),l.setAttribute("id",e),0===t&&0===i&&l.setAttribute("style","position:absolute; top:-15000px; left:-15000px;"),a.document.body.appendChild(l)}setTimeout(function(t){var i=n.document.getElementById(e);s(i,t)}(o),10)},V.writeContentInIframe=function(e,t){if(e){var i=e.contentWindow;i.contents=t,i.location.replace('javascript:window["contents"]')}},V.createElement=function(e,t,i){var n,s=document.createElement(e);for(n in t)s.setAttribute(n,t[n]);return i&&s.setAttribute("style",i),s},V.setStyle=function(e,t){var i;for(i in t)e.style[i]=t[i]},V.setAttribute=function(e,t){var i;for(i in t)e.setAttribute(i,t[i])},V.insertChild=function(e,t,i){e||t||("string"!=typeof t||"undefined"!=typeof i&&null!==typeof i?"undefined"==typeof i||null===typeof i?e.appendChild(t):"undefined"!=typeof i&&null!==typeof i&&e.insertBefore(t,i):e.innerHTML=t)},V.getBody=function(){return this.doc.body||this.doc.documentElement},V.override=function(e,t){var i;for(i in e)t[i]&&e.hasOwnProperty(i)&&(e[i]=t[i])},V.attachEvent=function(e,t,i){window.addEventListener?e.addEventListener(t,i,!1):window.attachEvent?e.attachEvent("on"+t,i):window.onLoad&&(e[t]=i)},V.detachEvent=function(e,t,i){window.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)},V.createCustomEvent=function(e,t){var i;return e.createEvent?(i=e.createEvent("HTMLEvents"),i.initEvent(t,!0,!0)):e.createEventObject&&(i=e.createEventObject(),i.eventType=t),i.eventName=t,i},V.triggerCustomEvent=function(e,t){e.dispatchEvent?e.dispatchEvent(t):e.fireEvent&&htmlEvents["on"+t.eventType]?e.fireEvent("on"+t.eventType,t):e[t]?e[t]():e["on"+t.eventType]&&e["on"+t.eventType]()},V.constructDefaultPath=function(){if(arguments.length){var e=arguments[0],t=arguments[1]||{},i=arguments[2]||"l";if(/^http(s)*:\/\//i.test(e))return e;if(t.dir&&t.dir.indexOf("$")>=0&&(t.dir=""),t.manifestDir&&t.manifestDir.indexOf("$RICHMEDIA")>=0&&(t.manifestDir=""),"l"==i)return t.dir+e;if("c"==i)return t.manifestDir+e}},V.constructMediaPaths=function(e,t,i){"$LOC$"==t.dir&&(t.dir=""),"$LOCPARSE$"==t.parseDir&&(t.parseDir=""),t.manifestDir.indexOf("$RICHMEDIA")>=0&&(t.manifestDir=""),e=e[i];for(var n=e.length,s=0;s<n;s++)/^http(s)*:\/\//i.test(e[s].src)||e[s].dir&&"l"!==e[s].dir?/^http(s)*:\/\//i.test(e[s].src)||"c"!==e[s].dir||(e[s].src=t.manifestDir+e[s].src):e[s].src=t.dir+e[s].src},V.getCssPropertyValue=function(e,t){var i,n;if("undefined"!=typeof e&&"undefined"!=typeof t){if(e.ownerDocument&&e.ownerDocument.defaultView){try{n=e.ownerDocument.defaultView.getComputedStyle(e,null)}catch(s){}n&&(i=n.getPropertyValue(t)||n[t])}else i=e.currentStyle[t];return i}},V.hasRulePassedOnDom=function(e,t,i,n,s){for(var o={pass:!1},r=0,a={">":function(e,t){return e>t},"<":function(e,t){return e<t},"===":function(e,t){return e===t},any:function(e,t,i){switch(i.name){default:return"none"!==e&&"unset"!==e&&isNaN(parseInt(t,10))}},"!==":function(e,t){return e!==t}};e&&e.parentNode&&(e=e.parentNode,r+=1,"body"!==e.tagName.toString().toLowerCase());){if(!i[s][r]){_.log("getCssProperty called");var l=this.getCssProperty(e,"",!0);i.zindex[r]=l,i["float"][r]=l}var c=0;t.forEach(function(l){"any"===l.value&&(l.operation="any");var d=i[s][r].getPropertyValue(l.name);d&&void 0!==d&&""!==d&&null!==d&&"undefined"!=typeof d&&a[l.operation](d,l.value,l)&&(c+=1),c===t.length&&(i[s].passedRule=n,i[s].passedLevel=r,o={pass:!0,el:e})}.bind(this))}return o},V.checkRule=function(e,t,i,n){var s=!1;return Object.keys(t).some(function(o){if(s=this.hasRulePassedOnDom(e,t[o],i,o,n),s.pass===!0)return!0}.bind(this)),s},V.handleBodyScroll=function(e,t){e.document.body.style.overflow=t},V.selectPublisherContainerSolution=function(e,t){var i,n,s=!1,o=!1;return i=t.floatingRules||{rule1:[{name:"overflow",value:"hidden",operation:"==="},{name:"position",value:"static",operation:"!=="},{name:"z-index",value:"any",operation:"==="}],rule3:[{name:"opacity",value:1,operation:"<"}],rule4:[{name:"transform",value:"any",operation:"==="}],rule5:[{name:"opacity",value:1,operation:"<"},{name:"overflow",value:"hidden",operation:"==="}],rule6:[{name:"transform",value:"any",operation:"==="}],rule7:[{name:"transform",value:"any",operation:"==="},{name:"overflow",value:"hidden",operation:"==="}],rule8:[{name:"filter",value:"any",operation:"==="}],rule11:[{name:"perspective",value:"any",operation:"==="}],rule12:[{name:"isolation",value:"isolate",operation:"==="}],rule13:[{name:"clip-path",value:"any",operation:"==="}],rule14:[{name:"mask",value:"any",operation:"==="}],rule15:[{name:"mask-image",value:"any",operation:"==="}],rule16:[{name:"mask-border",value:"any",operation:"==="}],rule17:[{name:"contain",value:"layout",operation:"==="}],rule18:[{name:"contain",value:"strict",operation:"==="}],rule19:[{name:"contain",value:"content",operation:"==="}],rule20:[{name:"contain",value:"paint",operation:"==="}],rule9:[{name:"filter",value:"any",operation:"==="},{name:"overflow",value:"hidden",operation:"==="}],rule10:[{name:"position",value:"static",operation:"!=="},{name:"overflow",value:"hidden",operation:"==="}]},n=t.zIndexRules||{rule2:[{name:"position",value:"static",operation:"!=="},{name:"z-index",value:"any",operation:"!=="}]},i&&n&&(s=this.isFloatNeeded(e,i),o=this.checkRule(e,n,this.ruleCssStore,"zindex").pass),{zIndexSolutionEnabled:o,floatingSolutionEnabled:s,cssStore:this.ruleCssStore}},V.getZindexOfTopMostParent=function(e){for(var t,i=0,n=[];e&&e.parentNode&&"body"!==e.tagName.toString().toLowerCase();){e=e.parentNode;var s=parseInt(this.getCssProperty(e,"z-index"),10);isNaN(s)||(i=s,t=e),isNaN(s)||"visible"!==this.getCssProperty(e,"overflow")||n.push({zindex:s,el:t})}return{zindex:i,element:t,combination:n}},V.isFloatNeeded=function(e,t){var i=!1;return this.ruleCssStore=this.ruleCssStore||{"float":{},zindex:{}},i=this.checkRule(e,t,this.ruleCssStore,"float"),_.log(this.ruleCssStore),i.pass},V.isFloatNeededFallback=function(e){for(var t=!1;e&&e.parentNode&&"body"!==e.tagName.toString().toLowerCase();){e=e.parentNode;var i=this.getCssProperty(e,"overflow");if(void 0!==i&&""!==i&&null!==i&&"undefined"!=typeof i||(i=this.getCssProperty(e,"overflowX"),void 0!==i&&""!==i&&null!==i&&"undefined"!=typeof i||(i=this.getCssProperty(e,"overflowY"))),"hidden"===i||"scroll"===i||"auto"===i){t=!0;break}var n=this.getCssProperty(e,"position");if(void 0!==n&&""!==n&&null!==n&&"undefined"!=typeof n&&"relative"===n){t=!0;break}}return t},V.getCssProperty=function(e,t,i){var n,s,o={};if("undefined"!=typeof e&&"undefined"!=typeof t){if(e.ownerDocument&&e.ownerDocument.defaultView){try{s=e.ownerDocument.defaultView.getComputedStyle(e,null)}catch(r){}s&&(n=s.getPropertyValue(t)||s[t])}else n=e.currentStyle[t];return o[t]=n,i?s:n}},V.getElementWidth=function(e){return e.clientWidth},V.getElementHeight=function(e){return e.clientHeight},V.getElementPosition=function(e,t){try{var i={};return"undefined"!=typeof e.getBoundingClientRect&&(i=e.getBoundingClientRect()),i}catch(n){}},V.getElementOffset=function(e){for(var t=0,i=0;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{x:t,y:i}},V.getElementCordinate=function(e){var t={},i=this.getElementOffset(e);return t.topLeft={x:i.x,y:i.y},t.topRight={x:i.x+970,y:i.y},t.bottomLeft={x:i.x,y:i.y+250},t.bottomRight={x:i.x+970,y:i.y+250},t.width=970,t.height=250,t},V.isInView=function(e){var t={};t.topLeft=this.getViewportTopLeft(),t.topRight=this.getViewportTopRight(),t.bottomLeft=this.getViewportBottomLeft();var i=this.getElementCordinate(e);return t.topLeft.x<i.topRight.x&&t.topRight.x>i.topLeft.x&&t.topLeft.y<i.bottomLeft.y&&t.bottomLeft.y>i.topLeft.y},V.getViewportTopLeft=function(){return{x:this.getScrollX(),y:this.getScrollY()}},V.getViewportTopRight=function(){return{x:this.getScrollX()+this.getViewportwidth(),y:this.getScrollY()}},V.getViewportBottomLeft=function(){return{x:this.getScrollX(),y:this.getScrollY()+this.getViewportHeight()}},V.getViewportBottomRight=function(){return{x:this.getScrollX()+this.getViewportwidth(),y:this.getScrollY()+this.getViewportHeight()}},V.getScrollX=function(){return void 0!==n.pageXOffset?n.pageXOffset:(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollLeft},V.getScrollY=function(){return void 0!==n.pageYOffset?n.pageYOffset:(this.doc.documentElement||this.doc.body.parentNode||this.doc.body).scrollTop},V.getViewportHeight=function(){return n.innerHeight||n.document.documentElement.clientHeight||n.document.body.clientHeight},V.getViewportwidth=function(){return n.innerWidth||n.document.documentElement.clientWidth||n.document.body.clientWidth},V.getScreenHeight=function(){return n.screen.height},V.removeProperty=function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},V.moveMainUnitToCenter=function(e){var t,i,s;e&&(this.element=e,this.divTop=this.getCssProperty(e,"top"),this.VPMAnimIntervalId&&(n.clearInterval(this.VPMAnimIntervalId),delete this.VPMAnimIntervalId),void 0===this.storeScrollX&&(this.storeScrollX=this.getScrollX()),void 0===this.storeScrollY&&(this.storeScrollY=this.getScrollY()),s=this.getViewportHeight(),i=parseInt(this.getCssProperty(e,"height").split("px")[0]),t=s<i?0:(s-i)/2,e.style.top=t+"px")},V.disableScroll=function(e){this.divPosition=this.getCssProperty(e,"position"),e.style.position="fixed"},V.enableScroll=function(e){e.style.position=this.divPosition,delete this.divPosition},V.bringInView=function(e){var t=e,i={},n=0,s=0;i.height=this.getViewportHeight(),i.width=this.getViewportwidth(),i.left=this.getScrollX(),i.top=this.getScrollY(),this.isVerticalScrollbar&&(i.width-=17),this.isHorizontalScrollbar&&(i.height-=17);var o=this.getElementPosition(t);o.top<0?n=o.top:o.bottom>i.height&&(n=o.bottom-i.height),o.left<0?s=o.left:o.right>i.width&&(s=o.right-i.width),_.log(s+"  "+n),this.getWindowContext().scrollBy(s,n)},V.getOrigin=function(e){var t=e.match(/^(http?):\/\/([A-Z\d\.-]{2,})\.([A-Z]{2,})(:\d{2,4})?/i);return t[0]},V.isVerticalScrollbar=function(){var e="BackCompat"==n.document.compatMode?n.document.body:n.document.documentElement;return e.scrollHeight>e.clientHeight},V.isHorizontalScrollbar=function(){var e="BackCompat"==n.document.compatMode?n.document.body:n.document.documentElement;return e.scrollWidth>e.clientWidth},V.resetScroll=function(){this.element.style.top=this.divTop,n.scrollTo(this.storeScrollX,this.storeScrollY),delete this.storeScrollX,delete this.storeScrollY,delete this.element,delete this.divTop},V.toUpperCase=function(e){return e.toUpperCase()},V.getBrowserPrefix=function(e,t){for(var i,n="Webkit Moz O ms Khtml".split(" "),s=-1,o=n.length;++s<o;)if(i=n[s].toLowerCase(),e[i+t])return i+t;return!1},V.charectorLimit=function(e){function t(e){l.style.fontSize=e+"px"}function i(){return a.offsetHeight<l.offsetHeight}function n(){if(a.offsetHeight<l.offsetHeight){for(;a.offsetHeight<l.offsetHeight;)l.innerText=c=c.substr(0,c.length-1);l.innerText=c=c.substr(0,c.length-3),l.innerText=l.innerText+"..."}a.children[0].innerText=l.innerText,a.style.fontSize=s()}function s(){return l.style.fontSize}var o,r,a,l,c,d=parseInt(e.max),u=parseInt(e.min);for(o=d,r=e.text,c=r,a=e.container,l=document.createElement("div"),l.id="rm-test",l.style.width=a.offsetWidth,e["white-space"]&&(l.style.whiteSpace=e["white-space"]),document.body.appendChild(l),t(o),l.innerText=r;o>u;){if(!i()){n();break}t(--o)}o<=u&&n(),l.parentNode.removeChild(l)},V.ObjToStyleString=function(e){return JSON.stringify(e).replace(/"/g,"").replace(/,/g,";").replace(/^\{(.*)\}$/g,"$1")},V.moveVPMToCenter=function(e,t){if(e){var i,s,o,r,a,l=0,c=this;this.storeScrollX=this.getScrollX(),this.storeScrollY=this.getScrollY(),o=this.getViewportHeight(),s=this.getCssProperty(e,"clipBottom")?parseInt(this.getCssProperty(e,"clipBottom").split("px")[0]):parseInt(this.getCssProperty(e,"clip").split(" ")[2].split("px")[0]),r=e.getBoundingClientRect().top,o<s?i=r:(i=(o-s)/2-r,i=-i),a=i>0?i:-i,this.VPMAnimIntervalId=n.setInterval(function(){l<=a?(l+=t,c.windowCtx.scrollBy(0,i>=0?t:-t)):clearInterval(c.VPMAnimIntervalId)},1)}},t.utility=t.utility||new i}(window,window.EU||(window.EU={})),function(e,t){"use strict";function i(e){e=e||{};var t;return t=n.hasProperty(e,"constructor")&&n.isFunction(e.constructor)?e.constructor:function(){},t.prototype=n.extend({},e),t.prototype.constructor=t,t.extend=s,t}var n=t.utility,s=function o(e){e=e||{};var t=/this\._super\(.*\)/g.test((e.constructor||new Function).toString()),i=this,s=function(){var s,o=this._super;return n.hasProperty(e,"constructor")&&n.isFunction(e.constructor)?(t?this._super=i:i.apply(this,arguments),s=e.constructor.apply(this,arguments),this._super=o):s=i.apply(this,arguments),s},r=function(){this.constructor=s};return r.prototype=i.prototype,s.prototype=new r,n.inherit(s.prototype,e),s.extend=o,s};t.CreateClass=t.CreateClass||i}(window,window.EU),function(e,t){"use strict";function i(e){return n(e)?e.match(/(.+)\((.+)\)/):[e,e,void 0]}function n(e){return/\((.+)\)/g.test(e)}function s(e){return e.enumList.forEach(function(t,n){var s;l.isObject(t)?l.each(t,function(t,o){s=i(o),this[s[1]]=new a(o,s[1],s[2],e,n,t)}.bind(this)):(s=i(t),this[s[1]]=new a(t,s[1],s[2],e,n))}.bind(this)),Object.freeze&&Object.freeze(this),this}function o(e){if(this instanceof o)throw new Error("Cannot instantiate Enum");return new r(e)}function r(e){if(l.isObject(e))return s.call(this,e);throw new Error("Not a valid type")}function a(e,t,i,n,s,o){i=i||"";var r=i.indexOf(",")?i.split(","):i?[i]:[],a=l.extend({},n);return delete a.enumList,delete a.constructor,l.isObject(o)&&l.extend(this,o),this.getName=function(){return t},this.ordinal=function(){return s},this.constructor=n.constructor||function(){},l.each(a,function(e,t){l.isFunction(e)&&(a[t]=e.bind(this)),l.hasProperty(this,t)||(this[t]=e)}.bind(this)),this._super=a,this.constructor.apply(this,r),Object.freeze&&Object.freeze(this),this}var l=t.utility;r.prototype={constructor:r,values:function(){var e=[];return l.each(this,function(t){e.push(t)}),e}},t.Enum=t.Enum||o}(window,window.EU),function(e,t){"use strict";var i=t.utility,n=function(e){try{var n=i.isObject(e.data)?e.data:JSON.parse(e.data),s=i.isString(n)?"":n.eventName;if(n&&"erm"!==n.trust)return;s&&(delete n.eventName,t.EventManager.fire(s,n))}catch(e){}},s=t.CreateClass({__uidPrefix__:"EventManager_",__uid__:1,__listeners__:null,add:function(e,t){i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),i.assert(t&&i.isFunction(t),"expected type Function for handler");var n,s={type:e,handler:t,namespace:null,id:this.__uidPrefix__+this.__uid__++},o=".";return e.indexOf(o)>0&&(n=e.split(o),s.type=n[0],s.namespace=n[1]),this.__listeners__||(this.__listeners__={}),this.__listeners__[s.type]||(this.__listeners__[s.type]=[]),this.__listeners__[s.type].push(s),s.id},remove:function(e,t){if(i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),this.__listeners__){var n,s,o,r,a,l,c=".";if(e.indexOf(c)>0&&(s=e.split(c),e=s[0],n=s[1]),o=i.isString(t)?t:null,r=this.__listeners__[e]||[],r.length)return n?(l=function(e){return n!==e},o||t?o?a=function(e){return l(e.namespace)||e.id!==o}:t&&(a=function(e){return l(e.namespace)||e.handler!==t}):a=function(e){return l(e.namespace)},this.__listeners__[e]=r.filter(a),void(this.__listeners__[e].length||delete this.__listeners__[e])):void(o?(this.__listeners__[e]=r.filter(function(e){return e.id!==o}),this.__listeners__[e].length||delete this.__listeners__[e]):t?(this.__listeners__[e]=r.filter(function(e){return e.handler!==t}),this.__listeners__[e].length||delete this.__listeners__[e]):this.__listeners__[e]&&this.__listeners__[e].length&&delete this.__listeners__[e])}},removeByNS:function(e){i.assert(e&&i.isString(e),"expected type a non-empty String for namespace");var t,n=function(t){return t.namespace!==e};for(t in this.__listeners__)hasOwnProperty(this.__listeners__,t)&&(this.__listeners__[t]=this.__listeners__[t].filter(n),this.__listeners__[t].length||delete this.__listeners__[t])},fire:function(e,t){if(i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),this.__listeners__){(arguments.length>2||!i.isArray(t))&&(t=Array.prototype.slice.call(arguments,1));var n,s,o,r=".";e.indexOf(r)&&(s=e.split(r),e=s[0],n=s[1]),o=this.__listeners__[e]||[],n&&(o=o.filter(function(e){return e.namespace===n})),o&&o.length&&this.__callAllHandlers__(e,o,t)}},__callAllHandlers__:function(e,t,i){var n,s,o=t.length;for(s=0;s<o;s++)n=t[s],n.handler.apply(this,i)},once:function(e,t){i.assert(e&&i.isString(e),"expected type a non-empty String for eventName"),i.assert(t&&i.isFunction(t),"expected type Function for handler");var n,s=function(){t.apply(null,arguments),this.remove(e,n)}.bind(this);n=this.add(e,s)},addMessageListener:function(e){e.removeEventListener("message",n,!1),e.addEventListener("message",n,!1)},_data:function(e){i.assert(e&&i.isString(e),"expected type a non-empty String for eventName");var t,n,s,o=".";return e.indexOf(o)&&(n=e.split(o),e=n[0],t=n[1]),s=this.__listeners__&&this.__listeners__[e]||[],t&&(s=s.filter(function(e){return e.namespace===t})),{eventName:e,handlers:s}}});t.EventManager=t.EventManager||new s,t.BaseEventManager=t.BaseEventManager||s}(window,window.EU||(window.EU={})),function(e,t){"use strict";var i=t.utility,n=t.CreateClass({constructor:function(){this.__observers__=[],this.__changed__=!1},addObserver:function(e){i.assert(e instanceof t.ObserverClass,"Please provide instance of EU.ObserverClass"),this.__observers__.push(e)},removeObserver:function(e){i.assert(e instanceof t.ObserverClass,"Please provide instance of EU.ObserverClass"),this.__observers__=this.__observers__.filter(function(t){return e!==t})},notifyObservers:function(){if(this.__changed__){var e=i.toArray(arguments);e.unshift(this),this.__observers__.forEach(function(t){t.update.apply(t,e)}),this.__changed__=!1}},notify:function(){this.setChanged(),this.notifyObservers.apply(this,arguments)},setChanged:function(){this.__changed__=!0},clearChanged:function(){this.__changed__=!1},hasChanged:function(){return this.__changed__},countObservers:function(){return this.__observers__.length}});t.ObservableClass=t.ObservableClass||n}(window,window.EU),function(e,t){"use strict";var i=t.CreateClass({update:function(){throw new Error("Implement the Update method")}});t.ObserverClass=t.ObserverClass||i}(window,window.EU),function(e,t){"use strict";var i=t.utility,n=t.BaseEventManager.extend({constructor:function(){},init:i.noop,render:i.noop,destroy:i.noop});t.BaseComponent=t.BaseComponent||n}(window,window.EU),function(e,t){"use strict";function i(e,t,i,n){this.name=e,this.deps=t?t.slice(0):t,this.def=i,this.version=n}i.prototype={constructor:i,init:function(e,t){return t&&(this.pluginList=t),this.resolveDeps(this,e,this.pluginList)},resolveDeps:function(e,t,i){var n=[t],s=e.deps,o=s?s.length:0;return o&&s.forEach(function(e,s){e=i[e],e&&(e.deps&&e.deps.length?n=n.concat(this.resolveDeps(e,t,i)):n.push(e.def(t)))}.bind(e)),e.def.apply(null,n)}},t.PluginManager=t.PluginManager||i}(window,window.EU||(window.EU={})),function(e,t,i){"use strict";function n(){}function s(e,t){return e+"_"+t}function o(e,t){return t.dependencies.filter(function(t){return t.name===e})[0]}var r,a=t.utility;i=e.EUC=i||t.CreateClass({utility:a,makeKey:s,constructor:function(){this.adunits={},this.plugins={},this.dependenciesList=[]},initCore:n,rendererCallback:n,resolvedCallback:n,registerPlugin:function(e,i,n,o){var r=t.PluginManager;this.utility.isString(n)&&(o=n),this.utility.isFunction(i)&&(n=i,i=null),this.utility.isString(i)&&(i=[i]);var a=s(e,o);this.plugins[a]||(this.plugins[a]=new r(e,i,n,o))},checkPluginLoaded:function(e){return!!this.plugins[s(e.name,e.version)]},resolveAdUnitConfig:function(e){var t=!1;e.pluginsLoaded||(t=e.dependencies.every(this.checkPluginLoaded.bind(this)),t&&(e.pluginsLoaded||(e.pluginsLoaded=!0,this.initiatePlugins(e))))},resolvePlugin:function(){this.utility.each(this.plugins,function(e,t){e.deps&&(e.deps=e.deps.map(function(e){var t,i=this.dependenciesList;return t=i.filter(function(t){return t.name===e})[0],t?s(t.name,t.version):e}.bind(this)))}.bind(this)),Object.keys(this.adunits).forEach(function(e){var t=this.adunits[e];this.resolveAdUnitConfig(t)}.bind(this))},initiatePlugins:function(e){var i,n,s={};void 0!==e&&(s.config=e.config),n=this.bustFrame(s),this.utility.setWindowContext(n),r||(r=t.EventManager),s.baseEventManager=r,s.utility=this.utility,r.addMessageListener(n),e&&(i=this.require("render",s)),s.isIFrame=!0,e.renderer=i,this.resolvedCallback(s,i,e)},bustFrame:function(){return e},require:function(){var e;return function(t,i){i&&(e=i),t=o(t,e.config);var n;if(t)return n=s(t.name,t.version),this.plugins[n].init(e,this.plugins);throw new ReferenceError("Unknown Dependency")}}(),sucessCallback:function(e){},errorCallback:function(e){},constructMediaPath:function(e){e.richmediaCommonDir.indexOf("$RICHMEDIA")>=0&&(e.richmediaCommonDir="");var t=e.dependencies,i=t.length;if(i>0)for(var n=0;n<i;n++)/^http(s)*:\/\//i.test(t[n].src)||(t[n].src=e.richmediaCommonDir+t[n].src)},updateDependenciesList:function(e){return this.dependenciesList=this.union(this.dependenciesList,e)},union:function(e,t){var i,n=e.concat(t),s=[],o={};return n.forEach(function(e){i=this.makeKey(e.name,e.version),this.utility.hasOwnProperty(o,this.makeKey(e.name,e.version))||(o[i]=e,s.push(e))}.bind(this)),s}})}(window,window.EU,window.EUC),function(e,t){"use strict";var i=t.utility,n={"teaser.trackers.phaze.teaser_loading_loaded":!0,"teaser.trackers.phaze.paused-teaser_vpm_closebtnclick":!0,"teaser.trackers.phaze.paused-teaser_mainunit_closebtnclick":!0,"teaser.trackers.phaze.paused-collapse-teaser_vpm_closebtnclick":!0,"teaser.trackers.phaze.paused-collapse-teaser_mainunit_closebtnclick":!0,"teaser.trackers.phaze.paused-collapse-teaser_paused-teaser_transitioncomplete":!0,"teaser.trackers.phaze.collapsedteaser_teaser_transitioncomplete":!0,"teaser.trackers.phaze.collapsedteaser_mainunit_closevideo":!0,"teaser.trackers.phaze.teaser_mainunit_closebtnclick":!0,"teaser.trackers.phaze.teaser_vpm_closebtnclick":!0,"teaser.trackers.phaze.teaser_mainunit_closevideo":!0,"teaser.trackers.impression.imp":!0},s=t.CreateClass({constructor:function(e){var t=this.parse(e);this.attr=t,this.init.apply(this,arguments)},init:i.noop,parse:function(e){return e},set:function(e,t){n[e]&&(this.firePixel(this.getTrackerObj(i.getProperty(this.adConfig,e))),n[e]=!1),this.attr[e]=t},get:function(e){return this.attr[e]},getTrackerObj:function(e){var t,n=e.trackers;return t=n.map(function(t,n){var s={},o=s.custom={};return s.pixel=t.pixel,s.type=t.type,e.custom1&&(o.custom1=i.isArray(e.custom1)?e.custom1[n]:e.custom1,o.custom1||delete o.custom1),e.custom2&&(o.custom2=e.custom2),s})},firePixel:function(e){i.isArray(e)||(e=[e]),e.forEach(function(e,t){this["pixelType"+i.toCapital(e.type)](e)}.bind(this))},pixelTypeImg:function(e){var t,i=this.adConfig.pixelInfo,n=/^http|https?:\/\//i.test(e.pixel)?e.pixel:"http://"+i.host+i.insPrefixUrl+i.campaignName+i.insMidUrl+e.pixel+"&"+this.serialize(e.custom)+i.insSuffixUrl;t=new Image,t.src=n},pixelTypeJs:function(e){var t="JSPixelInfo",n=function(t){i.writeContentInIframe(t,e.pixel)};i.createSameDomainIframeNode(t,0,0,n)},pixelTypeIframe:function(e){var t="IframePixelInfo",n=function(t){t.src=e.pixel};i.createSameDomainIframeNode(t,0,0,n)},serialize:function(e){var t,n=[];for(t in e)i.hasProperty(e,t)&&n.push(t+"="+e[t]);return n.join("&")}});t.BaseModel=t.BaseModel||s}(window,window.EU),function(e){"use strict";function t(){this.componentList={VideoPlayer:{name:"VideoPlayer",appendTo:"teaserContainer"},Peel:{name:"Peel",appendTo:"appsnack_innerContainer"},Close:{name:"Close",appendTo:"appsnack_innerContainer"},RectangClose:{name:"RectangClose",appendTo:"appsnack_innerContainer"},Replay:{name:"Replay",appendTo:"appsnack_innerContainer"},Canvas:{name:"Canvas",appendTo:"teaserContainer"},PlayWrapper:{name:"PlayWrapper",appendTo:"appsnack_innerContainer"},VizuWidget:{name:"VizuWidget",appendTo:"appsnack_innerContainer"}}}t.prototype={getComponents:function(){return this.componentList},setComponent:function(e,t){this.componentList[e]=this.componentList[e]||{},this.componentList[e]=t,this.componentList[e].name=e}},e.ComponentConfig=new t}(window),function(e,t,i){"use strict";var n=t.CreateClass({constructor:function(){this.components={},this.componentLoaded=!1},init:function(t,n,s){this.creativeContCallBack={},this.sandBox=t,this.model=n,this.componentList=i.getComponents(),this.CMModel=e.EXPO_CREATIVE.CMModel,this.componentsModel=new this.CMModel(EXPO_CREATIVE.ConfigModel.getComponentsConfig()),Object.keys(this.componentList).forEach(function(e){this.components[this.componentList[e].name]&&this.components[this.componentList[e].name].init(this.componentList[e],this.model,s)}.bind(this))},registerForComponentLoaded:function(e){return this.componentLoaded?void e():void(this.callback=e)},communicateState:function(e){this.creativeContCallBack(e)},communicateCallback:function(e){this.creativeContCallBack=e},registerController:function(e){this.controller=e},registerComponent:function(e,t){this.components[t]||(this.components[t]=e),this.resolveComponent()},resolveComponent:function(){function e(e){return!!this.components[e]}var t=i.getComponents();this.componentLoaded=Object.keys(t).every(e.bind(this)),this.componentLoaded&&this.callback&&this.callback("loaded")},requireComponent:function(e){return this.components[e]},destroyComponent:function(e){this.components[e.id]&&delete this.components[e.id]},requestConfig:function(e,t){var i=t&&e[t]&&e[t].appendTo||e.appendTo,n="#"+i+"_"+this.sandBox.id.replace(/\$/g,""),s="get"+e.name+"Config",o=this.model[s](t,this.componentsModel.getConfigById(e.name,t));this.components[e.name].onConfig(o,n,t)},mergeModelInfo:function(e,t){var i={};return this.sandBox.utility.extend(i,t),this.sandBox.utility.extend(i,e),i},setPlayPixel:function(){},applyStateListeners:function(e){for(var t in e)this.requireComponent(t)&&this.requireComponent(t).setListeners(e[t])},removeStateListeners:function(){Object.keys(componentList).forEach(function(e){if(this.components[componentList[e].name])try{this.components[componentList[e].name].removeListeners()}catch(t){}}.bind(this))},communicate:function(e,t,i){var n=this.components;Object.keys(n).forEach(function(s){n[s][e]&&n[s][e](t,i)}),this.sandBox.baseEventManager.fire(e,{event:t},!0)}});e.CM||(e.CM=new n)}(window,window.EU,window.ComponentConfig),function(e,t,i,n){"use strict";i=e.EUCT=e.EUCT||t.extend({iframeId:"",initCreative:function(e){this.utility.assert(this.utility.isObject(e),"expected type for config is Object");var t=this.adunits[e.name]={};t.config=e,t.pluginsLoaded=!1,t.dependencies=e.dependencies,this.updateDependenciesList(e.dependencies),this.resolvePlugin()},resolvedCallback:function(e,t,i){e.id=e.config.id,e.adContainerId=e.config.adContainerId,e.baseEventManager.fire("creativeFrameworkReady"),t.initRender()}}),e.EXPO_CREATIVE=n||new i}(window,window.EUC,window.EUCT,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.BaseModel.extend({init:function(e){this.parseConfigJson(e)},parseConfigJson:function(e){return this.configData=e,e},getConfigById:function(e,t){var i=this.configData&&this.configData[e]?this.configData[e]:null;return i&&t&&i[t]?i[t]:i},mergeConfigById:function(e,t,i){var n=i&&this.configData[e][i]?this.configData[e][i]:this.configData[e];if(n)for(var s in t){var o=this.configData[e][i]||this.configData[e];o[s]=t[s]}}});i.CMModel=i.CMModel||n}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.ObservableClass.extend({constructor:function(e,t){this.model=e,this.render=t},StatesEnum:t.Enum({enumList:[{"teaser2VPM(teaser-to-vpm)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"teaser2VPMFast(teaser-to-vpm-fast)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"vpm2Teaser(vpm-to-teaser)":{destination:["initialTeaser","initialVideo"],onComplete:"vpm2Teaser"}},{"vpm2TeaserFast(vpm-to-teaser-fast)":{destination:["initialTeaser","initialVideo"],onComplete:"vpm2Teaser"}},{"teaser2Collapsed(teaser-to-collapsed)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"teaser2Collapsed"}},{"pausedTeaser2pausedCollapsed(pausedTeaser-to-pausedCollapsed)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"teaser2Collapsed"}},{"collapsedTeaser2vpm(collapsed-teaser-to-vpm)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"collapsedTeaser2vpmFast(collapsed-teaser-to-vpm-fast)":{destination:["vpm","finalVideo"],onComplete:"teaser2VPM"}},{"vpm2collapsedTeaser(vpm-to-collapsed-teaser)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"vpm2Collapsed"}},{"vpm2collapsedTeaserFast(vpm-to-collapsed-teaser)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"vpm2Collapsed"}},{"MainUnit2collapsedTeaserFast(MainUnit-to-collapsed-teaser)":{destination:["collapsedTeaser","collapsedVideo"],onComplete:"MainUnit2Collapsed"}},{"MainUnit2TeaserFast(MainUnit-to-teaser-fast)":{destination:["initialTeaser","initialVideo"],onComplete:"MainUnit2TeaserFast"}}],constructor:function(e){this.name=e},getDuration:function(e){return e.getTransitionTimes()[this.getName()]||0}}),transitions:{teaser2VPM:function(e){var t=e?this.StatesEnum.teaser2VPMFast:this.StatesEnum.teaser2VPM;this.notify(t.name),this.startTweenFromState(t)},VPM2Teaser:function(){var e=this.teaserCollapsed?this.StatesEnum.vpm2collapsedTeaser:this.StatesEnum.vpm2Teaser;this.notify(e.name),this.startTweenFromState(e);
},teaser2Collapsed:function(){var e=this.StatesEnum.teaser2Collapsed;this.startTweenFromState(this.StatesEnum.teaser2Collapsed),this.notify(e.name)},pausedTeaser2pausedCollapsed:function(){var e=this.StatesEnum.pausedTeaser2pausedCollapsed;this.startTweenFromState(this.StatesEnum.teaser2Collapsed),this.notify(e.name)},collapsed2VPM:function(e){var t=e?this.StatesEnum.collapsedTeaser2vpmFast:this.StatesEnum.collapsedTeaser2vpm;this.notify(t.name),this.startTweenFromState(t)},VPM2Collapsed:function(){var e=this.StatesEnum.vpm2collapsedTeaser;this.notify(e.name),this.startTweenFromState(e)},VPM2TeaserFast:function(){var e=this.teaserCollapsed?this.StatesEnum.vpm2collapsedTeaserFast:this.StatesEnum.vpm2TeaserFast;this.notify(e.name),this.startTweenFromState(e)},VPM2MainUnit:function(){var e=this.StatesEnum.vpm2MainUnit;this.notify(e.name),this.startTweenFromState(e)},MainUnit2TeaserFast:function(){var e=this.teaserCollapsed?this.StatesEnum.MainUnit2collapsedTeaserFast:this.StatesEnum.MainUnit2TeaserFast;this.notify(e.name),this.startTweenFromState(e)},MainUnit2Collapsed:function(){var e=this.StatesEnum.MainUnit2collapsedTeaserFast;this.notify(e.name),this.startTweenFromState(e)}},transitionsComplete:{teaser2VPM:function(){this.model.setIntermediateState(),this.animationClip=!0,this.vpmReached=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_VPM);var e=this.model.getDimensions("teaserCurrent");this.applyTweenDimensions(e),this.notify(this.model.getCurrentState())},teaser2VPMFast:function(){this.model.setIntermediateState(),this.animationClip=!0,this.vpmReached=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_VPM);var e=this.model.getDimensions("teaserCurrent");this.applyTweenDimensions(e),this.notify(this.model.CONST.AD_STATE_VPM_FAST)},vpm2Teaser:function(){this.model.setIntermediateState(),this.animationClip=!0;var e=this.vpmReached?"PAUSED-":"";this.model.setCurrentState(e?this.model.CONST.AD_STATE_PAUSED_TEASER:this.model.CONST.AD_STATE_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},teaser2Collapsed:function(){this.model.setIntermediateState(),this.animationClip=!0,this.teaserCollapsed=!0,this.model.set("closedTeaser",!0);var e=this.vpmReached?"paused-":"";this.model.setCurrentState(e?this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER:this.model.CONST.AD_STATE_COLLAPSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},vpm2TeaserFast:function(){this.animationClip=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_PAUSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent"));var e=this.vpmReached?"paused-":"";this.notify("vpm-to-"+e+"teaser-fast-complete")},MainUnit2TeaserFast:function(){this.model.setIntermediateState(),this.animationClip=!0,this.model.setCurrentState(this.model.CONST.AD_STATE_PAUSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},MainUnit2Collapsed:function(){this.model.setIntermediateState(),this.animationClip=!0,this.teaserCollapsed=!0,this.model.set("closedTeaser",!0),this.model.setCurrentState(this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())},vpm2Collapsed:function(){this.model.setIntermediateState(),this.animationClip=!0,this.teaserCollapsed=!0,this.model.set("closedTeaser",!0);var e=this.vpmReached?"paused-":"";this.model.setCurrentState(e?this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER:this.model.CONST.AD_STATE_COLLAPSED_TEASER),this.applyTweenDimensions(this.model.getDimensions("teaserCurrent")),this.notify(this.model.getCurrentState())}},startTweenFromState:function(e){this.killOngoingTweens(),this.animationClip=!1,this.currentTween=this.createTween(this.generateTweenObject(e)),this.currentTween.start(),this.saveOngoingTween(this.currentTween),this.animateClip()},killOngoingTweens:function(){this.currentTweens&&(this.currentTweens.forEach(function(e){e.stop()}),this.currentTweens=[])},createTween:function(e){var t;return t=new TWEEN.Tween(e.source).to(e.destination,e.duration).easing(TWEEN.Easing.Linear.None).onUpdate(e.onUpdate),t.onComplete(e.onComplete),t},saveOngoingTween:function(e){this.currentTweens||(this.currentTweens=[]),this.currentTweens.push(e)},animateClip:function(){TWEEN.update(),this.animationClip?cancelAnimationFrame(this.clipRequestID):this.clipRequestID=requestAnimationFrame(this.animateClip.bind(this))},generateTweenObject:function(e){return{source:this.model.getDimensions("teaserCurrent"),destination:this.mergeTweenObjects(this.model.getDimensions(e.destination[0]),this.model.getDimensions(e.destination[1])),duration:e.getDuration(this.model),onComplete:this.transitionsComplete[e.onComplete].bind(this),onUpdate:this.onTeaser2VPMUpdate(this)}},mergeTweenObjects:function(e,t){if(!e&&t)return e||t;var i={};for(var n in e)i["container."+n]=e[n],i["video."+n]=t[n];return i},onTeaser2VPMUpdate:function(e){return function(){e.applyTweenDimensions(this)}},applyTweenDimensions:function(e){this.model.saveDimensions({teaserCurrent:e}),this.render.applyTweenDimensions(e)}});t.CreativeAnimationHelper=t.CreativeAnimationHelper||n}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.utility,s=t.ObserverClass.extend({constructor:function(e,s,o,r){this.sandBox=o,this.adUnitClicked=!1,this.videoPixels={},this.peel=e.requireComponent("Peel"),this.close=e.requireComponent("Close"),this.rectangleClose=e.requireComponent("RectangClose"),this.replay=e.requireComponent("Replay"),this.video=e.requireComponent("VideoPlayer"),this.events=i.require("events",o),this.tracker=i.require("tracker",o),this.playWrapper=e.requireComponent("PlayWrapper"),this.Messages=i.require("messages",o),this.AssetsLoader=i.require("assetsLoader",o),this.designerAPI=i.require("designerAPI",o),this.VizuWidget=e.requireComponent("VizuWidget"),this.InView=i.require("InView"),this.muse_assetLoaded=!1,this.VPMFastCLick=!1,this.custom5="",this.playTime=Date.now(),this.adExperience={},this.videoWasPlaying,this.inviewTimeArrayComplete=!1,this.inviewTimeArray="CPV"===s.adConfig.engagementType?s.adConfig.inviewPixelTime:void 0,this.totalTeaserTd=0,this.totalMainUnitTd=0,this.mainunitLoadStarted=!1,this.deepEngagementTimmer="",this.oldVideoId,"ie"===this.getDeviceInfo().browserName?(this.canvas=e.requireComponent("Canvas"),this.canvasAction=function(e){this.canvas[e]()}):this.canvasAction=function(e){},this.variableManager={},this.helper=new t.CreativeAnimationHelper(s,r),this.helper.addObserver(this),this.adWindow=window,this.loadOriginalCss=!1,this.compManager=e,this.render=r,this.model=s,this.engagementFired=!1,this.config=this.model.adConfig,this.dimension=this.config.teaser.width+"x"+this.config.teaser.height,this.teaserVideoCfg={},this.teaserVideoCfg.standard=this.config.teaser[this.dimension].standard.video,this.model.setAdDimension(this.dimension),this.videoRestarted=!1,this.currentEvent=void 0,this.transitionEvent=void 0,this.peelContainer="",this.initialPosterImageHided=!1,this.sandBox.urlConfig=this.config.urlConfig,this.sandBox.dynamicData=this.config.dynamicData,"Chrome"===this.sandBox.sniffer.getBrowserInfo()&&this.sandBox.baseEventManager.add("indexDbSourceDownloadedEvent",function(e){var t=this.model.getCurrentState();t!==this.model.CONST.AD_STATE_PAUSED_TEASER&&t!==this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER||this.video.pausePlayer()}.bind(this)),this.sandBox.baseEventManager.add("volumeChangeEvent",function(e){var t=this.model.getCurrentState();t!==this.model.CONST.AD_STATE_TEASER&&t!==this.model.CONST.AD_STATE_MAINUNIT||e||this.video.showUnmuteOverlay()}.bind(this)),this.sandBox.baseEventManager.add("handleVolumeChangeEvent",function(){this.loadOriginalCss=!0,this.designerAPI.setUserClickStatus(!0),this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT&&this.loadOriginalCssFile()}.bind(this)),"Chrome"===this.sandBox.sniffer.getBrowserInfo()&&(this.registerAdUnloadEvent(),this.adExperience=s.getAdExperience()),this.designerAPI.setUserClickStatus(!s.getTurnOffAutoSwitchFlag()),n.compose(this.showComponents,this.saveInitialProps,this.applyTeaserState,this.getPossibleExpansion,this.registerForComponentEvent,this.startComponentManager,this.render.initializeComponent.bind(this.render),this.fireTeaserLoaded,this.checkForLoadPixel,this.initTracker).call(this),this.bindRender(),this.mainunitCloseCB=n.debounce(this.mainunitCloseCB.bind(this),2)},registerAdUnloadEvent:function(){var e=this;if(window.ReportingObserver)try{var t=new ReportingObserver(function(t,i){e.fireAdUnloadPixel(t[0]?t[0].body:{})},{buffered:!0});t.observe()}catch(i){console.log(i)}},fireAdUnloadPixel:function(e){var t="",i="",n={type:"img",pixel:"offload",currentState:this.model.getCurrentState()};i=e.message?e.message:"",t=i.match(/network usage/g)?1:i.match(/CPU usage/g)?0:2,n.custom1=";bv:"+this.sandBox.sniffer.getBrowserFullVersion().version+";rea:"+t,n.custom4=";msg:"+i.slice(0,100),this.tracker.firePixel(n)},checkForLoadPixel:function(){this.config.e9&&this.config.e9.hasOwnProperty("environment")&&!this.config.e9.environment?this.config.whitelistedPixelEvents.indexOf("load")>-1&&this.render.setInitialTracker.call(this.tracker):this.render.setInitialTracker.call(this.tracker)},fireVideoReplayPixel:function(){var e,t=this.getCurrentVideoSourceId()||"video1";e=this.config.fullscreen.trackers.videos[t].replay||null,e&&(e.custom1=this.config.fullscreen.trackers.videos[t].replay&&(this.config.fullscreen.trackers.videos[t].replay.custom1||this.config.fullscreen.trackers.videos[t].custom1||"video1"),e.custom2=";vo:0",this.firePixel(e))},onVideoReplayClick:function(e){this.loadOriginalCss=!0,this.designerAPI.setUserClickStatus(!0),e.preventDefault(),e.stopPropagation(),this.video.resumePlayer(),this.video.showReplayIcon(!1),this.fireVideoReplayPixel(),this.video.getVideoTag().manualMute||this.video.setVolume(1),"partial"!==this.adExperience.chunks||this.ischunksLoaded||(this.ischunksLoaded=!0,this.video.fetchPendingChunks()),this.originalCssLoaded||this.lazyAssetLoader(function(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=this.model.adConfig.museUrl+"css/index-original.css",this.originalCssLoaded=!0,document.getElementsByTagName("head")[0].appendChild(e)}.bind(this))},initTracker:function(){var e={};e.pixel_info=this.config.pixelInfo,e.teaser=this.config.teaser.trackers,e.fullscreen=this.config.fullscreen.trackers,e.customTrackers=this.model.adConfig.customTrackers,this.tracker.setProperties(e),this.tracker.setEngagementType(this.config.engagementType),this.tracker.setDefaultCustom1paramsforCPV(this.config.pixelInfo.custom1)},firePixel:function(e,t){if(this.sandBox.debug&&(this.custom5=this.custom5||this.buildDebuggingPixel()),e.referrer&&e.trigger&&(e.custom2=";trigger:"+e.trigger+";referrer:"+e.referrer),this.custom5&&(e.custom5=this.custom5),e.isFireCustomPixel=this.config.isFireCustomPixel,this.config.isFireCustomPixel&&e.trackers)for(var i=e.trackers,n=0;n<i.length;n++)"customPixel"===i[n].pixel&&this.cookCustomPixel(i[n]);switch(this.config.e9&&this.config.e9.hasOwnProperty("environment")&&!this.config.e9.environment&&e.trackers&&e.trackers.forEach(function(t,i){t&&this.config.whitelistedPixelEvents.indexOf(t.pixel)===-1&&(e.trackers[i]=null)}.bind(this)),this.checkForCPVEngType()&&(e.td=this.getInviewTd(),e.currentState=this.model.getCurrentState()),t){case"queue":this.tracker.queued(e);break;case"unqueue":this.tracker.unqueued();break;default:return this.tracker.firePixels(e)}},buildDebuggingPixel:function(){var e="",t={fl:this.config.frameLevel||0,purl:this.config.pageUrl||"",os:this.sandBox.sniffer.getOsInfo()||"",brInfo:this.sandBox.sniffer.getBrowserInfo()||""};return e="custom5=fl:"+t.fl+";os:"+t.os+";brInfo:"+t.brInfo+";purl:"+t.purl+";"},fireTeaserLoaded:function(){var e={type:"img",pixel:"ready"};this.checkForCPVEngType()&&(e.td=this.getInviewTd(),e.currentState=this.model.getCurrentState()),this.config.e9&&this.config.e9.hasOwnProperty("environment")&&!this.config.e9.environment?this.config.whitelistedPixelEvents.indexOf(e.pixel)>-1&&this.tracker.firePixel(e):this.tracker.firePixel(e)},bindRender:function(){var e,t;this.rectangleClose&&(this.rectangleClose.add(this.events.RECTANGLECLICK.getEventName(),this.onRectangleClose.bind(this)),this.render.add("rectangClose_mouseover",this.onRectangleCloseHover.bind(this)),this.render.add("rectangClose_mouseout",this.onRectangleCloseOut.bind(this)),this.render.add("rectangClose_click",this.onRectangleClose.bind(this))),this.close&&(this.close.add(this.events.CIRCULARCLICK.getEventName(),this.onCircularClick.bind(this)),this.VizuWidget.isVizu&&this.close.add(this.events.CIRCULARHOVER.getEventName(),this.onCircularHover.bind(this))),this.replay&&this.replay.add(this.events.REPLAYCLICK.getEventName(),this.onReplayClick.bind(this)),this.video.replay.container&&this.video.replay.container.addEventListener(this.events.REPLAYCLICK.getEventName(),this.onVideoReplayClick.bind(this)),this.render.add("mouseover.TEASER",this.onTeaserMouseOver.bind(this)),this.render.add("mouseout.TEASER",this.onTeaserMouseOut.bind(this)),this.render.add("click.TEASER",this.onTeaser2VPMClick.bind(this)),this.render.add("mouseover.COLLAPSED-TEASER",this.onCollapsedTeaserMouseOver.bind(this)),this.render.add("mouseout.COLLAPSED-TEASER",this.onCollapsedTeaserMouseOut.bind(this)),this.render.add("click.COLLAPSED-TEASER",this.onCollapsedTeaser2VPMClick.bind(this)),this.render.add("click.VPM",this.applyMainUnit.bind(this,!0)),this.render.add("click.MAINUNIT",this.videoClickOnMainUnit.bind(this)),e=document.getElementsByTagName("rm_close")[0],t=document.getElementsByTagName("rm_wrapper_close")[0],this.customPosterImage=document.getElementById("posterImage"),e.addEventListener(this.events.CIRCULARCLICK.getEventName(),this.onCircularClickMainUnit.bind(this)),e.addEventListener(this.events.CIRCULARHOVER.getEventName(),this.onCircularHover.bind(this)),this.VizuWidget.isVizu&&t.addEventListener(this.events.CIRCULARHOVER.getEventName(),this.onCircularHover.bind(this)),this.video.addPlayListener(this.videoPlay.bind(this)),this.video.setInitialListeners(this.handleVideoEvent.bind(this)),this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()&&this.showCustomPosterImage(),this.video.add("renderComplete",function(){this.render.showAd(),this.firePixel(this.config.teaser.trackers.impression.imp)}.bind(this)),this.peelContainer=document.getElementById("peelContainer"),this.sandBox.baseEventManager.add("muse.playlist.playlistEnd",function(){if(this.designerAPI&&this.designerAPI.getCallBackApi){var e=this.designerAPI.getCallBackApi().playListEndEvent;e&&e.call(this.designerAPI)}}.bind(this)),this.sandBox.baseEventManager.add("muse_mainunit_error",function(e){var t=this.config.teaser.trackers.debugging_pixel.muse_mainunit_error;t&&this.firePixel(t)}.bind(this)),this.sandBox.baseEventManager.add("muse_mainunit_image_error",function(e){var t=this.config.teaser.trackers.debugging_pixel.muse_mainunit_image_error;t&&this.firePixel(t)}.bind(this))},getScreenType:function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return e},handleVideoEvent:function(e){if(e&&e.type){var t,i,s=this.model.getCurrentState(),o=e.type,r="",a=null,l=e.target.currentTime,c=(this.video.getVideoTag(),0),d=this.video.getVideoLoopDuration(),r=this.getCurrentVideoSourceId()||this.config.fullscreen.trackers.videos.video1.custom1,u=this.video.getVideoDuration();switch(c=u&&r===this.video.getDefaultVideoId()?u:e.target.duration,o){case"play":if(this.checkForCPVEngType()&&!this.model.getIsInView()&&this.video.pausePlayer(),s!==this.model.CONST.AD_STATE_VPM&&s!==this.model.CONST.AD_STATE_MAINUNIT)return;!this.oldState||"pause"!==this.oldState&&"suspend"!==this.oldState||(t="resume"),this.oldState=o;var h=this.getCurrentVideoSourceId();this.oldVideoId!=h&&(this.oldVideoId=h,this.checkForLandingPage());break;case"rewind":t="rewind";break;case"pause":var m=Math.floor(Math.round(l)/c*100);t="paused",this.oldState=o,m>96&&(t=void 0);break;case"emptied":t="changed";break;case"ended":if(s!==this.model.CONST.AD_STATE_VPM&&s!==this.model.CONST.AD_STATE_MAINUNIT)return;if(t="complete",this.designerAPI&&this.designerAPI.getCallBackApi){var f=this.designerAPI.getCallBackApi().videoEndedEvent;f&&f.call(this.designerAPI,r,e)}break;case"canplay":this.mainunitLoadStarted||this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()&&!this.initialPosterImageHided&&(this.initialPosterImageHided=!0,setTimeout(function(){this.hideCustomPosterImage()}.bind(this),370));break;case"timeupdate":var m=Math.floor(Math.round(l)/Math.round(c)*100);if(s!==this.model.CONST.AD_STATE_TEASER&&s!==this.model.CONST.AD_STATE_COLLAPSED_TEASER||!(l>=c-.25||l>=d-.25)||(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.setPlayerTime(.1):this.setPlayerTime(0)),s===this.model.CONST.AD_STATE_MAINUNIT&&"video1"===this.getCurrentVideoSourceId()&&"partial"===this.adExperience.chunks&&!this.designerAPI.getUserClickStatus()&&(l>=c-.25||l>=d-.25)&&(this.ischunksLoaded||(this.video.showReplayIcon(!0),this.video.pausePlayer())),!this.checkForCPVEngType()){if(s!==this.model.CONST.AD_STATE_VPM&&s!==this.model.CONST.AD_STATE_MAINUNIT)return;if(!this.videoRestarted&&this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER)return}if(m>=95&&s===this.model.CONST.AD_STATE_TEASER?t="complete":m>=75?t="thirdquartile":m>=50?t="secondquartile":m>=25?t="firstquartile":m>=0&&((void 0===this.tracker.getLastcall()||"resetEngagementTime"===this.tracker.getLastcall()&&!this.tdTeaserStarted)&&(this.tracker.setEngagementTime(),this.tdTeaserStarted=!0),this.model.getCurrentState()!==this.model.CONST.AD_STATE_VPM||this.engagementFired||(i=this.config.fullscreen.trackers.engagement.eng.engLive,i&&!this.engagementPixelRegisterOnce&&(this.model.setOptTimeStamp(),this.engagementPixelRegisterOnce=!0,this.playPauseTimerEng=n.playPauseTimer(this.fireEngagementPixel.bind(this),3e3))),t="start"),this.designerAPI&&this.designerAPI.getCallBackApi){var f=this.designerAPI.getCallBackApi().videoProgressEvent;f&&f.call(this.designerAPI,r,e)}break;case"volumechange":if(s!==this.model.CONST.AD_STATE_VPM&&s!==this.model.CONST.AD_STATE_MAINUNIT)return;e.target.muted?(t="mute",this.video.setMuteStatus(!0)):(this.video.setMuteStatus(!1),t="unmute");break;case"fullscreenchange":case"mozfullscreenchange":case"webkitfullscreenchange":case"MSFullscreenChange":"fullscreen"===this.getScreenType()?this.canvasAction("hide"):(this.applyMainUnit(!0),this.canvasAction("reConfig")),this.handleVideoFullScreen()}t&&(i=this.config.fullscreen.trackers.videos[r][t]||null,a=this.config.fullscreen.trackers.videos[r][t]&&(this.config.fullscreen.trackers.videos[r][t].custom1||this.config.fullscreen.trackers.videos[r].custom1||r),i&&(i.custom1=a,i.custom2=";vo:0",this.checkForCPVEngType()&&this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(i=this.config.teaser.trackers.inviewPixel.videoTeaser[t],i.custom1=a,r===this.video.getDefaultVideoId()?i.custom2="vo:0":i.custom2="vo:999","start"===t&&(!this.inviewPerStatus||this.inviewPerStatus<this.config.playVideoInPctView)?this.firePixel(i,"queue"):this.firePixel(i)),this.model.getCurrentState()!==this.model.CONST.AD_STATE_MAINUNIT&&this.model.getCurrentState()!==this.model.CONST.AD_STATE_VPM||(r===this.video.getDefaultVideoId()?i.custom2="vo:0":i.custom2="vo:999",this.firePixel(i))),this.checkForCPVEngType()&&this.model.getIsInView()===!0&&"video1"===r&&this.fireInviewPcPixels(t,r))}},checkForLandingPage:function(){this.checkForVideoClickUrl()?this.video.showHandCursor():this.video.hideHandCursor()},showCustomPosterImage:function(){this.customPosterImage=document.getElementById("posterImage"),this.customPosterImage&&(this.customPosterImage.style.display="block")},hideCustomPosterImage:function(){this.customPosterImage.style.display="none"},videoPlay:function(){var e=Date.now()-this.playTime;"Chrome"===this.sandBox.sniffer.getBrowserInfo()&&this.config.teaser.trackers.indexedDB.playDuration.custom4&&(this.config.teaser.trackers.indexedDB.playDuration.custom4="playTime:"+e+";"+this.config.teaser.trackers.indexedDB.playDuration.custom4,this.firePixel(this.config.teaser.trackers.indexedDB.playDuration)),this.renderVideoToCanvas()},handleTransition:function(e){switch(e){case"teaser-to-vpm":this.vpmStateReached||this.applyTeaser2VPMVideo();break;case"teaser-to-vpm-fast":this.applyVPMVideo(),this.replay.hide(),this.checkForRectangleClose()&&this.rectangleClose.hide();break;case"vpm-to-teaser":clearTimeout(this.teaserVideoTimeout),this.teaserVideoTimeout="",this.close.hide();break;case"vpm-to-mainunit":break;case"teaser-to-collapsed":this.rectangleClose.hide();break;case"collapsed-teaser-to-vpm":this.replay.hide(),this.vpmStateReached||this.applyTeaser2VPMVideo();break;case"collapsed-teaser-to-vpm-fast":this.applyVPMVideo(),this.replay.hide(),this.checkForRectangleClose()&&this.rectangleClose.hide();break;case"vpm-to-collapsed-teaser":clearTimeout(this.teaserVideoTimeout),this.teaserVideoTimeout="";break;case"vpm-to-teaser-fast":break;case"pausedTeaser-to-pausedCollapsed":this.rectangleClose.hide();break;case"collapsed-teaser-to-vpm-fast":break;case"MainUnit-to-collapsed-teaser":break;case"MainUnit-to-teaser-fast":}},fireDeepEngagement:function(){var e,t="CPE+";this.model.getCurrentState()!==this.model.CONST.AD_STATE_MAINUNIT&&this.model.getCurrentState()!==this.model.CONST.AD_STATE_VPM||(e=this.config.fullscreen.trackers.deepEngagement.eng,e&&this.firePixel(e),this.model.getEngagementType().toUpperCase()===t&&this.fireBillablePixels())},handleChangeState:function(e){var t,i="CPM",n="CPME",s="CPV";switch(clearTimeout(this.teaserVideoTimeout),this.teaserVideoTimeout="",e){case this.model.CONST.AD_STATE_VPM:console.log("VPM STATE REASHED ",Date.now());var o=document.getElementsByTagName("rm_video")[0];o.style.zIndex=999,t=this.config.fullscreen.trackers.engagement.eng,t&&this.firePixel(t),t=null,this.model.getEngagementType().toUpperCase()!==i&&this.model.getEngagementType().toUpperCase()!==n&&this.model.getEngagementType().toUpperCase()!==s||this.fireBillablePixels(),this.VizuWidget.isVizuShown()||(this.VizuWidget.add("firePixel",this.fireVizuPixel.bind(this)),this.VizuWidget.fireVizuPixel()),this.canvasAction("hide"),this.render.hideWrapperContainer(),this.video.setLoop(),this.video.addDataAttribute("vpm"),this.video.showControls(!1);var r=document.getElementsByTagName("rm_close")[0],a=document.getElementsByTagName("rm_wrapper_close")[0];if(this.VizuWidget.isVizu&&(document.body.insertBefore(a,document.body.firstChild),a.style.display="block"),document.body.insertBefore(r,document.body.firstChild),r.style.display="block",this.close.show(),this.checkForRectangleClose()&&this.rectangleClose.hide(),this.clearTimmer)return;this.vpmStateReached=!0,this.clearTimmer=this.applyMainUnit(),this.tracker.setEngagementTime(),this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{visibility:"hidden"}),this.communicateToPublisher(this.Messages.CHANGECLOSEDISPLAY.eventName,{display:"none"}),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!0}),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!0}),this.checkForCPVEngType()||(t=this.config.fullscreen.trackers.deepEngagement.eng,t&&(this.deepEngagementTimmer=setTimeout(this.fireDeepEngagement.bind(this),5e3)),t=null);break;case this.model.CONST.AD_STATE_TEASER:this.video.hideUnmuteOverlay(),this.canvasAction("show"),this.setPlayerVolume(0),this.video.showControls(!1),this.peel.entryPeelAnimation();break;case this.model.CONST.AD_STATE_PAUSED_TEASER:this.video.hideUnmuteOverlay(),this.communicateToPublisher(this.Messages.MAINUNITBACKGROUNDDIV.eventName,{action:!1}),this.canvasAction("show"),this.close.hide(),this.checkForRectangleClose()&&this.rectangleClose.show(),this.replay.show(),this.setPlayerVolume(0),this.model.isVideoDynamicStreaming()?(this.setPlayerTime(0),this.showCustomPosterImage()):this.video.getVideoTag().load(),this.pausePlayer(),this.tracker.resetEngagementTime(),this.video.showControls(!1),this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{visibility:"hidden"}),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!1});break;case this.model.CONST.AD_STATE_COLLAPSED_TEASER:this.canvasAction("show"),this.peel.entryPeelAnimation(),this.setPlayerVolume(0),this.checkForRectangleClose()&&this.rectangleClose.hide(),this.video.showControls(!1),this.communicateToPublisher(this.Messages.CHANGECLOSEDISPLAY.eventName,{display:"none"});break;case this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER:this.communicateToPublisher(this.Messages.MAINUNITBACKGROUNDDIV.eventName,{action:!1}),this.canvasAction("show"),this.close.hide(),this.replay.show(),this.checkForRectangleClose()&&this.rectangleClose.hide(),this.setPlayerVolume(0),this.pausePlayer(),this.tracker.resetEngagementTime(),this.video.showControls(!1),this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{visibility:"hidden"}),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!1})}},update:function(e,t){var i,s;return this.model.getIntermediateState()===this.model.CONST.PHAZE_TRANSITION||this.model.getIntermediateState()===this.model.CONST.PHAZE_TRANSITION_FAST?(this.transitionEvent&&n.isArray(this.transitionEvent)&&this.transitionEvent.forEach(function(e){s="transition_"+this.model.getCurrentState()+"_"+e,i=this.config.fullscreen.trackers.phaze[s.toLowerCase()],i&&this.firePixel(i)}.bind(this)),this.video.showControls(!1),this.handleTransition(t),void(this.transitionEvent=void 0)):(this.currentEvent&&n.isArray(this.currentEvent)&&this.currentEvent.forEach(function(e){s=this.model.getCurrentState()+"_"+this.model.getPreviousState()+"_"+e,i=this.config.teaser.trackers.phaze[s.toLowerCase()],i&&this.firePixel(i)}.bind(this)),this.canvasAction("hide"),this.handleChangeState(t),void(this.currentEvent=void 0))},getDeviceInfo:function(){return this.sandBox.sniffer.getDeviceInfo()},renderVideoToCanvas:function(){this.canvasAction("renderVideo")},showComponents:function(){if(this.checkForRectangleClose()){var e=this.compManager.requireComponent("RectangClose");e.show()}},startComponentManager:function(){"undefined"!=typeof dynamicCreative&&dynamicCreative.renderTeaser(this.model.adConfig,i.ConfigModel.getComponentsConfig()),this.compManager.init(this.sandBox,this.model)},calculateTotalCumulativeTime:function(){0!==this.model.getInviewStartTime()&&this.model.setTotalTd(this.model.getTotalTd()+(Date.now()-this.model.getInviewStartTime())),this.checkForTdInInviewArray(this.model.getTotalTd()),this.checkForMaxTd()?(this.model.setInviewStartTime(Date.now()),this.createInviewTimeOut()):this.inviewTimeArrayComplete=!0},pauseCumulativeInviewTime:function(){this.model.getInviewStartTime()&&(this.pauseInviewTd(),this.checkForTdInInviewArray(this.model.getTotalTd()))},checkForMaxTd:function(){var e=Math.max.apply(null,this.inviewTimeArray);return Math.floor(this.model.getTotalTd()/1e3)<e},checkForTdInInviewArray:function(e){var t,i,n,s;this.inviewTimeArray.indexOf(Math.floor(e/1e3))>=0&&(n=this.inviewTimeArray.splice(this.inviewTimeArray.indexOf(Math.floor(e/1e3)),1),t=this.model.getCurrentState(),s=this.config.widzardConfig.CPVengagementPixelTime||this.config.CPVengagementPixelTime,n[0]===s&&(i=this.config.fullscreen.trackers.billable,i.custom1||(i.custom1=n+"timecomplete"),this.firePixel(i)),i=JSON.parse(JSON.stringify(this.config.teaser.trackers.inviewPixel.inview)),i&&(i.custom1=n+i.custom1,this.firePixel(i)))},calculateOneSecContinousTime:function(){var e;this.oneSecFired=!0,e=JSON.parse(JSON.stringify(this.config.teaser.trackers.inviewPixel["1inView"])),e&&this.firePixel(e)},handleTimerLogic:function(e){this.inview=e,e?(this.checkForMaxTd()&&(this.model.getInviewStartTime()||this.startInviewTD(),this.createInviewTimeOut()),this.oneSecFired||this.create1secContinousTimmer()):(clearTimeout(this.oneSecTImeoutTimmner),clearTimeout(this.inviewTimmner),this.checkForMaxTd()&&this.pauseCumulativeInviewTime())},create1secContinousTimmer:function(){clearTimeout(this.oneSecTImeoutTimmner),this.oneSecTImeoutTimmner=setTimeout(this.calculateOneSecContinousTime.bind(this),1e3)},createInviewTimeOut:function(){this.inviewTimmner=setTimeout(this.calculateTotalCumulativeTime.bind(this),1e3)},checkForCPVEngType:function(){return"CPV"===this.config.engagementType},getInviewTd:function(){return this.inview&&this.inviewTimeArrayComplete&&(this.model.setTotalTd(this.model.getTotalTd()+(Date.now()-this.model.getInviewStartTime())),this.model.setInviewStartTime(Date.now())),this.model.getTotalTd()},startInviewTD:function(){this.model.setInviewStartTime(Date.now())},pauseInviewTd:function(){this.model.getInviewStartTime()&&(this.model.setTotalTd(this.model.getTotalTd()+(Date.now()-this.model.getInviewStartTime())),this.model.setInviewStartTime(0))},transformDAPIPixelData:function(e,t){var i=[],n={};return Array.isArray(t)?(t.forEach(function(t){i.push({name:e,eventName:t.eventName,type:t.type,multi:!!t.multi&&t.multi,value:t.value,data:t.data||void 0})}),i.forEach(function(e){n.custom1?("js"===n.trackers[0].type&&(n.custom1=e.value?e.value:e.name),!n.custom4&&e.data&&(n.custom4=e.data?"data:"+JSON.stringify(e.data)+";":void 0),n.trackers.push({pixel:e.eventName?e.eventName:e.value,type:e.type?e.type:"img",isBillable:!!e.isBillable&&JSON.parse(e.isBillable)})):n={custom1:e.value?e.value:e.name,custom4:e.data?"data:"+JSON.stringify(e.data)+";":void 0,multi:!!e.multi&&JSON.parse(e.multi),trackers:[{pixel:e.eventName?e.eventName:e.value,type:e.type?e.type:"img",isBillable:!!e.isBillable&&JSON.parse(e.isBillable)}]}}),JSON.parse(JSON.stringify(n))):t},fireDesignerApiPixel:function(e){var t=null,i=null,n=null;this.model.adConfig.customTrackers&&(n=e.isDynamic===!0?(this.model.adConfig.customTrackers[e.pixelId+"_RM_dynamic"]?this.model.adConfig.customTrackers[e.pixelId+"_RM_dynamic"]:[])||[]:this.model.adConfig.customTrackers[e.pixelId]||[],e.data&&(t=void 0===(n&&n.isFirePixel)?this.transformDAPIPixelData(e.pixelId,e.data):n,i=void 0===(n&&n.isFirePixel)?this.transformDAPIPixelData(e.pixelId,n):this.model.adConfig.customTrackers[e.pixelId]),n=e.isDynamic===!0?t:i,n.custom1=n.custom1,void 0===e.multi&&(e.multi=n.multi),n.multi=e.multi,e.isDynamic===!0?this.model.adConfig.customTrackers[e.pixelId+"_RM_dynamic"]=this.firePixel(n):this.model.adConfig.customTrackers[e.pixelId]=this.firePixel(n))},registerForComponentEvent:function(){this.sandBox.baseEventManager.add(this.Messages.SETPOSSIBLEEXPANSION.eventName,function(e){this.setPossibleExpansion(e.eventObj)}.bind(this)),window.addEventListener("DesignerAPI",function(e){this.fireDesignerApiPixel(e.message)}.bind(this),!0);var e=function(e){this.isInView(e.eventObj),setTimeout(function(){this.inviewPerStatus=e.eventObj}.bind(this),400),e.eventObj&&e.eventObj>=this.config.playVideoInPctView&&this.firePixel({},"unqueue")};this.sandBox.baseEventManager.add(this.Messages.ISINVIEW.eventName,e.bind(this))},handleEngagement:function(){var e=this.model.getInFocus();this.playPauseTimerEng&&!this.engagementFired&&(e?this.playPauseTimerEng.resume():this.playPauseTimerEng.pause()),this.handleDeepEngagement(),this.handleBillable()},handleDeepEngagement:function(){return},handleBillable:function(){return},cookCustomPixel:function(e){var t=/\{(.*?)\}/gi;return e.originalcustomPixelStr||(e.originalcustomPixelStr=e.customPixelStr),e.customPixelStr=e.originalcustomPixelStr,e.customPixelStr=e.customPixelStr.replace(t,function(e){var t="get"+e.substr(1,e.length-2).capitalizeFirstLetter();return this.model[t]?this.model[t]():this.video[t]?this.video[t]():"";
}.bind(this)),e},fireCustomPixel:function(e,t){var i,n=this.model.getCustomPixel(e);this.config.isFireCustomPixel&&n&&(n.interval||n.count?(n.interval=n.interval?n.interval:1,n.currentCount=0,i=setInterval(function(){n.currentCount++,n.count&&n.currentCount>=n.count&&clearInterval(i),this.tracker.fireCustomPixel(this.cookCustomPixel(n),t)}.bind(this),1e3*parseInt(n.interval))):this.tracker.fireCustomPixel(this.cookCustomPixel(n),t))},resetTdValue:function(e){void 0!=this.tracker.getLastcall()&&(e===!1?this.tracker.resetEngagementTime():void 0!==this.tracker.getLastcall()&&"resetEngagementTime"!==this.tracker.getLastcall()||this.tracker.setEngagementTime())},fireInviewPcPixels:function(e,t){var i,n=null;try{n=parseInt(t.split("video")[1],10)}catch(s){console.warn("Invalid Video ID")}var o=null;switch(e){case"start":o="0pcInView";break;case"firstquartile":o="25pcInView";break;case"secondquartile":o="50pcInView";break;case"thirdquartile":o="75pcInView";break;case"complete":o="100pcInView"}var r=this.config.teaser.trackers.inviewPixel[o],a=this.config.fullscreen.trackers.videos[t].custom1;r&&(this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(i="teaser"),this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT&&(i="mainunit"),r.custom2=";vo:"+parseInt(n-1,10),r.custom1=a,r.currentState=i,this.firePixel(r))},fireInviewPixels:function(e){var t,i,n=this;e?(this.startInviewPixelTimer!=-1&&clearInterval(this.startInviewPixelTimer),this.startInviewPixelTimer=setInterval(function(){i=this.config.teaser.trackers.teaserInview,this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(t="teaser"),this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT&&(t="mainunit"),i&&(i.custom1="st:"+t,i.multi=!0,this.firePixel(i))}.bind(n),n.model.getInviewPixelTimer())):clearInterval(this.startInviewPixelTimer)},isVideoTabActive:function(){for(var e=this.video.getVideoTag(),t=!1;e.parentNode;)e.className&&e.className.indexOf("wp-panel-active")>-1&&(t=!0),e=e.parentNode;return t},handleVisibilityChange:function(e){if(!this.VizuWidget.isVizuScreenDisplayed()){if(this.model.getCurrentState()===this.model.CONST.AD_STATE_PAUSED_TEASER||this.model.getCurrentState()===this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER)return void this.video.pausePlayer();if(this.checkForCPVEngType()&&!e)return void this.video.pausePlayer();var t=this.video.getVideoTag(),i=!!t.offsetHeight;this.sandBox.sniffer.deviceInfo.isSafari&&!this.sandBox.sniffer.isSafariGreaThanEqualTo11()&&this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT&&(i=this.isVideoTabActive()),e&&this.video.checkPauseStatus()&&i?(this.video.showReplayIcon(!1),this.video.resumePlayer()):e||this.video.checkPauseStatus()||this.model.getCurrentState()===this.model.CONST.AD_STATE_VPM?e||this.model.getCurrentState()===this.model.CONST.AD_STATE_VPM||(console.log("pause player -> out of view"),this.video.pausePlayer()):(this.sandBox.sniffer.isSafariGreaThanEqualTo11()&&(this.video.getVideoTag().muted=!0),this.video.pausePlayer())}},addVideoSrcInViewPort:function(e){var t=null,i=null;t=e>=this.config.loadVideoInPctView,t&&(i=this.video.getVideoTag(),i.currentSrc||this.video.addVideoSrc(null,this.model.getCurrentState(),this.onVideoSrcSet.bind(this,e)))},onVideoSrcSet:function(e){var t=this.video.getVideoModel(),i=this.video.getVideoTag();i.src&&(this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&(this.initialVideoLoadTime=Date.now()),t&&t.config.isVideoDynamicStreaming&&this.model.getCurrentState()!==this.model.CONST.AD_STATE_MAINUNIT&&this.handleVisibilityChange(e>=this.config.playVideoInPctView))},communicateToPublisher:function(e,t){this.sandBox.baseEventManager.fire(this.Messages.SENDTOPUBLISHER.eventName,{eventName:e,message:t})},setPossibleExpansion:function(e){var t={};this.destinationPosition=e.mainUnitClip,this.sourcePosition=e.possibleExpansion,t.top=e.mainUnitClip.top,this.model.adConfig.teaser.height>this.model.adConfig.fullscreen.height&&(t.top=0),t.left=e.mainUnitClip.left,t.width=this.config.fullscreen.width,t.height=this.config.fullscreen.height,this.model.saveDimensions({vpm:t}),e.expansionData&&(this.config.expansionData=e.expansionData),this.render.initializeComponent.call(this.render),this.saveInitialProps(),this.model.getCurrentState()===this.model.CONST.AD_STATE_COLLAPSED_TEASER||this.model.getCurrentState()===this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER?this.video.resizePlayer(this.model.getDimensions("collapsedVideo")):this.video.resizePlayer(this.model.getDimensions("initialVideo"))},setStyle:function(e,t){for(var i in t)e.style[i]=t[i]},checkForRectangleClose:function(){return"970x250"===this.dimension},getPossibleExpansion:function(){var e={action:"getPossibleExpansion",adId:this.adId,target:{width:this.config.fullscreen.width,height:this.config.fullscreen.height}};this.communicateToPublisher(this.Messages.GETPOSSIBLEEXPANSION.eventName,e)},saveInitialProps:function(){if(this.model.saveDimensions({teaserCurrent:this.helper.mergeTweenObjects(this.model.getDimensions("initialTeaser"),this.model.getDimensions("initialVideo"))}),this.checkForRectangleClose()){var e=this.model.getDimensions("initialTeaser"),t={width:e.width,height:90,left:e.left,top:e.top};try{var i=this.model.adConfig.teaser,n=(this.model.adConfig.initialPosition.clip.match(/([0-9]|\.)+/g),i[i.width+"x"+i.height].collapsed.video),s={width:n.scaledWidth,height:n.scaledHeight,left:Number(this.config.initialPosition.left-this.config.expansionData.mainUnitClip.left)+n.x,top:Number(this.config.initialPosition.top-this.config.expansionData.mainUnitClip.top)+n.y}}catch(o){var s=this.model.getDimensions("initialVideo")}this.model.saveDimensions({collapsedTeaser:t}),this.model.saveDimensions({collapsedVideo:s})}},setPosterImageForSafari:function(){this.posterImageForSafari=document.getElementById("posterImage"),this.posterImageForSafari.style.display="block"},applyTeaser2VPMVideo:function(){this.teaserVideoTimeout||(this.teaserVideoTimeout=setTimeout(this.applyVPMVideo.bind(this),2e3))},applyVPMVideo:function(){this.model.isVideoDynamicStreaming()&&this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER&&("partial"!==this.adExperience.chunks||this.designerAPI.getUserClickStatus())&&this.video.fetchPendingChunks(),this.setPlayerVolume(.25),this.doNotRestartVideo||this.videoRestarted||(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.setPlayerTime(.1):this.setPlayerTime(0),this.videoRestarted=!0),this.resumePlayer()},applyPausedVideo:function(){this.pausePlayer()},pausePlayer:function(){CM.requireComponent("VideoPlayer").pausePlayer()},resumePlayer:function(){CM.requireComponent("VideoPlayer").resumePlayer()},setPlayerVolume:function(e){CM.requireComponent("VideoPlayer").setVolume(e)},setPlayerTime:function(e){CM.requireComponent("VideoPlayer").setTime(e)},getCurrentVideoSourceId:function(){return CM.requireComponent("VideoPlayer").getVideoSourceId()},applyTeaserState:function(){this.close.hide(),this.canvasAction("show"),this.model.setCurrentState(this.model.CONST.AD_STATE_TEASER),this.firePixel(this.config.teaser.trackers.phaze.teaser_loading_loaded),this.video.showControls(!1),this.videoWasPlaying=!0,this.firePixel(this.config.teaser.trackers.impression.imp)},onTeaserMouseOver:function(){this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.peel.exitTeaserAnimation(),this.currentEvent=["timecomplete"],this.transitionEvent=["mouseover"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.teaser2VPM.call(this.helper,!1),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!0}))},onCollapsedTeaserMouseOver:function(){"rectangularClose_mouseout"!==this.model.getPreviousEvent()&&(this.peel.exitTeaserAnimation(),this.currentEvent=["timecomplete"],this.transitionEvent=["mouseover"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.collapsed2VPM.call(this.helper))},onRectangleClose:function(){this.adUnitClicked=!0,this.model.setCurrentEvent("rectangularClose_"+this.events.RECTANGLECLICK.getEventName()),this.checkForRectangleClose()&&(this.currentEvent=["transitioncomplete"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION_FAST),this.model.getCurrentState()===this.model.CONST.AD_STATE_PAUSED_TEASER?(this.transitionEvent=["closead"],this.helper.transitions.pausedTeaser2pausedCollapsed.call(this.helper)):(this.render.showWrapperContainer(),this.transitionEvent=["closead"],this.helper.transitions.teaser2Collapsed.call(this.helper)),this.teaserCollapsed=!0)},onRectangleCloseHover:function(e){this.model.setCurrentEvent("rectangularClose_"+this.events.RECTANGLEHOVER.getEventName())},onRectangleCloseOut:function(e){this.model.setCurrentEvent("rectangularClose_"+this.events.RECTANGLEOUT.getEventName())},onReplayClick:function(){this.hideCustomPosterImage(),this.adUnitClicked=!0,this.video.showReplayIcon(!1),this.communicateToPublisher(this.Messages.IFRAMERESIZECLICK.eventName,{}),this.model.setCurrentEvent("replay_"+this.events.REPLAYCLICK.getEventName()),this.doNotRestartVideo=!1,this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.peel.hide(),setTimeout(function(){this.handleReplayClick()}.bind(this),50)},handleReplayClick:function(){this.model.getCurrentState()===this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER?(this.transitionEvent=["click"],this.helper.transitions.collapsed2VPM.call(this.helper,!0)):(this.transitionEvent=["click"],this.helper.transitions.teaser2VPM.call(this.helper,!0)),this.applyVPMVideo()},onCircularClick:function(){var e=document.getElementsByTagName("rm_close")[0];e.style.display="none",this.close.hide(),this.peel.pause(),this.model.setCurrentEvent("circular_"+this.events.CIRCULARCLICK.getEventName()),this.currentEvent=["closebtnclick"],clearTimeout(this.clearTimmer),this.clearTimmer="",this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.VPM2TeaserFast.call(this.helper),this.video.removeDataAttribute("vpm"),this.video.hideControls(),this.video.showReplayIcon(!1)},onCircularClickMainUnit:function(){if(this.vizuCloseWidget(),this.model.getCurrentState()===this.model.CONST.AD_STATE_VPM)return void this.onCircularClick();var e=(document.getElementById("rm-main-unit"),document.getElementsByTagName("rm_close")[0]);this.VPMFastCLick=!1,e.style.display="none",this.close.hide(),this.video.hideControls(),this.video.showReplayIcon(!1),this.sandBox.baseEventManager._data("close.mainunit").handlers.length?this.sandBox.baseEventManager.fire("close.mainunit",this.mainunitCloseCB):this.mainunitCloseCB()},mainunitCloseCB:function(){var e,t=document.querySelector(this.sandBox.adContainerId),i=document.getElementById("rm-main-unit");t=t||document.body,i.style.opacity=0,e=document.getElementsByTagName("rm_video")[0],t.appendChild(e),document.querySelector("#appsnack_innerContainer_"+this.sandBox.id).style.display="block",this.peel.pause(),this.model.setCurrentEvent("circular_"+this.events.CIRCULARCLICK.getEventName()),this.currentEvent=["closebtnclick"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),clearTimeout(this.clearTimmer),this.clearTimmer="",this.hideMainUnit(),this.helper.transitions.MainUnit2TeaserFast.call(this.helper),this.video.hideHandCursor(),this.video.setPosterImage(),this.video.removeDataAttribute("mainUnit"),this.canvasAction("renderPosterImage")},vizuCloseWidget:function(){var e;this.VizuWidget.isVizu&&(this.VizuWidget.closeWidget(),e=document.getElementsByTagName("rm_wrapper_close")[0],e.style.display="none")},onCircularHover:function(e){var t=this.model.getCurrentState(),i=this.video.checkPauseStatus();t!==this.model.CONST.AD_STATE_VPM&&t!==this.model.CONST.AD_STATE_MAINUNIT||this.VizuWidget.isVizu&&(this.VizuWidget.displayWidget(),i||(this.pausePlayer(),this.VizuWidget.add("resumeVideo",this.resumeVideo.bind(this))))},resumeVideo:function(e){this.VizuWidget.remove("resumeVideo"),this.resumePlayer()},fireVizuPixel:function(e){var t,i=this.VizuWidget.getVizuPixel(),n={};n.trackers=[],t={type:"img",src:i},n.pixelUrl=i,n.trackers.push(t),this.tracker.firePixels(n)},pixelHack:function(e){for(var t=e,i=[],n=0;n<t.length;n++)i[n]=t[n];return i},onVPMTOCollapsedCircularClick:function(){this.helper.transitions.VPM2Collapsed.call(this.helper)},onTeaser2VPMClick:function(){this.loadOriginalCss=!0,this.designerAPI.setUserClickStatus(!0),this.adUnitClicked=!0,this.doNotRestartVideo||this.videoRestarted||(this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?this.setPlayerTime(.1):this.setPlayerTime(0),this.videoRestarted=!0),this.resumePlayer(),this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.peel.hide(),this.currentEvent=["closebtnclick"],this.transitionEvent=["click"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION_FAST),this.sandBox.sniffer.isSafari()&&this.model.isVideoDynamicStreaming()?setTimeout(function(){this.helper.transitions.teaser2VPM.call(this.helper,!0)}.bind(this),300):this.helper.transitions.teaser2VPM.call(this.helper,!0))},onCollapsedTeaser2VPMClick:function(){this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.peel.hide(),this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION_FAST),this.transitionEvent=["click"],this.helper.transitions.collapsed2VPM.call(this.helper,!0))},onTeaserMouseOut:function(){this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&"TEASER_click"!==this.model.getPreviousEvent()&&(this.transitionEvent=["mouseout"],this.vpmStateReached||(this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.VPM2Teaser.call(this.helper)),this.communicateToPublisher(this.Messages.SETHIGHZINDEXTOCONTAINER.eventName,{setHigh:!1}))},onCollapsedTeaserMouseOut:function(){this.render.hideWrapperContainer(),this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.transitionEvent=["mouseout"],this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.helper.transitions.VPM2Collapsed.call(this.helper))},onVideoResume:function(){this.video.resumePlayer()},onVideoPause:function(){this.video.pausePlayer()},isInView:function(e){if(this.model.getCurrentState()==this.model.CONST.AD_STATE_TEASER&&this.addVideoSrcInViewPort(e),isNaN(e))return void(e?this.video.resumePlayer():this.video.pausePlayer());if("CPV"!==this.model.getEngagementType())return e&&this.video.getVideoTag().paused&&(this.model.getCurrentState()==this.model.CONST.AD_STATE_MAINUNIT||this.model.getCurrentState()==this.model.CONST.AD_STATE_VPM)&&(this.video.pausePlayer(),this.video.showReplayIcon(!0)),void(!e||this.model.getCurrentState()!=this.model.CONST.AD_STATE_TEASER&&this.model.getCurrentState()!=this.model.CONST.AD_STATE_COLLAPSED_TEASER?this.model.getCurrentState()!=this.model.CONST.AD_STATE_TEASER&&this.model.getCurrentState()!=this.model.CONST.AD_STATE_COLLAPSED_TEASER||"hidden"!==document.visibilityState||this.video.pausePlayer():this.video.resumePlayer());var i=this.model.getCurrentState()===this.model.CONST.AD_STATE_TEASER||this.model.getCurrentState()===this.model.CONST.AD_STATE_PAUSED_TEASER||this.model.getCurrentState()===this.model.CONST.AD_STATE_COLLAPSED_TEASER||this.model.getCurrentState()===this.model.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER?e>=this.config.playVideoInPctView:"hidden"!==document.visibilityState;switch(void 0==this.videoWasPlaying||i==this.videoWasPlaying||this.model.getCurrentState()!==this.model.CONST.AD_STATE_TEASER&&this.model.getCurrentState()!==this.model.CONST.AD_STATE_COLLAPSED_TEASER||(i?(this.onVideoResume(),this.inviewTimeArrayComplete&&this.startInviewTD()):(this.inviewTimeArrayComplete&&this.pauseInviewTd(),this.onVideoPause()),this.videoWasPlaying=i),i!=this.model.getIsInView()&&(this.checkForCPVEngType()&&this.handleTimerLogic(i),t.EventManager.fire("visibilityChanged",i)),this.model.getCurrentState()!==this.model.CONST.AD_STATE_PAUSED_TEASER&&(this.fireInviewPixels(i),this.resetTdValue(i)),this.handleVisibilityChange(i),this.model.setIsInView(i),this.model.setInFocus(i),this.fireCustomPixel("detectfocus",!0),this.handleEngagement(),this.model.getCurrentState()){case this.model.CONST.AD_STATE_MAINUNIT:i?this.handleVisibilityChange(i):this.video.pausePlayer();break;case this.model.CONST.AD_STATE_TEASER:case this.model.CONST.AD_STATE_VPM:if(this.videoInView===!1)return;this.handleVisibilityChange(i)}},videoClickOnMainUnit:function(){var e,t=this.checkForVideoClickUrl(),i=this.video.getVideoSourceId();t&&(this.videoPixels[i]||(this.videoPixels[i]=n.extend({},this.model.adConfig.fullscreen.trackers.videos.trackers.click||null)),e=this.videoPixels[i],t.toLowerCase().indexOf("replacethisurl.com")==-1&&(e&&(e.custom1=this.config.fullscreen.trackers.videos[i].custom1||e.custom1||i,this.firePixel(e)),this.pausePlayer(),window.open(t,"_blank"))),this.loadOriginalCss=!0,this.designerAPI.setUserClickStatus(!0)},checkForVideoClickUrl:function(){var e=this.video.getVideoLandingURL();if(e)return!(!e||!n.isString(e)||""===e.trim())&&e},lazyAssetLoader:function(e){var t={baseUrl:this.model.getMuseLocation(),query:{img:"img[data-expo-src]:not([data-priority*=VDXPriorityContainer])"}},i=new this.AssetsLoader(t);i.once("loaded",function(){e.call(this)}),i.load()},museAssetLoader:function(e){if(this.assetsloader)this.assetsloader.load();else{var t={baseUrl:this.model.getMuseLocation(),query:{js:'script[type="text/xjavascript"]',link:'link[rel="xstylesheet"]',img:"img[data-expo-src]"}},i=function(){$(document).ready(function(){this.model.getCurrentState()===this.model.CONST.AD_STATE_VPM&&e(!0)}.bind(this)),$("html").css({height:"100%",overflow:"visible"})}.bind(this);this.assetsloader=new this.AssetsLoader(t),this.assetsloader.add("loaded",i),this.assetsloader.once("loaded",function(){var e,t;try{e=new Event("load"),t=new Event("DOMContentLoaded")}catch(i){e=document.createEvent("Event"),e.initEvent("load",!0,!0),t=document.createEvent("Event"),t.initEvent("DOMContentLoaded",!0,!0)}window.dispatchEvent(e),document.dispatchEvent(t)}.bind(this)),this.assetsloader.load()}},replacePriorityTitles:function(){var e,t=[],i=document.querySelectorAll("div[title*=VDXPriorityContainer],img[title*=VDXPriorityContainer]");i=Array.prototype.slice.call(i),i.forEach(function(i){i.getAttribute("title")&&(e=i.getAttribute("title").split(" "),t=[],e=e.filter(function(e){return!(e.indexOf("VDXPriorityContainer")>-1)||(t.push(e),!1)}),i.setAttribute("title",e.join(" ")),i.setAttribute("data-priority",t.join(" ")))})},applyMainUnit:function(e){var t=(document.getElementsByTagName("rm_video")[0],document.getElementById("rm-main-unit"));if(this.VPMFastCLick=e,this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION&&this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST){e&&(clearTimeout(this.clearTimmer),this.clearTimmer="");var i=function(e){this.muse_assetLoaded=e,console.log("Asset loaded ",Date.now()),this.clearTimmer||n.call(this);var t=document.querySelectorAll("iframe[data-expo-src] , iframe[id*=animation]");t=Array.prototype.slice.call(t),t.forEach(function(e){e.setAttribute("src",e.dataset.expoSrc)})};setTimeout(function(){this.replacePriorityTitles(),this.museAssetLoader(i.bind(this),e)}.bind(this),0),t.addEventListener("click",function(){this.loadOriginalCss=!0,this.designerAPI.setUserClickStatus(!0),this.loadOriginalCssFile()}.bind(this));var n=function(){var e;if(!this.getScreenType()){s||(clearTimeout(this.clearTimmer),this.clearTimmer="");var i,n,s=(document.getElementsByTagName("rm_video")[0],this.VPMFastCLick);this.muse_assetLoaded&&this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION&&this.model.getIntermediateState()!==this.model.CONST.PHAZE_TRANSITION_FAST&&(this.model.getCurrentState()!==this.model.CONST.AD_STATE_VPM&&this.model.getCurrentState()===this.model.CONST.AD_STATE_MAINUNIT||(document.querySelector("#appsnack_innerContainer_"+this.sandBox.id).style.display="none",this.model.setIntermediateState(this.model.CONST.PHAZE_TRANSITION),this.update(this,"vpm-to-mainunit"),n=document.getElementsByTagName("rm_close")[0],n.style.display="block",this.VizuWidget.isVizu&&(e=document.getElementsByTagName("rm_wrapper_close")[0],e.style.display="block"),s?(this.transitionEvent=["click"],i=this.config.fullscreen.trackers.phaze.transition_vpm_click,i&&this.firePixel(i)):(this.currentEvent=["timecomplete"],i=this.config.fullscreen.trackers.phaze.transition_vpm_timecomplete,i&&this.firePixel(i)),this.communicateToPublisher(this.Messages.MAINUNITBACKGROUNDDIV.eventName,{action:!0}),t.style.opacity=1,t.style.width=this.model.adConfig.fullscreen.width+"px",t.style.height=this.model.adConfig.fullscreen.height+"px",t.style.overflow="hidden",this.VPMFastCLick=!1,this.videoAnimation()))}},s=setTimeout(n.bind(this),e?0:this.model.adConfig.Core.states[this.model.CONST.AD_STATE_VPM].delayTime);return s}},showMainUnit:function(){this.mainunitLoadStarted=!0;var e=document.getElementById("rm-main-unit"),t=Array.prototype.slice.call(e.querySelectorAll(".rm-display-none"));t.forEach(function(e){e.classList.remove("rm-display-none")}),this.model.setIntermediateState(),this.model.setCurrentState(this.model.CONST.AD_STATE_MAINUNIT),this.handleVideoFullScreen(),this.update(this,this.model.CONST.AD_STATE_MAINUNIT),this.video.showControls(!0),this.checkForLandingPage(),this.video.addDataAttribute("mainUnit"),this.communicateToPublisher(this.Messages.CHANGEWRAPPERDISPLAY.eventName,{visibility:"hidden"})},handleVideoFullScreen:function(){setTimeout(function(){this.getScreenType()||this.model.getCurrentState()!==this.model.CONST.AD_STATE_MAINUNIT||this.communicateToPublisher(this.Messages.MAINUNITBACKGROUNDDIV.eventName,{action:!0})}.bind(this),500)},videoAnimation:function(){var e,t,i,n={},s={};i=document.getElementById("rm_video_framework_ref").getBoundingClientRect(),t=this.video.getSize(),s={},s.width=i.width,s.height=i.height,s.left=i.left,s.top=i.top,n.source=t,n.destination=s,n.duration=this.model.stateTransitionTimes.vpm2MainUnit,n.onUpdate=this.videoAnimationUpdate(this),n.onComplete=this.mainUnitVideoAnimationEnd.bind(this),this.helper.animationClip=!1,e=this.helper.createTween(n),e.start(),this.helper.animateClip()},videoAnimationUpdate:function(e){return function(){e.video.resizePlayer(this)}},applySafariHackPlay:function(){var e=this.video.getVideoTag(),t=e.currentTime;e.muted=!0,e.muted=!1,e.volume=0;var i=e.play();i&&i["catch"](function(e){}),setTimeout(function(){e.volume=.25,setTimeout(function(){e.currentTime=t;var i=e.play();i&&i["catch"](function(e){})},50)},300)},mainUnitVideoAnimationEnd:function(){var e,i,n,s=document.getElementsByTagName("rm_video")[0];if(!this.loadOriginalCss&&this.model.getTurnOffAutoSwitchFlag()||this.loadOriginalCssFile(),n=this.video.checkPauseStatus(),this.showMainUnit(),e=document.getElementById("rm_video_framework_ref"),e.appendChild(s),n||this.video.resumePlayer(),e.parentNode.style.zIndex="9999",i={top:0,left:0},this.video.resizePlayer(i),setTimeout(function(){this.resumePlayer()}.bind(this),0),console.log("Main unit loaded ",Date.now()),this.designerAPI&&this.designerAPI.getCallBackApi){var o=this.designerAPI.getCallBackApi().mainUnitLoaded;o&&o.call(this.designerAPI)}this.sandBox.baseEventManager.fire(this.Messages.MAINUNITLOAD.eventName,!0),this.communicateToPublisher(this.Messages.MAINUNITLOAD.eventName,!0),t.EventManager.fire("VDX_Mainunit_Shown")},hideMainUnit:function(){var e=document.getElementById("rm-main-unit"),t=document.getElementsByTagName("rm_video")[0];e.style.width=this.model.adConfig.fullscreen.width+"px",e.style.height=this.model.adConfig.fullscreen.height+"px",e.style.overflow="",e.style.left="0%",e.style.top="0%",t.style.width="100%",t.style.height="100%",this.communicateToPublisher(this.Messages.MAINUNITHIDE.eventName,!0)},fireBillablePixels:function(){var e=this.config.fullscreen.trackers.billable;e&&this.firePixel(e),e=null,this.engagementFired=!0},setPercentage:function(){var e,t,i,s=document.getElementById("rm-main-unit");e=n.getViewportwidth(),t=n.getViewportHeight(),e<this.model.adConfig.fullscreen.width&&(i=this.model.adConfig.initialPosition.left-this.model.adConfig.adPositon.x,s.style.width=e+"px",s.style.left=i+"px"),t<this.model.adConfig.fullscreen.height&&console.log("height not handled ")},loadOriginalCssFile:function(){this.originalCssLoaded||this.lazyAssetLoader(function(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=this.model.adConfig.museUrl+"css/index-original.css",this.originalCssLoaded=!0,document.getElementsByTagName("head")[0].appendChild(e)}.bind(this))}});i.Controller=i.Controller||s}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.BaseModel.extend({init:function(e){this.adConfig={},this.CONST={AD_STATE_TEASER:"TEASER",AD_STATE_VPM:"VPM",AD_STATE_MAINUNIT:"MAINUNIT",AD_STATE_COLLAPSED_TEASER:"COLLAPSED-TEASER",AD_STATE_COLLAPSED_PAUSED_TEASER:"PAUSED-COLLAPSED-TEASER",AD_STATE_PAUSED_TEASER:"PAUSED-TEASER",PHAZE_TRANSITION:"transition",PHAZE_TRANSITION_FAST:"transitionFast",PHAZE_STATIC:"static",TRIGGER_TRANSITION_COMPLETE:"transitionComplete",TRIGGER_MOUSEOVER:"mouseover",TRIGGER_MOUSEOUT:"mouseout",TRIGGER_CLICK:"click",TRIGGER_LOADED:"loaded",TRIGGER_TIME_COMPLETE:"timecomplete",TRIGGER_CLOSE:"close"},this.adUnitStates={},this.currentState="",this.previousState="",this.currentEvent="",this.previousEvent="",this.AdDimension="",this.intermediateState="",this.isInview=!1,this.inviewStartTime=0,this.totalTd=0,this.cookData(e),this.cookMediaConfig();var t=this.getAdExperience();t&&t.videodurationtoplay&&(this.adConfig.videoLoopDuration=t.videodurationtoplay)},getTurnOffAutoSwitchFlag:function(){return this.adConfig.isturnoffautoswitch},cookMediaConfig:function(){var e=this.adConfig.mediaconfig;e&&e.mediatokenconfig&&(this.adConfig.mediaconfig=e.mediatokenconfig)},getMediaConfigData:function(){return this.adConfig.mediaconfig},parse:function(e){return e},setInviewStartTime:function(e){this.inviewStartTime=e},getInviewStartTime:function(){return this.inviewStartTime},setTotalTd:function(e){this.totalTd=e},getTotalTd:function(){return this.totalTd},getAssetLocation:function(){return this.adConfig.location},getDynamicData:function(){return this.adConfig.dynamicData},getCommonAssetLocation:function(){return this.adConfig.assetUrl},getMuseLocation:function(){return this.adConfig.museUrl},getCurrentState:function(){return this.currentState},getIntermediateState:function(){return this.intermediateState},setIntermediateState:function(e){this.intermediateState=e},setCurrentEvent:function(e){this.currentEvent&&this.setPreviousEvent(this.currentEvent),this.currentEvent=e},getCurrentEvent:function(){return this.currentEvent},getPreviousEvent:function(){return this.previousEvent},setPreviousEvent:function(e){this.previousEvent=e},getInFocus:function(){return this.infocus},setInFocus:function(e){this.infocus=e},setCurrentState:function(e){this.currentState&&this.setPreviousState(this.currentState),this.currentState=e},getPreviousState:function(){return this.previousState},setPreviousState:function(e){this.previousState=e},saveDimensions:function(e){this.dimensions||(this.dimensions={});for(var t in e)this.dimensions[t]=e[t]},getTagHeight:function(){return this.adConfig.mediaHeight},getTagWidth:function(){return this.adConfig.mediaWidth},cookData:function(e){for(var t in e)this.adConfig[t]=e[t];this.adConfig.Core=EXPO_CREATIVE_CONFIG_JSON.Core,this.adConfig.Localization=EXPO_CREATIVE_CONFIG_JSON.Localization},getTransitionTimes:function(){if(this.stateTransitionTimes)return this.stateTransitionTimes;var e={},t=i.ConfigModel.getConfigById("Core").transitions;for(var n in t)e[n]=t[n].duration;return this.stateTransitionTimes=e,e},getTextDirection:function(){return this.adConfig.Localization.locales[this.getLocale()].direction},getTextTranslation:function(e){return this.adConfig.Localization.translations[this.getLocale()][e]},getDimensions:function(e){try{if(!this.dimensions[e])return}catch(t){return}return this.dimensions[e]},updateCurrentVideo:function(e){this.currentVideo&&(this.previousVideo=this.currentVideo),this.currentVideo=e,this.currentVideo.currentTime=-1},updateCurrentVideoTime:function(e){this.currentVideo&&(this.currentVideo.currentTime=e)},getPreviousVideo:function(){return this.previousVideo?this.previousVideo:null},getCurrentVideo:function(){return this.currentVideo?this.currentVideo:null},mergeModelInfo:function(e,i){var n={};return t.utility.extend(n,i),t.utility.extend(n,e),n},getConfigInJSON:function(){return JSON.stringify(this.adConfig)},getVideoPlayerConfig:function(e,t){var i=this.getDimensions("initialVideo"),n=(this.adConfig.teaser[this.getAdDimension().dimension].standard,this.getAssetLocation(),!1);return null!=this.adConfig.templateJson&&(n=!0),i.videos=t&&t.videos||null,i.mediaID=this.adConfig.mediaID,i.trackers=this.adConfig.teaser.trackers.indexedDB,i.prop={videoID:"videoID",autoplay:!0,isMuted:!0,loop:!0,controlTimeOut:3e3,inInview:this.isInview,unmuteIcon:this.getCommonAssetLocation()+"/animatedMuteIcon.png",controlBarFontConfig:{fontName:"icomoon",fontBaseLoc:this.getCommonAssetLocation(),files:{eot:"icomoon.eot",ttf:"icomoon.ttf",woff:"icomoon.woff",svg:"iconmoon.svg"},versionStr:"po37ye"}},i.museLocation=this.getMuseLocation(),i.isVideoDynamicStreaming=this.adConfig.isVideoDynamicStreaming,i.loopDuration=this.adConfig.videoLoopDuration,i.fromVdxStudio=n,"init"==e?i:t},getPeelConfig:function(){var e,t={explore:"Explore","click-to-explore":"Click to explore","rollover-to-explore":"Rollover to explore","click-to-replay":"Click to replay"};t=this.cookDataForLang(t);var i=this.getAdExperience();return i&&"click"===i.interaction&&(t["rollover-to-explore"]=t["click-to-explore"]),e={dimension:this.getAdDimension(),languageStr:t,branding:this.getBrandingText(),location:this.getCommonAssetLocation(),logo:this.adConfig.teaser.logo.indexOf("//")==-1?this.getAssetLocation()+this.adConfig.teaser.logo:this.adConfig.teaser.logo,cssText:this.adConfig.teaser.cssText||"",duration:this.adConfig.peelBrandingDuration||0,dynamicPeelConfig:this.getDynamicPeelConfig(),dynamicPeelData:this.getDynamicPeelData()}},getDynamicPeelConfig:function(){return this.adConfig.widzardConfig.teaser.dynamicPeelConfig},getDynamicPeelData:function(){var e=this.adConfig.dynamicData,i=null;return e&&e.rawData&&t.utility.isObject(this.adConfig.dynamicData.rawData)&&(i=e.rawData),i},isVideoDynamicStreaming:function(){return this.adConfig.isVideoDynamicStreaming},cookDataForLang:function(e){return Object.keys(e).forEach(function(t){this.getTextTranslation(t)&&(e[t]=this.getTextTranslation(t))}.bind(this)),e},getTeaserTrackers:function(){var e={};return this.adConfig?this.adConfig.teaser["default"].trackers:e},getTeaserConfig:function(){return this.adConfig},getLocale:function(){return this.adConfig.locale},getBrandingText:function(){var e=this.adConfig.branding;return"default"===e&&(e="vdx.tv"),e},getCloseConfig:function(){var e={},t={display:"none",position:"absolute",top:10,right:10,"z-index":10};return e.src=this.adConfig.fullscreen.closeBtnImg.src,e.style=t,e.className="closeContainer",e},getRectangCloseConfig:function(){var e={},t={close:"Close"},i={display:"none","z-index":3001,position:"absolute",top:"10px",right:"10px",width:"45px",height:"16px",backgroundColor:"#333333",color:"white",fontSize:"11px",fontStyle:"bold",textAlign:"center",border:"1px solid white",paddingTop:"2px",opacity:".7"};return t=this.cookDataForLang(t),e.style=i,e.className="rm-rectangCloseContainer",e.src="CLOSE",e.languageStr=t,e},getVizuWidgetConfig:function(){var e={};return e.wrapper={id:"rm-vizuwidget_wrapper_container",classname:"rm-vizuwidget_wrapper_container"},e.innerContainer={id:"rm-vizuwidget_peel_container",classname:"rm-vizuwidget_peel_container",
displaywidget:"rm-expand_vizu_widget",removewidget:"rm-remove_vizu_widget",closewidget:"rm-close_vizu_widget",src:this.getCommonAssetLocation()+"/peelbg_vizu.png"},e.dimWrapper={classname:"rm-dim_wrapper",id:"rm-dim_wrapper_id",showClassname:"rm-dim_wrapper_show"},e.mainUnitDiv={id:"rm-main-unit"},e.iframeWrapper={id:"iframediv",classname:"rm-vizuwidget_Iframe_show"},e},getReplayConfig:function(){var e={},t={replay:"Replay"},i={display:"none","z-index":3e3,position:"absolute",margin:"auto",top:0,left:0,right:0,bottom:0};return e.className="replay",e.style=i,e.src=this.getCommonAssetLocation()+"/replay.png",t=this.cookDataForLang(t),e.languageStr=t,e},getPlayWrapperConfig:function(){var e={};return e.style={width:"510px",height:"27px",position:"absolute",bottom:"6px","z-index":"10",left:"53px",display:"none"},e.className="playWrapper",e},setAdDimension:function(e){this.AdDimension=e},getAdDimension:function(){return{dimension:this.AdDimension}},getIsInView:function(){return this.isInview},setIsInView:function(e){this.isInview=e},getVideoReportingEnabled:function(){return this.adConfig.videoReportingPixelsEnabled},getCanvasConfig:function(){var e=this.getDimensions("initialVideo");return e},getMainUnit_client_logo:function(){var e=this.adConfig.mainunit.panels[0].logo,i={src:this.getAssetLocation()+e.src,landingurl:e.landingurl,style:e.style?t.utility.ObjToStyleString(e.style):""};return i},getMainUnit_cta:function(){var e=this.adConfig.mainunit.panels[0].CTA,t={text:e.text,style:e.style,fontStyle:{max:12,min:10},"white-space":"nowrap"};return t},getMainUnit_tag_line:function(){var e=this.adConfig.mainunit.panels[0].tagLine,t={text:e.text?e.text:"",style:e.style,fontStyle:{max:17,min:11}};return t},getMainUnit_close:function(){var e={close:this.adConfig.fullscreen.closeBtnImg.src};return e},getCustomPixel:function(e){return this.adConfig?this.adConfig.customPixel[e]:""},getInviewPixelTimer:function(){return this.adConfig.inviewPixelTimer},getMainUnit_brand:function(){var e={brand:"vdx.tv"};return e},getEngagementType:function(){return this.adConfig.engagementType||"CPM"},getAdExperience:function(){var e=this.adConfig.mediaconfig;return e?e.adExperience:{}}});e.EXPO_CREATIVE.Model=e.EXPO_CREATIVE.Model||n}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n=t.BaseModel.extend({init:function(e){this.configData={},this.cookData(e),this.excludeConfigs=["Core","Localization"]},parse:function(e){return e},cookData:function(e){for(var t in e)this.configData[t]=e[t]},getComponentsConfig:function(){var e={};for(var t in this.configData)this.excludeConfigs.indexOf(t)==-1&&(e[t]=this.configData[t]);return e},setConfigById:function(e,t,i){if(e&&t&&i)return void(this.configData[e][i]=t);if(!e||!t)throw"Insufficient/Invalid parameters";this.configData[e]=t},getConfigById:function(e,t){var i=t&&this.configData&&this.configData[e]&&this.configData[e][t]?this.configData[e][t]:this.configData[e];return i||{}}});i.ConfigModel=i.ConfigModel||new n(EXPO_CREATIVE_CONFIG_JSON)}(window,window.EU,window.EXPO_CREATIVE),function(e){"use strict";function t(){this.store={client_logo:[],tag_line:[],cta:[],close:[],brand:[]}}t.prototype={getDirectives:function(){return this.store}},e.DirectiveStore=new t}(window),function(e,t,i,n){"use strict";function s(e){var i=e.config.id,n=t.Enum({enumList:[{GETCREATIVECONFIG:{name:"getCreativeConfig"}},{CREATIVECONFIG:{name:"creativeConfig"}},{MAINUNITLOAD:{name:"mainUnitLoad"}},{ISINVIEW:{name:"isInView"}},{SENDTOCREATIVE:{name:"sendToCreative"}},{SENDTOPUBLISHER:{name:"sendToPublisher"}},{VIDEOPLAY:{name:"videoPlay"}},{VIDEOPLAY:{name:"videoPlay"}},{"GETID(true)":{name:"getId"}},{"SENDID(true)":{name:"sendId"}},{"CONFIGUREID(true)":{name:"configureId"}},{"CREATIVELOADED(true)":{name:"creativeLoaded"}},{"RENDERPROGRESSSTATUS(true)":{name:"renderProgressStatus"}},{GETPOSSIBLEEXPANSION:{name:"getPossibleExpansion"}},{SETPOSSIBLEEXPANSION:{name:"setPossibleExpansion"}},{SETEXPOCONTAINERCLIP:{name:"expandExpoContainer"}},{CREATIVEINTREACTION:{name:"creativeIntreaction"}},{HANDLETEASERINTERACTION:{name:"handleTeaserInteraction"}},{MAINUNITBACKGROUNDDIV:{name:"mainunitBackgroundDiv"}},{CHANGEWRAPPERDISPLAY:{name:"changeWrapperDisplay"}},{CHANGECLOSEDISPLAY:{name:"changeCloseDisplay"}},{SETHIGHZINDEXTOCONTAINER:{name:"setHighZIndexToContainer"}},{CHANGEIFRAMEDIMENSION:{name:"changeIframeDimension"}},{RESETIFRAMEDIMENSION:{name:"resetIframeDimension"}},{MAINUNITHIDE:{name:"mainUnitHide"}},{IFRAMERESIZECLICK:{name:"iframeResizeClick"}},{ISINVIEW:{name:"isInView"}},{INDEXEDDBEVENET:{name:"IndexedDBEvent"}}],constructor:function(e){this.eventName=e?this.name:this.name+"."+i},getEventName:function(){return this.eventName}});return n}var o="1.0.0";n&&n.registerPlugin("messages",s,o),i&&i.registerPlugin("messages",s,o)}(window,window.EU,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t){"use strict";var i="1.0.0";t.registerPlugin("domUtility",function(e){function t(){this.pfx=["webkit","moz","MS","o",""]}var i={ms:"ms",moz:"Moz",webkit:"Webkit"},n=t.prototype;return n.customEvent=function(e,t){function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}try{return new CustomEvent("test"),CustomEvent(e,t)}catch(n){}return i.prototype=window.Event.prototype,new i(e,t)},n.hasClass=function(e,t){return e.classList?e.classList.contains(t):-1<e.className.indexOf(t)},n.addClass=function(e,t){if(e.classList)return e.classList.add(t);if(!this.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}return e},n.removeClass=function(e,t){if(e.classList)return e.classList.remove(t);var i=e.className.split(" ");return i.push(t),e.className=i.join(" "),e},n.addPrefixedEventListener=function(e,t,i){var n=0;for(n=0;n<this.pfx.length;n++)this.pfx[n]||(t=t),e.addEventListener(this.pfx[n]+t,i,!1)},n.removePrefixedEventListener=function(e,t,i){for(var n=0;n<this.pfx.length;n++)this.pfx[n]||(t=t.toLowerCase()),e.removeEventListener(this.pfx[n]+t,i,!1)},n.show=function(e){e.style.display=""},n.hide=function(e){e.style.display="none"},n.vendorPrefix=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return i[(t||"").toLowerCase()]},n.addCssRules=function(e,t,i){var n=document.styleSheets[document.styleSheets.length-1];if(i)for(var s in document.styleSheets)if(document.styleSheets[s].href&&document.styleSheets[s].href.indexOf(i)>-1){n=document.styleSheets[s];break}if("undefined"==typeof n||null===n){var o=document.createElement("style");o.type="text/css",document.head.appendChild(o),n=o.sheet}if(n)if(n.insertRule){var r=e+"{"+t+"}";n.insertRule(r,n.cssRules?n.cssRules.length:0)}else n.addRule&&n.addRule(e,t)},n.isWebkitBrowser=function(){return/WebKit/.test(navigator.userAgent)},n.attachEvent=function(e,t,i){e.addEventListener(t,i,!1)},n.detachEvent=function(e,t,i){e.removeEventListener("type",i,!1)},n.injectFont=function(e,t){var i={eot:"embedded-opentype",woff:"woff",ttf:"truetype",svg:"svg"},n=[],s="@font-face {\n",o=e.fontBaseLoc;s=s+"font-family:'"+e.fontName+"';\n";for(var r=e.files,a=Object.keys(r),l=0;l<a.length;l++){var c="";c=0===l?c+"src:":"";var d="url('"+o+r[a[l]]+"?"+e.versionStr;c=0===l?c+d+"');\nsrc:"+d+"#iefix')":c+d+"')",c=c+" format('"+i[a[l]]+"')",n.push(c)}s+=n.join(",\n"),s+=";\nfont-weight: normal;\nfont-style: normal; \n}";var u=document.createElement("style");u.type="text/css",u.styleSheet?u.styleSheet.cssText=s:u.appendChild(document.createTextNode(s)),document.getElementsByTagName("head")[0].appendChild(u)},n.calculateFontSize=function(e,t,i,n){var s=document.createElement("span");s.id="dummyid",s.style.opacity="0";var o=document.createTextNode(e);for(document.body.appendChild(s),s.appendChild(o);s.offsetWidth>t&&(i--,s.style.fontSize=i+"px",i!==n););return document.body.removeChild(s),i},new t},i)}(window,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("templateEngine",function(e){var t={},i=EU.CreateClass({constructor:function(){},tmpl:function n(e,i){var s=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):t[e]=t[e]||n(document.getElementById(e).innerHTML);return i?s(i):s}});return new i},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";function n(e){var t=(navigator.userAgent,EU.CreateClass({deviceInfo:{},constructor:function(){this.UAParser=new UAParser,this.setParsedUA(),this.parsedUA,this.setDeviceInfo()},setDeviceInfo:function(){var e={},t=navigator.userAgent;e.deviceType=this.isTablet(t)||this.checkIsMobile(t)||this.isDesktop(t)||"unknown",e.osName=this.getOsInfo(t,e.deviceType),e.name=this.getDeviceName(t),e.browserName=this.getBrowserName(t),e.browserVersion=this.getBrowserVersion(t),e.isIEEdge=this.isIEEdge(t),e.isChrome=this.isChrome(),e.isSafari=this.isSafari(),e.isIE=this.isIE(),this.deviceInfo=e},isTablet:function(e){var e=e.toLowerCase(),t=!!(e.match(/ipad/)||e.match(/tablet/)||e.match(/linux/)&&e.match(/android/)&&!e.match(/mobile/)||e.match(/kindle/)||e.match(/kfot/)||e.match(/silk/))&&"tablet";return t},isDesktop:function(e){var t=!!(e.match(/Windows.(NT|XP|ME|9)/)&&!e.match(/Phone/i)||e.match(/Win(9|.9|NT)/i)||e.match(/Macintosh|PowerPC/i)&&!e.match(/Silk/i)||e.match(/Linux/i)&&e.match(/X11/i)||e.match(/Solaris|SunOS|BSD/i))&&"desktop";return t},getBrowserName:function(e){return e.match(/Trident/i)&&e.match(/Trident/i)[0]||e.match(/Edge/i)&&e.match(/Edge/i)[0]?"ie":"unknown"},isChrome:function(){return"chrome"===this.parsedUA.browser.name.toLowerCase()},isSafari:function(){return"safari"===this.parsedUA.browser.name.toLowerCase()},isSafariGreaThanEqualTo11:function(){return"safari"===this.parsedUA.browser.name.toLowerCase()&&parseInt(this.parsedUA.browser.major)>=11},isIEEdgeGreaThanEqualTo15:function(){return"edge"===this.parsedUA.browser.name.toLowerCase()&&parseInt(this.parsedUA.browser.major)>=15},isIE:function(){return"ie"===this.parsedUA.browser.name.toLowerCase()||"edge"===this.parsedUA.browser.name.toLowerCase()},isIEEdge:function(e){return!(!e.match(/Edge/i)||!e.match(/Edge/i)[0])},isBrowserSupportMutedAutoplay:function(){return parseInt(this.getBrowserVersion(),10)>=66&&"Firefox"===this.getBrowserInfo()||parseInt(this.getBrowserVersion(),10)>=66&&"Chrome"===this.getBrowserInfo()||"Safari"===this.getBrowserInfo()},getDeviceInfo:function(){return this.deviceInfo},checkForSameOrign:function(){try{return top.location.href}catch(e){return!1}},getOsInfo:function(){var e="Unknown OS";return navigator.appVersion.indexOf("Win")!=-1&&(e="Windows"),navigator.appVersion.indexOf("Mac")!=-1&&(e="MacOS"),navigator.appVersion.indexOf("X11")!=-1&&(e="UNIX"),navigator.appVersion.indexOf("Linux")!=-1&&(e="Linux"),e},getDeviceName:function(e){var t=e.toLowerCase(),i={safari:"samsung tablet","mobile safari":"samsung mobile",ipod:"ipod",iphone:"iphone",ipad:"ipad","nexus 7":"nexus7",kfot:"kindle fire",htc_one_v:"htc one","nexus 10":"nexus10"},n=/mobile safari|safari|ipad|ipod|iphone|nexus 7|kfot|htc_one_v|nexus 10/;return i[t.match(n)]},getBrowserVersion:function(e){return this.parsedUA.browser.major},getBrowserFullVersion:function(e){return this.parsedUA.browser},getBrowserInfo:function(){var e="";return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?e="Opera":navigator.userAgent.indexOf("Chrome")!=-1?e="Chrome":navigator.userAgent.indexOf("Safari")!=-1?e="Safari":navigator.userAgent.indexOf("Firefox")!=-1?e="Firefox":navigator.userAgent.indexOf("MSIE")==-1&&1!=!!document.documentMode||(e="IE"),e},isMobile:function(){return this.deviceInfo.isMobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)},checkIsMobile:function(e){var e=e.toLowerCase(),t=e.indexOf("mobile")>0&&e.indexOf("ipad")==-1&&"mobile";return t},getParsedUA:function(){return this.parsedUA},setParsedUA:function(){this.parsedUA=this.UAParser.getResult()}}));return new t}var s="1.0.0";t&&t.registerPlugin("sniffer",n,s),i&&i.registerPlugin("sniffer",n,s)}(window,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t,i,n){"use strict";function s(e,i){function n(t){var n=function(i,n){function s(){document.hidden?n.call(this,0,!0):n.call(this,o,!0)}var o=0,l=null,c=0,u=!1,h={top:{inview:!0},center:{inview:!0},bottom:{inview:!0}},m=this,f=function(t){var i;i=(e.config.assetUrl||"")+"safariViewabilityTemplate.html",p(t,i,"top"),p(t,i,"center"),p(t,i,"bottom")},p=function(e,t,i){var n,s;switch(t=t+"?id="+i+"&rnd="+a,n=document.createElement("iframe"),n.id=i,n.setAttribute("frameBorder","0"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("scrolling","no"),n.setAttribute("hspace","0"),n.setAttribute("vspace","0"),n.setAttribute("src",t),n.setAttribute("allowfullscreen","true"),i){case"top":s="top:0px";break;case"center":s="top:50%;left:50%";break;case"bottom":s="bottom:0px;right:0px;"}n.style.cssText="position:absolute;width:1px;height:1px;"+s,e.appendChild(n)},g=function(e){var t=e.data;a===t.rnd&&"viewabilityChanged"===t.eventName&&(h[t.id].inview=t.inview,h.top.inview||h.bottom.inview||h.center.inview||(o=0),!h.top.inview&&!h.bottom.inview||h.center.inview||(o=1),(h.top.inview&&h.center.inview||h.bottom.inview&&h.center.inview)&&(o=50),h.top.inview&&h.center.inview&&h.bottom.inview&&(o=100),o!==l&&(u?(l=o,d(i,o)&&n.call(m,o)):(clearTimeout(c),c=setTimeout(function(){l=o,u=!0,d(i,o)&&n.call(m,o)}.bind(this),1e3))))};return f(t),r.addEventListener("message",g,!1),r.document.addEventListener("visibilitychange",s,!1),{stopTracking:function(){r.removeEventListener("message",g,!1)},stopHandlingVisibilityChange:function(){r.document.removeEventListener("visibilitychange",s,!1)}}},o=function(e,i){function n(){document.hidden?i.call(this,0,!0):i.call(this,a,!0)}var o=s.isArray(e)?e.map(function(e){return e/100}):[e/100],a=0,l={rootMargin:"0px",threshold:o},c=null;return"IntersectionObserver"in window?(c=new r.IntersectionObserver(function(e){e.forEach(function(e){a=100*e.intersectionRatio,i.call(this,a)})},l),c.observe(t),r.document.addEventListener("visibilitychange",n,!1),{stopTracking:function(){c.unobserve(t)},stopHandlingVisibilityChange:function(){r.document.removeEventListener("visibilitychange",n,!1)}}):(console.log("Intersection observer not supported"),i(!1))},l=function(e,i){function n(){document.hidden?T.stop(!0):T.start(!0)}var s=null,o=!0,l=null,u=null,h=null,m={offset:10,dispatched:null},f=function(){c()?(m.width=r.innerWidth,m.height=r.innerHeight):(p(t),m.width=parseInt(t.style.width,10),m.height=parseInt(t.style.height,10),l=document.getElementById("expo_point1"+a),u=document.getElementById("expo_point2"+a),h=document.getElementById("expo_point3"+a))},p=function(e){l=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),l.id="expo_point1"+a,u.id="expo_point2"+a,h.id="expo_point3"+a,l.style.cssText=u.style.cssText=h.style.cssText="position: absolute; width: 10px; height: 10px; opacity: 0; z-index: 100;",e.appendChild(l),e.appendChild(u),e.appendChild(h)},g=function(e,t){return r.document.elementFromPoint(e,t)},v=function(){return c()?E():C()},C=function(){var e=parseInt(m.width/2,10),t=null,i=null,n=null;return l.style.top=m.offset+"px",l.style.left=e+"px",u.style.left=e+"px",u.style.top=parseInt(m.height/2)+"px",h.style.left=e+"px",h.style.top=parseInt(m.height-m.offset)+"px",t=l.getBoundingClientRect(),i=u.getBoundingClientRect(),n=h.getBoundingClientRect(),{top:g(t.left,t.top),middle:g(i.left,i.top),bottom:g(n.left,n.top)}},E=function(){var e=parseInt(m.width/2,10);return{top:g(e,m.offset),middle:g(e,parseInt(m.height/2),10),bottom:g(e,parseInt(m.height-m.offset),10)}},y=function(t){var n=v(),r=0;!n.top&&!n.bottom||n.middle?n.top&&n.middle&&n.bottom?r=100:n.middle?r=50:n.top||n.middle||n.bottom||(r=0):r=1,null==s?(s=r,d(e,r)&&i.call(this,r,t)):s!==r&&(s=r,d(e,r)&&i.call(this,r,t)),o&&T.start()},T={id:!1,start:function(e){o=!0,this.id&&r.cancelAnimationFrame(this.id),this.id=r.requestAnimationFrame.call(r,y.bind(null,e))},stop:function(e){this.id&&r.cancelAnimationFrame(this.id),s=null,o=!1,i.call(this,0,e)}};return f(),T.start(),r.document.addEventListener("visibilitychange",n,!1),{stopHandlingVisibilityChange:function(){r.document.removeEventListener("visibilitychange",n,!1)},stopTracking:function(){T.stop()}}},c=function(){try{return window.self!==window.top}catch(e){return!0}},d=function(e,t){return s.isArray(e)?e.some(function(e){return t>=parseInt(e,10)}):t>=parseInt(e,10)};this.track=function(e,t){if(!t)throw new Error("Start callback is not defined");if(!e)throw new Error("inViewPercentages is not defined");return i.deviceInfo.isSafari?n.call(this,e,t.bind(this)):i.deviceInfo.isIE&&!i.isIEEdgeGreaThanEqualTo15()?l.call(this,e,t.bind(this)):o.call(this,e,t.bind(this))}}var s=t.utility,o={},r=s.getWindowContext(),a=e.config.id,l=t.CreateClass({subscribeElem:function(e,t,i,s){var r=new n(e);o[t+a]=r.track(i,s)},unsubscribeElem:function(e){var t=e+a;o[t]&&(o[t].stopTracking(),o[t].stopHandlingVisibilityChange(),delete o[t])},getElementsInViewport:function(e,t){function i(t,n){var s=t.getBoundingClientRect();s.bottom<=a&&s.top>=0&&(o.push(t.id),t[n]&&t[n].className===e&&i(t[n],n))}var n=s.getWindowContext(),o=[],t=t||n,r=t.innerWidth,a=t.innerHeight,l=document.elementFromPoint(r/2,a/2);return i(l,"nextElementSibling"),i(l.previousElementSibling,"previousElementSibling"),o},isElemInView:function(e,t){t=void 0===t?0:t;var i=e.getBoundingClientRect(),n=100-t;return i.top>=-(n/100*i.height)&&i.left>=-(n/100*i.width)&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)+n/100*i.height&&i.right<=(window.innerWidth||document.documentElement.clientWidth)+n/100*i.width}});return new l}var o="1.0.0";i&&i.registerPlugin("InView",["sniffer"],s,o),n&&n.registerPlugin("InView",["sniffer"],s,o)}(window,window.EU,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t,i){"use strict";function n(e){var t='video/mp4; codecs="avc1.64001f,mp4a.40.02"',i=null,n=null,s=null,o=null,r=0,a=0,l=[],c=0,d=!1,u=null,h=!1,m="",f=EU.CreateClass({init:function(e,t){i=this,i.resetFlags(),r=e.loopDuration,m=e.fromVdxStudio?e.assetLocation:e.assetLocation+"assets/",u=t,h||(h=!0,i.fetchMpdMetaData(e.mpdMetaFileSrc,function(e){h=!1,i.parseMpdDOM(e)}))},resetFlags:function(){n=null,s=null,a=0,c=0,l=[],d=!1},isMediaoSourceOpen:function(){return n&&"open"===n.readyState},isSourceBufferUpdating:function(){return s&&!s.updating},fetchMpdMetaData:function(e,t){var i=this,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="text",n.send(),n.onreadystatechange=function(){n.readyState==n.DONE&&i.parseMpdFileData(n.response,t)}},parseMpdFileData:function(e,t){var i=new DOMParser,n=i.parseFromString(e,"text/xml",0),s=n.querySelectorAll("Representation")[0];t(s)},parseMpdDOM:function(e){var t=e.querySelectorAll("SegmentList")[0].childNodes;l=[];for(var n=0;n<t.length;n++)1===t[n].nodeType&&l.push(t[n]);o=Number(e.querySelectorAll("SegmentList")[0].getAttribute("duration")),i.initMediaSource()},initMediaSource:function(){var e;i.isMSESupported()&&MediaSource.isTypeSupported(t)?(n=new MediaSource,e=URL.createObjectURL(n),n.addEventListener("sourceopen",i.sourceOpen.bind(i)),u(e,o)):console.error("Unsupported MIME type or codec: ",t)},isMSESupported:function(){return"MediaSource"in window},sourceOpen:function(){0===c&&i.isMediaoSourceOpen()&&(s=n.addSourceBuffer(t),s.addEventListener("updateend",i.nextSegment.bind(i)),i.fetchSegment())},fetchSegment:function(){if(i.isMediaoSourceOpen()&&l.length>0){var e;e=0===c?l[c].getAttribute("sourceURL"):l[c].getAttribute("media"),i.fetchRange(e)}},fetchRange:function(e){e=m+e;var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){i.appendSegment(t.response),l[c]&&(a+=Number(l[c].getAttribute("chunkTime")))},t.send()},appendSegment:function(e){i.isMediaoSourceOpen()&&i.isSourceBufferUpdating()&&s.appendBuffer(e)},fetchPendingChunks:function(){i=this,d=!0,i.isMediaoSourceOpen()&&a>r&&i.nextSegment()},nextSegment:function(e){i.isMediaoSourceOpen()&&"ended"!==n.readyState&&(c===l.length-1?n.endOfStream():(a<r+2||d)&&(c+=1,i.fetchSegment()))}});return new f}var s="1.0.0";t&&t.registerPlugin("VideoDynamicStreaming",n,s),i&&i.registerPlugin("VideoDynamicStreaming",n,s)}(window,window.EXPO_CREATIVE,window.EXPO_PUB),function(e,t){"use strict";var i=t.utility,n=t.CreateClass({constructor:function(e){this.directive=e},cookData:function(e){var t;for(var i in e)t[i]=e[i];return t},compile:function(e){i.assert(e&&i.isString(e),"expected type a non-empty String for template string");var t,n=this.createVirtualElement(e);return t=this.createStore(n,this.directive),{virtualElement:n.children[0],store:t}},createVirtualElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t},createStore:function(e,t){var i,n=Array.prototype.slice.call(e.getElementsByTagName("*"),0);return n.forEach(function(e){i=e.tagName.toLowerCase().split("_"),i.shift(),i=i.join("_"),t[i]&&t[i].push(this.directiveSystem(i,e))}.bind(this)),t},directiveSystem:function(e,t){return{id:"expo_"+e,tag:t}}});t.Template=t.Template||new n(e.DirectiveStore.getDirectives())}(window,window.EU),function(e,t,i,n){"use strict";var s="1.0.0",o={},r=e.top!==e;i.registerPlugin("render",["events","videoPlayer","Peel","close","rectangClose","replay","canvas","sniffer","templateEngine","messages","playWrapper","customHandlers","vizuWidget"],function(s,a,l,c,d,u,h,m,f,p,g,v,C,E){var y,T=(s.baseEventManager,s.utility),S=t.BaseEventManager.extend({constructor:function(){this.compManager=n,this.directiveObj="",this.initializeComponent=T.compose(this.setConfig,this.createInnerContainerDiv),this.currentListeners={}},renderTheme:function(e){var i=document.getElementById("expo_template_mainUnit").innerHTML;this.directiveObj=t.Template.compile(i),e.appendChild(this.directiveObj.virtualElement),e.appendChild(this.directiveObj.virtualElement.querySelector("rm_video"))},renderMainUnitComponent:function(e){Object.keys(e).forEach(function(t){if(e[t][0]){var i=this.creativeModel["getMainUnit_"+t](),n=this.generateElement(p.tmpl(e[t][0].id,i));e[t][0].tag.appendChild(n)}}.bind(this))},checkForCharectorLimitMainUnit:function(){var e=this.directiveObj.store;Object.keys(e).forEach(function(t){var i=this.creativeModel["getMainUnit_"+t]();if(e[t][0]&&e[t][0].tag.dataset.character){var n={max:i.fontStyle.max,min:i.fontStyle.min,text:i.text,container:e[t][0].tag,"white-space":i["white-space"]};T.charectorLimit(n)}}.bind(this))},generateElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]},initRender:function(){this.registerForError();var e=this.getHandler(r);s.sniffer=f,s.baseEventManager.add(g.CREATIVELOADED.eventName,e);var t=document.querySelector(s.adContainerId);t=t||document.body,this.renderTheme(t);var i=t.getElementsByTagName("rm_video")[0];this.createContainerDiv(i||document.body),this.createWrapperContainer(i||document.body),this.bindCommunications(e),s.baseEventManager.fire(g.SENDTOPUBLISHER.eventName,{eventName:g.GETCREATIVECONFIG.eventName},!0),C.setCustomHandlerss()},registerForError:function(){var e;window.onerror=function(t,i,n){this.config&&(e=this.config.teaser.trackers.debugging_pixel.java_script_error,e&&(e.custom4="li:"+n+";error:true;",this.controller.firePixel(e)))}.bind(this)},createContainerDiv:function(e){this.teaserContainer=document.createElement("div"),this.teaserContainer.id="teaserContainer_"+s.id.replace(/\$/g,""),this.teaserContainer.style.position="absolute",this.teaserContainer.style.width="100%",this.teaserContainer.style.height="100%",e.appendChild(this.teaserContainer)},createWrapperContainer:function(){this.wrapperContainer=document.createElement("div"),this.wrapperContainer.className="rm-wrapper-container",this.hideWrapperContainer(),this.teaserContainer.appendChild(this.wrapperContainer)},showWrapperContainer:function(){this.wrapperContainer.style.display="block"},hideWrapperContainer:function(){this.wrapperContainer.style.display="none"},getHandler:function(t){var i,n;return i=t?function(t,i){document.referrer&&(n=document.referrer),t.trust="erm",e.parent.postMessage(JSON.stringify(t),n)}:function(e,t){s.baseEventManager.fire(e.eventName,e)}},initComponents:function(e){this.config=this.creativeModel.adConfig,this.controller=new i.Controller(n,this.creativeModel,s,this),this.registerEventHandlers()},bindCommunications:function(e){s.baseEventManager.add(g.SENDTOPUBLISHER.eventName,e),s.baseEventManager.add(g.CREATIVECONFIG.eventName,function(e){var t=i.Model;this.creativeModel=new t(e),e.teaser&&e.teaser.trackers&&e.teaser.trackers.debugging_pixel&&(s.debug=e.teaser.trackers.debugging_pixel.fire||""),this.creativeModel.setIsInView(e.isInView),this.applyMainUnitBGColor(),this.renderMainUnitComponent(this.directiveObj.store),this.compManager.registerForComponentLoaded(this.initComponents.bind(this))}.bind(this)),s.baseEventManager.add(g.CREATIVEINTREACTION.eventName,this.handleIntractions.bind(this))},applyMainUnitBGColor:function(){var e=document.getElementById("rm-main-unit");this.creativeModel.adConfig.fullscreen&&this.creativeModel.adConfig.fullscreen.mainUnitBGColor&&(e.style.backgroundColor=this.creativeModel.adConfig.fullscreen.mainUnitBGColor)},registerEventHandlers:function(){var e=document.getElementsByClassName("videoInnerContainer")[0];e&&e.addEventListener(a.TEASERCLICK.getEventName(),this.handleIntractions.bind(this)),n.requireComponent("Replay").registerEventHandler(this.handleIntractions.bind(this)),this.teaserContainer.addEventListener(a.TEASERCLICK.getEventName(),this.handleIntractions.bind(this))},handleIntractions:function(e){if(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.name&&~e.name.indexOf("rectangClose"))this.fire(e.name);else{this.creativeModel.setCurrentEvent(this.creativeModel.getCurrentState()+"_"+e.type);var t=e.type+"."+this.creativeModel.getCurrentState();this.fire(t)}},handleTeaserInteractions:function(e){e.name="teaser_"+e.type,this.handleIntractions(e)},applyStateListeners:function(e,t){this.currentListeners=e},removeStateListeners:function(e,t){delete(this.currentListeners[t]||o)[e]},setInitialTracker:function(){var e={type:"img",pixel:"load"};this.firePixel(e)},createInnerContainerDiv:function(){this.innerContDiv||(this.innerContDiv=document.createElement("div"),this.innerContDiv.id="appsnack_innerContainer_"+this.config.id.replace(/\$/g,""),this.teaserContainer.appendChild(this.innerContDiv)),this.innerContDiv.style.height=this.config.teaser.height+"px",this.creativeModel.getCurrentState()!==this.creativeModel.CONST.AD_STATE_COLLAPSED_PAUSED_TEASER&&this.creativeModel.getCurrentState()!==this.creativeModel.CONST.AD_STATE_COLLAPSED_TEASER||(this.innerContDiv.style.height="90px"),this.innerContDiv.style.width=this.config.teaser.width+"px",this.innerContDiv.style.left=this.config.initialPosition.left-this.config.expansionData.mainUnitClip.left,this.innerContDiv.style.top=this.config.initialPosition.top-this.config.expansionData.mainUnitClip.top,this.config.teaser.height>this.config.fullscreen.height&&(this.innerContDiv.style.top=this.config.initialPosition.top),this.innerContDiv.style.position="absolute"},resizeInnerContainer:function(){this.innerContDiv.style.width="100%",this.innerContDiv.style.height="100%",this.innerContDiv.style.left="",this.innerContDiv.style.top=""},setConfig:function(){var e=(this.config.initialPosition.clip.match(/([0-9]|\.)+/g),this.config.teaser.width+"x"+this.config.teaser.height),t={standard:this.config.teaser[e].standard.video};this.creativeModel.saveDimensions({initialTeaser:{width:parseInt(this.innerContDiv.style.width),height:parseInt(this.innerContDiv.style.height),left:parseInt(this.config.initialPosition.left),top:parseInt(this.config.initialPosition.top)},initialVideo:{left:Number(this.config.initialPosition.left-this.config.expansionData.mainUnitClip.left)+t.standard.x,top:Number(this.config.initialPosition.top-(this.config.teaser.height>this.config.fullscreen.height?0:this.config.expansionData.mainUnitClip.top))+t.standard.y,width:t.standard.scaledWidth,height:t.standard.scaledHeight},finalVideo:{left:0,top:0,width:this.creativeModel.adConfig.fullscreen.width,height:this.creativeModel.adConfig.fullscreen.height}})},applyTweenDimensions:function(e){var t,i,o,r,a,l=["width","height","top","left"],c={},d={};r=this.creativeModel.getCurrentState(),a=this.creativeModel.CONST;for(var u in l)c[l[u]]=e["container."+l[u]],d[l[u]]=e["video."+l[u]];this.creativeModel.getIntermediateState()!==a.PHAZE_TRANSITION&&(t=this.innerContDiv,t.style.width=c.width+"px",t.style.height=c.height+"px",t.style.top=c.top-this.config.expansionData.mainUnitClip.top+"px",this.config.teaser.height>this.config.fullscreen.height&&(t.style.top=c.top+"px"),t.style.left=c.left-this.config.expansionData.mainUnitClip.left+"px"),i={},i.right=c.left+c.width,i.bottom=c.top+c.height,i.top=c.top,i.left=c.left;var h="rect("+i.top+"px "+i.right+"px "+i.bottom+"px "+i.left+"px)";n.requireComponent("VideoPlayer").resizePlayer(d),o=s.sniffer.getDeviceInfo(),"ie"===o.browserName&&n.requireComponent("Canvas").resizeCanvas(d),this.setIframeClip(h)},setIframeClip:function(e,t){var i={action:"setIframeClip",adId:this.adId,gridDiv:"appsnack_teaser_iframe_"+this.config.id.replace(/\$/g,""),teaserDiv:this.config.divid,clip:e,currentState:this.creativeModel.getCurrentState(),previousState:this.creativeModel.getPreviousState(),transition:this.creativeModel.getIntermediateState()};s.baseEventManager.fire(g.SENDTOPUBLISHER.eventName,{eventName:g.SETEXPOCONTAINERCLIP.eventName,message:i})},showAd:function(){document.documentElement.style.visibility="visible"},createContainer:function(){var e=document.createElement("div");return e.className="rm-wrapper",e.id="expo_container_"+s.id.replace(/\$/g,""),document.body.appendChild(e),e}});return y=new S},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n,s="1.0.0";t.registerPlugin("tracker",function(e){function t(){this.engagementTime=0,this.appendCustomvalue="",this.isEngFired=!1,this.previousTdValue=0,this.engagementType="",this.custom1CPV=""}var i,s=e.utility,o=function(e){function t(t){t.src=e.url}var i="tf_thirdparty_iframe_pixel_";s.createSameDomainIframeNode(i,0,0,t)},r=function(e){function t(e,t){var i,n=e;/^https?:\/\//i.test(t.pixel)||0===t.pixel.indexOf("//")?(i=document.createElement("script"),i.src=t.pixel,i.type="text/javascript",n.contentWindow.document.write(i.outerHTML)):0===t.pixel.indexOf("<scr")||0===t.pixel.indexOf("%3C")?n.contentWindow.document.write(t.pixel):(i=document.createElement("script"),i.innerHTML=t.pixel,i.type="text/javascript",n.contentWindow.document.write(i.outerHTML))}var i="tf_thirdparty_js_pixel_";s.createSameDomainIframeNode(i,0,0,t,e)},a=function(e){if(e.indexOf("offload")>0&&navigator.sendBeacon)navigator.sendBeacon(e);else{var t=document.createElement("img");t.src=e}},l=[],c=t.prototype;return c.queued=function(e){l.push(e)},c.resetQueue=function(){l=[]},c.setDefaultCustom1paramsforCPV=function(e){this.custom1CPV=e},c.setEngagementType=function(e){this.engagementType=e},c.unqueued=function(){for(var e=l.length,t={},i=0;i<e;i++)t=l.shift(),this.firePixels(t)},c.setProperties=function(e){for(var t in e)this[t]=e[t]},c.setHost=function(e){this.pixelInfo.host=e},c.resetEngagementTime=function(){"resetEngagementTime"!=i&&(this.previousTdValue=this.previousTdValue+this.getSessionTime(),
this.engagementTime=0,i="resetEngagementTime")},c.setEngagementTime=function(){i&&"setEngagementTime"==i||(this.engagementTime=(new Date).getTime(),this.isEngFired=!0,i="setEngagementTime")},c.getLastcall=function(){return i},c.getSessionTime=function(){var e=(new Date).getTime()-this.engagementTime;return e},c.getTimeDifference=function(){var e;return e=0===this.engagementTime?this.previousTdValue:this.previousTdValue+((new Date).getTime()-this.engagementTime)},c.replaceTimeDifference=function(e,t){return e=e.replace(/@TIMEDIFFERENCE@/g,t)},c.replaceIncustom1=function(e,t){var i="";return i=this.custom1CPV.replace(/@FROM@/g,e?e:"@FROM@"),i=i.replace(/@STATE@/g,t?t:"@STATE@")},c.getPixelUrl=function(e){var t,i,n,s,o=this.pixel_info,r=o.insSuffixUrl;if(/^https?:\/\//i.test(e.pixel))return e.pixel;e.currentState&&(e.currentState=e.currentState.toLowerCase()),t="undefined"==typeof e.custom1?"CPV"===this.engagementType?"&custom1="+this.replaceIncustom1(e.custom1,e.currentState):"":"CPV"===this.engagementType?"&custom1="+this.replaceIncustom1(e.custom1,e.currentState):"&custom1="+e.custom1,"undefined"==typeof e.custom2&&(i=""),n="undefined"==typeof e.custom4?"":r.match("custom4")?e.custom4:"&custom4="+e.custom4,s="undefined"==typeof e.custom5?"":"&"+e.custom5,r=this.splitinsSuffixUrl(r,e);var a="//"+o.host+o.insPrefixUrl+o.campaignName+o.insMidUrl+e.pixel+t+r+n+s,l=void 0===e.td?this.getTimeDifference():e.td;return a=this.replaceTimeDifference(a,l)},c.splitinsSuffixUrl=function(e,t){for(var i=e.split("&"),n=0;n<i.length;n++)"undefined"!=typeof t.custom2&&i[n].match(/custom3=/)&&(i[n]+=t.custom2);return e=i.join("&")},c.getAppendCustomValue=function(){return this.appendCustomvalue},c.firePixelsById=function(e,t){if(this.customTrackers&&this.customTrackers[e]){var i=this.customTrackers[e];void 0===t&&(t=i.multi),i.multi=t,this.firePixels(i)}},c.firePixel=function(e,t){switch(e.type){case"img":var i=t||this.getPixelUrl(e);a(i);break;case"js":r(e);break;case"iframe":o(e)}},c.firePixels=function(e){try{var t=e.trackers,i=t.length,n={};if(i>0&&(e.multi||!e.isFirePixel)){for(var s=0;s<i;s++)t[s]&&(n.custom1=e.custom1&&e.custom1.length>0&&e.custom1 instanceof Array?e.custom1[s]:e.custom1,n.custom2=e.custom2,n.custom4=e.custom4,e.custom5&&(n.custom5=e.custom5),void 0!==e.td&&(n.td=e.td),e.currentState&&(n.currentState=e.currentState),n.pixel=t[s].pixel,n.type=t[s].type,this.firePixel(n,e.pixelUrl));e.isFirePixel=!0}return e}catch(o){console.log(o)}},n?n:n=new t},s)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";function n(e,i,n){var s=null,o=[],r="",a=0,l=[],c=[],d=[],u=[],h=null,m=t.CreateClass({constructor:function(){},checkNextSurfaceType:function(e,t){this.prepareCurrentSurfaceHtml(e,t),this.startSurfaceTransition(e,t)},prepareCurrentSurfaceHtml:function(e,t){var n="",h=null,m=l[e].markup,f=l[e].subContainerConfig,p=d[a]&&d[a].split("."),g=l[e].minFont||9,v=l[e].maxFont||14;"static"===l[e].type?this.appendHtml(s,l[e].markup):"undefined"!=typeof p&&(u=this.getCurrentSurfaceData(o,p),n=i.tmpl(m,{data:u[t]}),this.appendHtml(s,n)),c=s.children,h=c[c.length-1],h.setAttribute("class",r),h&&this.calculateFontSize(h,g,v,f)},getCurrentSurfaceData:function(e,t,i){for(var n=0;n<t.length;n++)e=e[t[n]];return e},calculateFontSize:function(e,t,i,n){var s=null,o=i,r=Array.prototype.slice.call(e.children,0),a=this,l=1;r.map(function(e,r){l=n&&n[r]?n[r].lineHeight||1:1,s=a.calculateSubContainerFontSize.call(a,e,t,i,l),s<o&&(o=s)}),i===o&&(e.style.lineHeight="120%"),e.style.fontSize=o},calculateSubContainerFontSize:function(e,t,i,n){for(var s=e.textContent.split(" "),o=null,r=0,a=e.style,l=h,c=0,d={fontWeight:a.fontWeight,fontfamily:a.fontFamily,fontStyle:a.fontStyle},u=0;u<n;u++){for(o=this.createDummyDiv(i,d);o.offsetWidth<l&&r<s.length;)o.textContent=o.textContent+s[r]+" ",r++;r--,o.offsetWidth>=l&&(c=o.textContent.lastIndexOf(s[r]),o.textContent=o.textContent.substring(0,c),r--),u===n-1&&(o.textContent=o.textContent+" ...",o.offsetWidth>=l&&r--),u<n-1&&r++,document.body.removeChild(o)}return r<s.length-1&&t<i?this.calculateSubContainerFontSize(e,t,--i,n):r<s.length-1||t===i?(s=s.splice(0,r+1),e.textContent=s.join(" ")+" ...",i):(s=s.splice(0,r+1),e.textContent=s.join(" "),i)},createDummyDiv:function(e,t){var i=document.createElement("div"),n=document.createTextNode(""),s=i.style;return i.id="dummyid",s.display="inline-block",s.opacity="0",t&&(s.fontWeight=t.fontWeight,s.fontfamily=t.fontfamily,s.fontStyle=t.fontStyle),s.fontSize=e,document.body.appendChild(i),i.appendChild(n),i},appendHtml:function(e,t){var i=document.createElement("div");i.innerHTML=t,e.appendChild(i.firstChild)},startSurfaceTransition:function(e,t){var i=l[e].stayDuration||1e3;c.length>1&&s.removeChild(c[0]),c[0].style.opacity="1",setTimeout(function(){"static"!==l[e].type&&t!==(l[e].subSurfaceMaxLength-1||0)&&t!==u.length-1||("static"!=l[e].type&&(a+=1),t=-1,e+=1),e===l.length&&(e=0,a=0),this.checkNextSurfaceType(e,++t)}.bind(this),i)},render:function(e,t,i){var n=0,a=0;s=e,l=t.surfaces,h=s.offsetWidth-6,d=t.surfacesXpaths,o=i,r="transform-opacity rm-align-vertical-center surface-style",this.checkNextSurfaceType(n,a)}});return new m}var s="1.0.0";i.registerPlugin("DynamicPeel",["templateEngine","domUtility"],n,s)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i,n){"use strict";var s="1.0.0";i.registerPlugin("Peel",["PeelModel","PeelView","PeelConfig"],function(e,i,s,o){var r=t.BaseComponent.extend({constructor:function(e){this.id="Peel",this.appendTo="",this.objectConf=""},init:function(e){i.setConfig(o),s.init(i),n.requestConfig(e)},render:function(e,t){this.appendTo=e,this.objectConf=t,this.element=s.prepareHtml(t),s.render(e,t)},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display="block"},destroy:function(){this.element.parentNode.removeChild(this.element),this.element=null,n.destroyComponent(this)},onConfig:function(e,t){i.setlanguageString(e.languageStr),i.setAssetLocation(e.location),i.setPeelClientLogo(e.logo),i.setPeelCssText(e.cssText),i.setBrandingText(e.branding),i.setBrandingDuration(e.duration),e.dynamicPeelConfig&&e.dynamicPeelConfig.isEnabled&&(i.setPeelDynamicConfig(e.dynamicPeelConfig),i.setPeelDynamicData(e.dynamicPeelData)),this.render(t,e.dimension)},pause:function(){s.pauseTeaser()},exitTeaserAnimation:function(){s.exitTeaserAnimation()},entryPeelAnimation:function(){s.entryPeelAnimation()}});n.registerComponent(new r(e),"Peel")},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("PeelModel",function(e){var i=e.utility,n=t.CreateClass({constructor:function(){this.config=void 0},setConfig:function(e){this.config=i.extend({},e)||{}},setlanguageString:function(e){this.config.languageText=e,this.repaceHifen()},setAssetLocation:function(e){this.config.location=e?e:"",this.setImageAssets()},setBrandingText:function(e){this.config.branding=e},setBrandingDuration:function(e){this.config.brandingDuration=e},repaceHifen:function(){Object.keys(this.config.languageText).forEach(function(e){var t,i=this.config.languageText[e];delete this.config.languageText[e],t=e.split("-").join("_"),this.config.languageText[t]=i}.bind(this))},getLanguageString:function(){return this.config.languageText},getBrandingDuration:function(){return this.config.brandingDuration},getBrandingText:function(){return this.config.branding},getPeelClientLogo:function(){return this.config.logo},setPeelCssText:function(e){this.config.cssText=e},getPeelCssText:function(){return this.config.cssText},setPeelClientLogo:function(e){this.config.logo=e},setPeelDynamicConfig:function(e){this.config.peelDynamicConfig=e},setPeelDynamicData:function(e){this.config.dynamicPeelData=e},getPeelDynamicConfig:function(){return this.config.peelDynamicConfig},getPeelDynamicData:function(){return this.config.dynamicPeelData||null},getId:function(){return this.config.id},getLan:function(){return this.config.lan},getPeelContainerDimension:function(e){return this.config.peelContainerDimension[e]},getEvents:function(){return this.config.events},setImageAssets:function(){this.config.location&&Object.keys(this.config.assets).forEach(function(e){this.config.assets[e]=this.config.location+this.config.assets[e]}.bind(this))},getImageAssets:function(){return this.config.assets}});return new n},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("PeelView",["domUtility","templateEngine","sniffer","DynamicPeel"],function(e,i,n,s,o){var r,a,l,c,d,u,h,m,f,p,g,v=t.BaseComponent.extend({constructor:function(){},init:function(e){this.modelObj=e,g=this,this.exitAnimation,this.peelTimmer=""},prepareHtml:function(t){var i,s={languageStr:this.modelObj.getLanguageString(),assets:this.modelObj.getImageAssets(),utility:e.utility,logo:this.modelObj.getPeelClientLogo(),teaserBranding:this.modelObj.getBrandingText()};if("160x600"===t.dimension&&s.languageStr)for(var o in s.languageStr)s.languageStr[o].fontSize&&s.languageStr[o].fontSize_160_600&&(s.languageStr[o].fontSize=s.languageStr[o].fontSize_160_600);return i=n.tmpl("expo_peel",s),g.element=document.createElement("div"),g.element.innerHTML=i,this.element.children[0]},render:function(t,n){var m,v,C,E,y,T,S,w;if(g.appendTo=document.querySelector(t),g.appendTo.appendChild(g.element.children[0]),a=document.getElementById("rm_peel_wrapper_container"),S=a.querySelector(".rm_dynamic_peeel"),l=a.querySelector("#rm_peel_container"),r=a.querySelector(".rm_peelContent"),y=r.querySelector(".rm_peeel_clientLogo"),c=a.querySelector(".rm_muteButton"),d=a.querySelector(".rm_peel-replay"),u=l.querySelector("#rm_peelText"),h=r.querySelector(".rm_peel_cube"),p=a.querySelector(".rm-white-image-scale"),E=h.querySelector(".rm_flop"),f=i.vendorPrefix(),"160x600"===n.dimension&&(m=s.getDeviceInfo(),a.classList.add("rm_peel_wrapper_container_scale_160X600")),this.modelObj.getPeelContainerDimension(n.dimension)){var b=this.modelObj.getPeelContainerDimension(n.dimension);b.scale;m=s.getDeviceInfo(),"160x600"!==n.dimension}C="160x600"===n.dimension?i.calculateFontSize(g.modelObj.getBrandingText(),98,14,8):i.calculateFontSize(g.modelObj.getBrandingText(),130,14,9),v=h.querySelector(".rm_flop .verticleAlign"),v.style.fontSize=C,e.utility.isString(g.modelObj.getBrandingText())?g.repeateAnimation(E):E.style.opacity="0",g.initAnimation(),T=this.modelObj.getPeelDynamicConfig(),w=this.modelObj.getPeelDynamicData(),T&&T.isEnabled&&w&&T.surfacesXpaths&&T.surfacesXpaths.length>0&&(y.style.display="none",o.render(S,T,w));var x='background-image: url("'+this.modelObj.config.logo+'");background-repeat: no-repeat;background-position: right;background-size: contain;'+this.modelObj.config.cssText;y.style.cssText=x},initAnimation:function(){g.hideContent(r),g.hideContent(h),h.classList.remove("hoverCube"),g.hideContent(d),g.moveForward(),l.addEventListener("webkitAnimationEnd",g.moveForward),l.addEventListener("animationend",g.moveForward)},repeateAnimation:function(t){this.peelTimmer=setInterval(function(){e.utility.isString(g.modelObj.getBrandingText())&&("1"===t.style.opacity||""===t.style.opacity?t.style.opacity="0":t.style.opacity="1")}.bind(g),g.modelObj.getBrandingDuration())},hideContent:function(e){e.style.opacity=0},showContent:function(e){e.style.opacity=1},startScaleAnimation:function(){l.classList.add("rm_peel_element_animation")},removeScaleAnimation:function(){l.classList.remove("rm_peel_element_animation")},moveForward:function(){var e;f&&(l.classList.remove("rm_peel_element_animation"),p.classList.remove("whiteAnimation"),g.showContent(r),g.hideContent(u),g.showContent(h),e=l.clientWidth,l.removeEventListener("webkitAnimationEnd",g.moveForward),l.removeEventListener("animationend",g.moveForward),l.addEventListener("webkitTransitionEnd",g.cubeAnimation),l.addEventListener("transitionend",g.cubeAnimation),l.style[f+"Transform"]="translate3d(-149px ,0 ,0)",r.style[f+"Transform"]="translate3d(-149px ,0 ,0)",p.style[f+"Transform"]="translate3d(-143px ,0 ,0)skewX(-7deg)",e=null)},cubeAnimation:function(){h.querySelector(".rm_flop");l.classList.add("rm_peel_element_animation"),l.style.left="6px",m=!1},moveBackWard:function(){h.removeEventListener("webkitTransitionEnd",g.moveBackWard),h.removeEventListener("transitionend",g.moveBackWard),setTimeout(function(){f&&(g.showContent(u),l.style[f+"Transform"]="translate3d(0px ,0 ,0)",r.style[f+"Transform"]="translate3d(0px ,0 ,0)",p.style[f+"Transform"]="translate3d(0px ,0 ,0)skewX(-7deg)",l.addEventListener("webkitTransitionEnd",g.scaleAnimation),l.addEventListener("transitionend",g.scaleAnimation))},1e3)},scaleAnimation:function(){g.showContent(c),l.removeEventListener("webkitTransitionEnd",g.scaleAnimation),l.removeEventListener("transitionend",g.scaleAnimation),l.classList.add("rm_peel_element_animation"),p.classList.add("whiteAnimation"),g.initAnimation()},reset:function(){l.classList.remove("rm_peel_element_animation"),l.style.left="149px",p.classList.remove("whiteAnimation"),l.removeEventListener("webkitTransitionEnd",g.scaleAnimation),l.removeEventListener("transitionend",g.scaleAnimation),h.removeEventListener("webkitTransitionEnd",g.moveBackWard),h.removeEventListener("transitionend",g.moveBackWard),l.removeEventListener("webkitAnimationEnd",g.moveForward),l.removeEventListener("animationend",g.moveForward),l.removeEventListener("webkitTransitionEnd",g.cubeAnimation),l.removeEventListener("transitionend",g.cubeAnimation)},pause:function(){var e;m=!0,g.exitTeaserAnimation(),g.reset(),a.style.display="block",g.hideContent(r),g.hideContent(p),g.hideContent(l),l.classList.add("zeroTime"),r.classList.add("zeroTime"),p.classList.add("zeroTime"),e=l.clientWidth,l.addEventListener("webkitTransitionEnd",g.pauseAnimation),l.addEventListener("transitionend",g.pauseAnimation),l.style[f+"Transform"]="translate3d(100px ,0 ,0)",r.style[f+"Transform"]="translate3d(100px ,0 ,0)",p.style[f+"Transform"]="translate3d(100px ,0 ,0)skewX(-7deg)",e=null},pauseAnimation:function(){var e=document.getElementsByClassName("rm_flipper")[0],t=document.getElementsByClassName("rm_flop")[0];clearInterval(g.peelTimmer),a.style.opacity=1,l.classList.remove("zeroTime"),r.classList.remove("zeroTime"),p.classList.remove("zeroTime"),l.style[f+"TransitionDuration"]=".3s",r.style[f+"TransitionDuration"]=".3s",p.style[f+"TransitionDuration"]=".3s",g.showContent(r),g.showContent(l),g.showContent(p),l.classList.add("transition"),r.classList.add("transition"),p.classList.add("transition"),l.style[f+"Transform"]="translate3d(-149px ,0 ,0)",r.style[f+"Transform"]="translate3d(-149px ,0 ,0)",p.style[f+"Transform"]="translate3d(-141px ,0 ,0)skewX(-7deg)",g.showContent(d),e&&e.parentNode.removeChild(e),l.removeEventListener("webkitTransitionEnd",g.pauseAnimation),l.removeEventListener("transitionend",g.pauseAnimation),l.classList.add("rm_peel_element_animation"),l.style.left="6px",t.style.opacity=1,g.repeateAnimation(d)},pauseTeaser:function(){g.pause()},exitTeaserAnimation:function(){g.exitAnimation=!0;var e;g.reset(),g.hideContent(r),l.style[f+"TransitionDuration"]=".3s",r.style[f+"TransitionDuration"]=".3s",p.style[f+"TransitionDuration"]=".3s",e=l.clientWidth,l.style[f+"Transform"]="translate3d(90px ,0 ,0)",r.style[f+"Transform"]="translate3d(90px ,0 ,0)",p.style[f+"Transform"]="translate3d(90px ,0 ,0)skewX(-7deg)",a.style.opacity=0,a.style.display="none",a.addEventListener("webkitTransitionEnd",g.opacityAnimationCallback),a.addEventListener("transitionend",g.opacityAnimationCallback),e=null},opacityAnimationCallback:function(){a.removeEventListener("webkitTransitionEnd",g.opacityAnimationCallback),a.removeEventListener("transitionend",g.opacityAnimationCallback),!m&&g.exitAnimation&&(a.style.display="none")},entryPeelAnimation:function(){m=!0;var e;g.exitAnimation=!1,a.style.display="block",e=a.clientWidth,a.style.opacity="1",g.reset(),l.style[f+"Transform"]="translate3d(0px ,0 ,0)",r.style[f+"Transform"]="translate3d(0px ,0 ,0)",p.style[f+"Transform"]="translate3d(0px ,0 ,0)skewX(-7deg)",l.classList.add("rm_peel_element_animation"),p.classList.add("whiteAnimation"),g.showContent(u),g.showContent(c),g.showContent(r),l.style[f+"TransitionDuration"]=".5s",r.style[f+"TransitionDuration"]=".5s",p.style[f+"TransitionDuration"]=".5s",g.initAnimation()}});return new v},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t){"use strict";var i="1.0.0";t.registerPlugin("PeelConfig",function(){var e={id:"peelContainer",events:{initialize:"initialize",addedToDom:"added to dom",removedFromDom:"removedFromDom",clicked:"clicked"},languageText:{explore:"Explore","rollover-to-explore":"Rollover to explore","click-to-replay":"Click to replay",VDX_BY_Exponential:"vdx.tv"},assets:{mute:"mute.gif",backGroundImage:"bg.png",peel_dummy:"peel_dummy.png",whiteMC:"whiteMC.png",peel_bg:"peel_bg.png"},peelContainerDimension:{"160x600":{width:253,height:90,scale:.56},"300x250":{width:253,height:90,scale:.8},"300x600":{width:253,height:90,scale:.8},"728x90":{width:253,height:90,scale:.8},"970x250":{width:253,height:90,scale:.8}}};return e},i)}(window,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("rectangClose",function(e){var t=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},wrapperElement:{},init:function(e){i.requestConfig(e),this.handleInteractions()},prepareHtml:function(){this.element=document.createElement("div"),this.element.className=this.config.className,Object.keys(this.config.style).forEach(function(e){this.element.style[e]=this.config.style[e]}.bind(this)),this.element.innerHTML=this.config.src,this.element.innerHTML=this.config.languageStr.close.text.toUpperCase(),this.element.style.fontSize=this.config.languageStr.close.fontSize+"px"},render:function(e){this.wrapperElement=document.createElement("div"),this.wrapperElement.className="rm-rectangular-close-wrapper";var t=document.querySelector(e);t.appendChild(this.element),t.appendChild(this.wrapperElement)},hide:function(){this.element.style.display="none",this.wrapperElement.style.display="none"},show:function(){this.element.style.display="block",this.wrapperElement.style.display="block"},handleInteractions:function(){this.element.addEventListener("click",this.handler.bind(this)),this.element.addEventListener("mouseover",this.handler.bind(this)),this.element.addEventListener("mouseout",this.handler.bind(this)),this.wrapperElement.addEventListener("mouseover",function(e){e.stopImmediatePropagation()}),this.wrapperElement.addEventListener("mouseout",function(e){e.stopImmediatePropagation()})},registerEventHandler:function(e){},handler:function(e){e.stopImmediatePropagation(),this.fire(e.type)},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new t,"RectangClose")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("close",function(e){var t=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},init:function(e,t){i.requestConfig(e),this.creativeModel=t},prepareHtml:function(){this.element=document.createElement("div"),this.element.className=this.config.className,Object.keys(this.config.style).forEach(function(e){this.element.style[e]=this.config.style[e]}.bind(this)),this.element.innerHTML=this.config.src},render:function(e){var t=document.querySelector(e);t.appendChild(this.element),this.registerEventHandler()},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display="block"},registerEventHandler:function(e){this.element.addEventListener("click",this.handleClick.bind(this)),this.element.addEventListener("mouseover",this.handleMouseOver.bind(this))},handleClick:function(e){e.stopImmediatePropagation(),this.fire(e.type)},handleMouseOver:function(e){e.stopImmediatePropagation(),this.fire(e.type)},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new t,"Close")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("playWrapper",function(e){var t=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},init:function(e,t){i.requestConfig(e),this.creativeModel=t},prepareHtml:function(){this.element=document.createElement("div"),this.element.className=this.config.className,Object.keys(this.config.style).forEach(function(e){this.element.style[e]=this.config.style[e]}.bind(this))},render:function(e){var t=document.querySelector(e);t.appendChild(this.element)},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display="block"},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new t,"PlayWrapper")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("canvas",function(e){var n=EU.CreateClass({constructor:function(){},config:{},element:"",init:function(n,s,o){this.Messages=t.require("messages",e),"ie"===e.sniffer.getDeviceInfo().browserName&&(i.requestConfig(n,o||"init"),this.creativeModel=s,e.baseEventManager.add(this.Messages.MAINUNITLOAD.eventName,function(){this.reConfig()}.bind(this)))},prepareHtml:function(){this.element=document.createElement("canvas"),this.element.className="canvasID",Object.keys(this.config).forEach(function(e){"prop"!==e&&(this.element.style[e]=this.config[e])}.bind(this)),this.element.style.position="absolute",this.element.style.top=0,this.element.style.left=0,this.renderPosterImage()},renderPosterImage:function(){var e,t,i,n,s=document.getElementById("videoID");this.creativeModel&&(i=parseInt(this.creativeModel.dimensions.initialVideo.width),n=parseInt(this.creativeModel.dimensions.initialVideo.height),e=this.element.getContext("2d"),this.element.width=i,this.element.height=n,t=new Image,t.onload=function(){e.drawImage(t,0,0,i,n)},t.src=s.getAttribute("poster"))},renderVideo:function(){function e(){function i(e,t,n,s){return!e.paused&&!e.ended&&(t.drawImage(e,0,0,n,s),void setTimeout(i,20,e,t,n,s))}t=this.element&&!t?this.element.getContext("2d"):t,t?(this.element.width=s.width,this.element.height=s.height,i(o,t,s.width,s.height)):e.call(this)}var t,n=i.requireComponent("VideoPlayer"),s=n.getSize(),o=document.getElementById("videoID");this.video=n,e.call(this)},resizeCanvas:function(e){this.element.style.width=e.width,this.element.style.height=e.height,this.element.style.top=0,this.element.style.left=0},render:function(e){var t=(document.querySelector(e),i.requireComponent("VideoPlayer").getVideoTag());t.parentNode.insertBefore(this.element,t.nextSibling)},hide:function(){var e=document.getElementById("videoID");e.classList.remove("hide"),this.element.style.display="none"},show:function(){var e=document.getElementById("videoID");e.classList.add("hide"),this.element.style.display="block"},onConfig:function(e,t,i){this.config=e,this.prepareHtml(),this.render(t)},reConfig:function(){this.resizeCanvas(this.video.getSize())}});i.registerComponent(new n,"Canvas")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("replay",["templateEngine"],function(e,t){var n=EU.BaseComponent.extend({constructor:function(){},config:{},element:{},init:function(e){i.requestConfig(e)},prepareHtml:function(){var e,i,n,s="";Object.keys(this.config.style).forEach(function(e){s+=e+": "+this.config.style[e]+";"}.bind(this)),e={cssStyle:s,langulageStr:{replay:this.config.languageStr.replay.text.toLocaleUpperCase()},replayFontSize:this.config.languageStr.replay.fontSize+"px",replaySrc:this.config.src},i=t.tmpl("expo_replay",e),n=document.createElement("div"),n.innerHTML=i,this.element=n.children[0]},render:function(e){var t=document.querySelector(e);t.appendChild(this.element)},hide:function(){var e=document.getElementById("video-replay-container");e&&(this.element.style.display="none")},show:function(){var e=document.getElementById("video-replay-container");e&&(this.element.style.display="block")},registerEventHandler:function(e){this.element.addEventListener("click",this.handleClick.bind(this))},handleClick:function(e){e.stopImmediatePropagation(),this.fire(e.type)},onConfig:function(e,t){this.config=e,this.prepareHtml(),this.render(t)}});i.registerComponent(new n,"Replay")},n)}(window,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";i.registerPlugin("events",["sniffer"],function(e,i){var n=i.isMobile(),s=t.Enum({enumList:[{TEASERHOVER:{desktop:"mouseover",mobile:""}},{TEASEROUT:{desktop:"mouseout",mobile:""}},{TEASERCLICK:{desktop:"click",mobile:""},RECTANGLECLICK:{desktop:"click",mobile:""},RECTANGLEHOVER:{desktop:"mouseover",mobile:""},RECTANGLEOUT:{desktop:"mouseout",mobile:""},CIRCULARCLICK:{desktop:"click",mobile:""},REPLAYCLICK:{desktop:"click",mobile:""},CTACLICK:{desktop:"click",mobile:""},MAINUNITCLIENTLOGO:{desktop:"click",mobile:""},VIDEOPLAYERCLICK:{desktop:"click",mobile:""},VIDEOPLAYERMOVE:{desktop:"mousemove",mobile:""},VIDEOPLAYERLEAVE:{desktop:"mouseleave",mobile:""},VIDEOREWIND:{desktop:"rewind",mobile:""},CIRCULARHOVER:{desktop:"mouseover",mobile:""},VIZUDIMCLICK:{desktop:"click",mobile:""}}],constructor:function(){this.eventName=n?this.mobile:this.desktop},getEventName:function(){return this.eventName}});return s},"1.0.0")}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i,n){"use strict";function s(){var e;return e="RANDOM_NUMBER"==arguments[1]?""+(1e4*Math.random()>>0):m[arguments[1]],"="+e}var o,r,a,l="1.0.0",c="//secure-gl.imrworldwide.com/u/ad?ca=VIZU_CAMPAIGN&cr=AD_IDENTIFIER&ce=SITE_ID&pc=PLACEMENT_IDENTIFIER&#WILDCARD_PARAMS#ci=nlsnci174&am=3&aa=1&at=view&rt=banner&tt=5&r=RANDOM_NUMBER",d=!1,u="//secure-gl.imrworldwide.com/u/t/##path##/300x250_survey.html?ca=VIZU_CAMPAIGN&pc=PLACEMENT_IDENTIFIER&ci=nlsnci174&am=3&ce=SITE_ID&#WILDCARD_PARAMS#r=RANDOM_NUMBER",h=/\=([A-Z_]+)/g,m={VIZU_CAMPAIGN:9682,AD_IDENTIFIER:"TestAd",PLACEMENT_IDENTIFIER:"placementIdMacro",SITE_ID:"exponential"},f=!1;i.registerPlugin("vizuWidget",["events"],function(e,i){var l=t.BaseComponent.extend({constructor:function(){},config:{},element:{},wrapperElement:{},appendElement:{},dimWrapper:{},iframeDiv:{},vizuConfig:{},peelContainer:{},iframe:{},isVizu:!1,init:function(e,t){n.requestConfig(e),this.creativeModel=t,this.vizuConfig=this.creativeModel.adConfig.vizu,this.isVizu=this.isVizuEnabled(),this.isVizu&&(this.vizuConfig.vizuCampaign&&(m.VIZU_CAMPAIGN=this.vizuConfig.vizuCampaign),this.vizuConfig.adId&&(m.AD_IDENTIFIER=this.vizuConfig.adId),this.vizuConfig.placementId&&(m.PLACEMENT_IDENTIFIER=this.vizuConfig.placementId),this.vizuConfig.siteId&&(m.SITE_ID=this.vizuConfig.siteId),c=this.replaceQueryParams(c),this.vizuConfig&&this.vizuConfig.enabled&&(this.prepareHtml(),this.render()))},replaceQueryParams:function(e){var t;return t=void 0!==this.vizuConfig.queryParam?this.vizuConfig.queryParam?e.replace("#WILDCARD_PARAMS#",this.vizuConfig.queryParam+"&"):e.replace("#WILDCARD_PARAMS#",this.vizuConfig.queryParam):e.replace("#WILDCARD_PARAMS#","")},prepareHtml:function(){this.element=document.createElement("div"),this.element.id=this.config.innerContainer.id,this.element.className=this.config.innerContainer.classname},render:function(){this.appendElement=document.getElementById("rm-vizu-wrapper"),this.dimWrapper=document.createElement("div"),this.iframeDiv=document.createElement("div"),this.dimWrapper.id=this.config.dimWrapper.id,this.dimWrapper.className=this.config.dimWrapper.classname,this.iframeDiv.className=this.config.iframeWrapper.classname,this.iframeDiv.id=this.config.iframeWrapper.id,this.appendElement.appendChild(this.dimWrapper),this.element.appendChild(this.iframeDiv),this.appendElement.appendChild(this.element),o=document.getElementById(this.config.innerContainer.id),r=document.getElementById(this.config.iframeWrapper.id),a=document.getElementById(this.config.dimWrapper.id),document.getElementById("rm-vizuwidget_peel_container").style.backgroundImage="url("+this.config.innerContainer.src+")",a.addEventListener(i.VIZUDIMCLICK.getEventName(),this.dimWrapperListener.bind(this))},displayWidget:function(){this.isVizu&&(this.ifWidgetExist()||(this.hoverAnimation(),d=!0))},dimWrapperListener:function(){console.log("clicked"),o.classList.add(this.config.innerContainer.removewidget),o.classList.remove(this.config.innerContainer.displaywidget),a.classList.remove(this.config.dimWrapper.showClassname),d=!1,this.fire("resumeVideo")},closeWidget:function(){this.isVizu&&(o.classList.remove(this.config.innerContainer.displaywidget),o.classList.add(this.config.innerContainer.closewidget),a.classList.remove(this.config.dimWrapper.showClassname),d=!1)},hoverAnimation:function(){this.isVizu&&(o.classList.remove(this.config.innerContainer.removewidget),o.classList.remove(this.config.innerContainer.closewidget),o.classList.add(this.config.innerContainer.displaywidget),a.classList.add(this.config.dimWrapper.showClassname))},ifWidgetExist:function(){var e=document.getElementById("rm-vizuwidget_peel_container"),t=window.getComputedStyle(e),i=t.getPropertyValue("right");return"0px"==i},fireVizuPixel:function(){this.isVizu&&(this.fire("firePixel"),this.createIframe(),this.iframeDiv.appendChild(this.iframe),f=!0)},getVizuPixel:function(){return this.vizuConfig.exposedPixelUrl?this.vizuConfig.exposedPixelUrl:c.replace(h,s)},isVizuShown:function(){return f},isVizuScreenDisplayed:function(){return d},isVizuEnabled:function(){return!(!this.vizuConfig||!this.vizuConfig.enabled)},createSurveyURL:function(){for(var e,t=this.vizuConfig.vizuCampaign;t.length<8;)t="0"+t;e=t.match(/.{1,2}/g).join("/"),u=u.split("##path##").join(e)},createIframe:function(){this.createSurveyURL(),u=u.replace(h,s);var e=this.replaceQueryParams(u);this.iframe=document.createElement("iframe"),this.iframe.setAttribute("src",this.vizuConfig.src||e),this.iframe.setAttribute("width",this.vizuConfig.width||"300px"),this.iframe.setAttribute("height",this.vizuConfig.height||"250px"),this.iframe.setAttribute("marginheight",this.vizuConfig.marginheight||"0px"),this.iframe.setAttribute("marginwidth",this.vizuConfig.marginwidth||"0px"),this.iframe.setAttribute("frameborder",this.vizuConfig.frameborder||"0px"),this.iframe.setAttribute("scrolling",this.vizuConfig.scrolling||"0")},onConfig:function(e,t){this.config=e,this.appendElement=t}});return n.registerComponent(new l,"VizuWidget"),l},l)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";t.registerPlugin("assetsLoader",function(e){function t(e){this.autoLoad=!!e.autoLoad,this.root=e.root||this.root,l.doesExists(e.js)&&(this.js=this.js.concat(l.toArray(e.js))),l.doesExists(e.img)&&(this.img=this.img.concat(l.toArray(e.img))),l.doesExists(e.link)&&(this.link=this.link.concat(l.toArray(e.link))),e.query&&(this.query=e.query),e.baseUrl&&(this.baseUrl=e.baseUrl)}function n(){var e="string"==typeof this.query.js?this.root.querySelectorAll(this.query.js):this.query.js,t="string"==typeof this.query.img?this.root.querySelectorAll(this.query.img):this.query.img,i="string"==typeof this.query.link?this.root.querySelectorAll(this.query.link):this.query.link;this.query&&(this.query.js&&(this.js=this.js.concat(l.toArray(e))),this.query.img&&(this.img=this.img.concat(l.toArray(t))),this.query.link&&(this.link=this.link.concat(l.toArray(i))))}function s(){(g=!(h=this.js.length))||this.loadJsFiles(this.js),(p=!(d=this.img.length))||this.loadImages(this.img),(v=!(m=this.link.length))||this.loadCssFiles(this.link),r.call(this)}function o(){c=0,u=0,f=0}function r(){p&&g&&v&&(this.fire("loaded"),this.__loaded=!0)}function a(e){return 0!==e.trim().indexOf("http")&&(e=this.baseUrl+e),e}var l=e.utility,c=0,d=0,u=0,h=0,m=0,f=0,p=!1,g=!1,v=!1,C=document.write,E=i.BaseEventManager.extend({autoLoad:!1,root:document,js:null,img:null,link:null,query:null,baseUrl:"",inProgress:!1,__loaded:!1,constructor:function(e){l.assert(l.doesExists(e),"Configuration not set"),o(),this.js=[],
this.img=[],this.link=[],t.call(this,e),this.autoLoad&&this.load()},load:function(){this.__loaded?this.fire("loaded"):this.inProgress||(this.inProgress=!0,n.call(this),s.call(this))},loadImages:function(t){for(var i=t,n=[],s=function(t){e.baseEventManager.fire("muse_mainunit_image_error",t)},o=function(){++c,d===c&&(p=!0,r.call(this))}.bind(this),l=0;l<i.length;l++)n[l]=new Image,n[l].addEventListener("load",o),n[l].src=a.call(this,i[l].dataset.expoSrc),i[l].src=a.call(this,i[l].dataset.expoSrc),n[l].onerror=s},loadJsFiles:function(e){var t=e,i=function(){h===u&&(g=!0,document.write=C,r.call(this))}.bind(this);document.write=function(e){var i=document.createElement("div");i.innerHTML=e,e=i.childNodes[0],t.splice(n,0,e),h++};var n=0,s=function(){var e=t[n];if(e){n++;var o,r=document.createElement("script"),l=e.attributes,c=l.length;for(o=0;o<c;o++)r.setAttributeNode(l[o].cloneNode(!0));if(r.type="text/javascript",e.dataset.expoSrc||e.src){var d;e.attributes.onload&&(d=new Function(e.getAttribute("onload"))),r.src=a.call(this,e.dataset.expoSrc||e.getAttribute("src",2)),r.dataset.main&&(r.dataset.main=a.call(this,r.dataset.main)),r.onload=function(e){d&&d.call(this,e),u++,i(),s()},document.body.appendChild(r)}else r.innerHTML=e.innerHTML,document.body.appendChild(r),u++,i(),s();e.parentNode.removeChild(e)}}.bind(this);s()},loadCssFiles:function(e){for(var t=e,i=function(){f++,m===f&&(v=!0,r.call(this))}.bind(this),n=0;n<t.length;n++)t[n].rel="stylesheet",t[n].href&&(t[n].href=a.call(this,t[n].getAttribute("href",2))),t[n].onload=i}});return E},n)}(window,window.EXPO_CREATIVE,window.EU),function(e,t,i,n){"use strict";var s="1.0.0",o="designerAPI",r=["VideoPlayer"];i.registerPlugin(o,r,function(e,s){var o,r=e.utility,s=n.requireComponent("VideoPlayer"),a=(i.require("tracker",e),{openUrl:function(t,i,n){t=e.urlConfig&&e.urlConfig[i]||t,t&&(n===!0?window.open(t,"_blank"):window.open(t))},resume:function(){s.resumePlayer()},pause:function(){s.pausePlayer()},setVideoPresent:function(e){s.setVideoPresent(e)},switchPlayerInTab:function(e,t){var i,n;r.isString(t)&&(n=document.querySelector("."+t),i=document.querySelector(".videoInnerContainer"),n&&i&&n.appendChild(i)),e&&s.setVideo(null,e,!0)},mute:function(){s.setVolume(0)},unmute:function(){s.setVolume(.2)},getDynamicData:function(){return e.dynamicData},setVideo:function(e){s.setVideo(null,e)},showReplayIcon:function(e){s.showReplayIcon.call(s,e)},setDesignerAPIObject:function(t){t&&(e.config.designerEditable=t)},getDesignerApiObject:function(){return e.config.designerEditable},firePixel:function(e,t){var i={};if(!e||"string"!=typeof e)throw new Error("PixelId has to be a string");try{i=new Event("DesignerAPI")}catch(n){i=document.createEvent("Event"),i.initEvent("DesignerAPI",!0,!0)}i.message={pixelId:e,data:t},window.dispatchEvent(i)},fireDynamicPixel:function(e,t){var i={};if(!e||"string"!=typeof e)throw new Error("PixelId has to be a string");try{i=new Event("DesignerAPI")}catch(n){i=document.createEvent("Event"),i.initEvent("DesignerAPI",!0,!0)}i.message={pixelId:e,data:t,isDynamic:!0},window.dispatchEvent(i)},fireInteractionPixel:function(e,t){this.firePixel(e,t)},fireClickPixel:function(e,t){this.firePixel(e,t)},getCallBackApi:function(){return e.config.designerEditable},getUserClickStatus:function(){return!!e.userClickStatus&&e.userClickStatus},setUserClickStatus:function(i){e.userClickStatus=i,i&&t.EventManager.fire("VDX_User_Clicked")}});if(o=a.getDesignerApiObject())for(var l in o)a[l]=o[l];return a},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(W,EXPO_CREATIVE,CM){"use strict";var version="1.0.0",customHandlers;EXPO_CREATIVE.registerPlugin("customHandlers",["designerAPI","sniffer"],function(sandBox,designerAPI,sniffer){function stringToJSON(jsonString){return JSON.parse(JSON.stringify(eval("("+jsonString.split("=")[1]+")")))}function setCallBacks(e){return function(){for(var t=0;t<e.length;t++)designerAPI.getDesignerApiObject()[e[t]].apply(designerAPI)}}var _utility=sandBox.utility,video=CM.requireComponent("VideoPlayer"),CustomHandlers=EU.CreateClass({setCustomHandlerss:function(){var e=document.querySelectorAll("div[title*='VDXEvents']");if(e.length>0)for(var t=0;t<e.length;t++){e[t].setAttribute("data-title",e[t].title);var i=stringToJSON(e[t].title);e[t].removeAttribute("title"),e[t].addEventListener(i.event.toLowerCase(),setCallBacks(i.callbacks),!1)}}});return sandBox.baseEventManager.add("close.mainunit",function(e){return;var t="video1";if(designerAPI&&designerAPI.getCallBackApi){var i=designerAPI.getCallBackApi().mainUnitCloseCallback;t=video.getDefaultVideoId(),i&&i.call(designerAPI,e,t)}"Chrome"===sniffer.getBrowserInfo()&&CM.requireComponent("VideoPlayer").deleteFromIndexedDB()}),customHandlers?customHandlers:customHandlers=new CustomHandlers},version)}(window,window.EXPO_CREATIVE,window.CM),function(e){if(e.top!==e){var t=function i(){EU.EventManager.addMessageListener(e),$RND$?e.parent.postMessage(JSON.stringify({trust:"erm",eventName:"getId",rnd:$RND$}),"*"):e.parent.postMessage(JSON.stringify({trust:"erm",eventName:"getId"}),"*"),e.removeEventListener("load",i,!1)};e.addEventListener("load",t,!1)}else EU.EventManager.fire("getId")}(window),function(e,t,i,n){"use strict";var s="1.0.0",o="videoPlayer",r=["VideoModel","VideoView","VideoController"];i.registerPlugin(o,r,function(e,s,o,r){var a=t.BaseComponent.extend({init:function(t,s,r){o.setRenderCompleteCallback(function(){this.fire("renderComplete")}.bind(this)),this.Messages=i.require("messages",e),this.componentKey=t,n.requestConfig(t,r||"init"),this.mute=!1,this.previousState="init",this.museVideoPresent=!1,this.replay={container:document.getElementById("video-replay-container"),icon:document.getElementById("video-replay-icon")}},setVideoPresent:function(e){this.museVideoPresent=e},getVideoPresent:function(){return this.museVideoPresent},setInitialListeners:function(e){r.setInitialListeners(e)},onConfig:function(e,t,i){s.onConfig(e,i),o.onConfig(s,t,i),r.onConfig(o,s,i),this.addPlayListener(function(){n.setPlayPixel()})},bindListeners:function(){},getDefaultVideoId:function(){return s.getDefaultVideoId()},reConfig:function(){n.requestConfig(this.componentKey,"mainunit"),this.resizePlayer(s.getPlayerDimensions())},showHandCursor:function(){r.showHandCursor()},hideHandCursor:function(){r.hideHandCursor()},addDataAttribute:function(e){r.addDataAttribute(e)},removeDataAttribute:function(e){r.removeDataAttribute(e)},setMuteStatus:function(e){this.mute=e},getMuteStatus:function(){return this.mute},resizePlayer:function(e){r.resizePlayer(e)},showControls:function(e){r.showControls(e)},hideControls:function(){r.hideControls()},showReplayIcon:function(e){e?(this.hideUnmuteOverlay(),this.unmuteElement&&(this.unmuteElement.style.display="none"),this.replay.container.style.display="block"):this.replay.container.style.display="none"},setLoop:function(e){r.setLoop(e)},setTime:function(e){r.setTime(e)},getSize:function(){return r.getSize()},setVolume:function(e){r&&r.setVolume(e)},getVideoLoopDuration:function(){return s.getVideoLoopDuration()},getVideoDuration:function(){return s.getVideoDuration()},addVideoSrc:function(e,t,i){o.addVideoSrc(e,t,i)},fetchPendingChunks:function(){o.fetchPendingChunks()},pausePlayer:function(){r.pausePlayer()},addPlayListener:function(e){r.addPlayListener(e)},resumePlayer:function(){r.resumePlayer()},resetPlayer:function(){r.reset(),o.reset()},getVideoModel:function(){return s},setVideo:function(e,t,i){(e||t)&&(r.reset(),this.resetPlayer(),t===s.getDefaultVideoId()?o.setVideoSrc(null,"MAINUNIT",null,!i):o.setSrc(e||s.getVideoSrc(t)),o.setPosterImage(e||s.getPosterImage(t)),o.unmuteOverlayClicked===!0&&o.handleUnmuteOverlay(),i||o.resume())},setPosterImage:function(e,t){o.setPosterImage(e||s.getPosterImage(t))},getVideoSrc:function(e){return s.getVideoSrc(e)},togglePosition:function(e){o.togglePosition(e)},getVideoTag:function(){return o.getVideoTag()},getVideoSourceId:function(){return r.getVideoSourceId()},getVideoLandingURL:function(e){return r.getVideoLandingURL(e)},checkPauseStatus:function(){return r.checkPauseStatus()},deleteFromIndexedDB:function(){return s.deleteFromIndexedDB()},showUnmuteOverlay:function(){o.showUnmuteOverlay()},hideUnmuteOverlay:function(){o.hideUnmuteOverlay()}});n.registerComponent(new a(e),"VideoPlayer")},s)}(window,window.EU,window.EXPO_CREATIVE,window.CM),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("VideoView",["domUtility","templateEngine","events","sniffer","VideoDynamicStreaming"],function(e,i,n,s,o,r){var a=["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"],l=e.utility,c=t.CreateClass({constructor:function(){this.sandbox=e,this.unmuteOverlayClicked=!1,this.enableMutedAttribute="muted"},init:function(){this.handCursorEnabled=!1,this.userMuted=!1},setRenderCompleteCallback:function(e){this.renderCompleteCallback=e},setHandCursorFlag:function(e){this.handCursorEnabled=e},getHandCursorFlag:function(){return this.handCursorEnabled},onConfig:function(e,t,n){this.model=e,this.container=document.querySelector(t),i.injectFont(e.config.prop.controlBarFontConfig,e),this.videoContainer||this.renderVideoPlayer()},renderVideoPlayer:function(){var e="";this.videoContainer=this.createVideoPlayer(),e=this.videoInnerContainer=this.videoContainer.querySelector(".videoInnerContainer")||this.videoContainer,this.container.appendChild(this.videoContainer),this.controls=e.querySelector(".inframe-controls"),this.btnPlay=e.querySelector(".btnPlay"),this.btnFullScreen=e.querySelector(".btnFS"),this.sound=e.querySelector(".sound"),this.soundIcon=e.querySelector(".sound span"),this.rewindButton=e.querySelector(".btnRewind"),this.progressbar=e.querySelector(".progress-bar"),this.unmuteoverlay=e.querySelector(".clicktounmute")},handleControlsClick:function(e){e.stopPropagation()},renderComplete:function(){this.renderCompleteCallback&&this.renderCompleteCallback()},addPlayListener:function(e){this.videoTag.addEventListener("play",e)},createVideoPlayer:function(){var e,t,i,n,s,o,r;t={id:this.model.getVideoId(),posterSrc:this.model.getPosterSrc()};var a='                        <div class="videoContainer">                            <div class="videoInnerContainer">                            <img id="posterImage"/>                                <video id="'+t.id+'" preload="auto" autoplay '+this.enableMutedAttribute+' >                                    <source src="" type="video/mp4" />                                    <p>Your browser does not support the video tag.</p>                                </video>                                <div class="sound-icon playing sound" id="sound-icon-container" style="display: block;">                    <div class="sound-icon-wrapper">                        <div class="playing">                            <svg xmlns:x="//ns.adobe.com/Extensibility/1.0/" xmlns:i="//ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="//ns.adobe.com/Graphs/1.0/" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" xmlns:a="//ns.adobe.com/AdobeSVGViewerExtensions/3.0/" version="1.1" x="0px" y="0px" width="22px" height="18px" viewBox="0 0 22 18" enable-background="new 0 0 22 18" xml:space="preserve"><g><path fill="#FFFFFF" d="M5.843,5.786H1.398v6.43h4.444l5.556,4.284v-15L5.843,5.786z"/><path fill="#FFFFFF" d="M17.211,13.542l0.917,0.918c3.289-3.28,3.302-8.627,0.021-11.92L17.23,3.456     C20.006,6.242,19.996,10.766,17.211,13.542z"/><path fill="#FFFFFF" d="M15.382,11.704l0.913,0.917c2.281-2.271,2.288-5.97,0.017-8.25l-0.919,0.916     C17.159,7.058,17.152,9.938,15.382,11.704z"/><path fill="#FFFFFF" d="M13.55,9.866l0.917,0.918c1.266-1.261,1.269-3.316,0.009-4.583l-0.92,0.916     C14.312,7.877,14.31,9.109,13.55,9.866z"/></g></svg>                        </div>                        <div class="muted">                            <svg xmlns:x="//ns.adobe.com/Extensibility/1.0/" xmlns:i="//ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="//ns.adobe.com/Graphs/1.0/" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" xmlns:a="//ns.adobe.com/AdobeSVGViewerExtensions/3.0/" version="1.1" x="0px" y="0px" width="22px" height="18px" viewBox="0 0 22 18" enable-background="new 0 0 22 18" xml:space="preserve"><g><path fill="#FFFFFF" d="M5.46,6.286H1.016v6.43H5.46L11.016,17V2L5.46,6.286z"/><path fill="#FFFFFF" d="M20.984,6.028l-0.99-0.867l-2.848,2.972l-2.971-2.972l-0.99,0.867L16.156,9l-2.971,2.972l0.99,0.867     l2.971-2.973l2.848,2.973l0.99-0.867L18.014,9L20.984,6.028z"/></g></svg>                        </div>                    </div>                </div>                <div class="replay-container" id="video-replay-container" style="display: none;">                    <div class="replay-icon" id="video-replay-icon">                        <svg id="Layer_1" data-name="Layer 1" xmlns="//www.w3.org/2000/svg" viewBox="0 0 70 70"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#4764af;}</style></defs><title>vdx_tv_icon</title><circle class="cls-1" cx="35" cy="35" r="34.44"/><path class="cls-2" d="M35,0A35,35,0,1,0,70,35,35,35,0,0,0,35,0ZM58.63,38.28,25.42,59.08a3.8,3.8,0,0,1-5.81-3.23V36.69h9.68v6.2a1.44,1.44,0,0,0,2.19,1.2l12.41-7.8a1.44,1.44,0,0,0,0-2.43l-12.41-7.8a1.42,1.42,0,0,0-2.19,1.2v6.2H19.61V14.2A3.8,3.8,0,0,1,25.42,11l33.21,20.8A3.91,3.91,0,0,1,58.63,38.28Z"/></svg>                    </div>                </div>                <div class="inframe-controls hidden-controls opec-controls">                    <div class="progress-bar">                        <span class="bufferBar"></span>                        <span class="timeBar"></span>                        <span class="fullBar"></span>                    </div>                </div>                                <div class="control">                                    <div class="btmControl">                                        <div class="btnPlay btn rm-align-vertical-center" title="Play/Pause video"><span class="icon-play"></span></div>                                        <div class="btnRewind btn rm-align-vertical-center" title="Rewind video"><span class="icon-step-backward"></span></div>                                        <div class="btnFS btn rm-align-vertical-center" title="Switch to full screen"><span class="icon-expand"></span></div>                                        <div class="sound sound2 btn rm-align-vertical-center" title="Mute/Unmute sound"><span class="icon-volume-up"></span></div>                                        <div class="timerTextHolder rm-align-vertical-center">                                            <span class="elapsedTime ">00:00</span>                                            <span class="seperator ">/</span>                                            <span class="totalTime ">00:00</span>                                        </div>                                        <div class="progress-bar rm-align-vertical-center">                                            <div class="progress">                                                <span class="bufferBar"></span>                                                <span class="timeBar"></span>                                            </div>                                        </div>                                    </div>                                </div>                                <div class="clicktounmute">                                    <div class="clickonunmutecontent ">                                        <img src="'+this.model.getUnmuteIconPath()+'">                                    </div>                                </div>                            </div>                        </div>';return e=a,n=document.createElement("div"),n.innerHTML=e,s=n.querySelector(".videoContainer"),o=s.querySelector("#videoID"),i=this.model.getPosterImage(),r=n.querySelector("#posterImage"),s.style.cssText=this.model.getInitialStyle(),i&&(r.src=i,o.setAttribute("poster",i)),o.id=this.model.getVideoId(),o.volume=this.model.getVideoMuted()?0:1,this.videoTag=o,s},addVideoSrc:function(e,i,n){if("Chrome"!==o.getBrowserInfo()||this.model.isVideoDynamicStreaming())this.setVideoSrc(e,i,n);else{this.model.getVideoSrc();var s=function(e){this.setSrc(e),t.EventManager.fire("indexDbSourceDownloadedEvent")};this.model.fetchFromIndexedDB(s.bind(this))}},setVideoSrc:function(t,i,n,s){var o=this.model;n&&(this.onVideoSrcSet=n),o.config&&o.config.isVideoDynamicStreaming?this.getMPEGVideoInfo(function(a){r.isMSESupported()&&"Safari"!==e.sniffer.getBrowserInfo()?this.setDynamicVideoSrc(a,i,n,s):r.fetchMpdMetaData(a.mpdMetaFileSrc,function(e){var n=Number(e.querySelectorAll("SegmentList")[0].getAttribute("duration"));this.model.setVideoDuration(n),"TEASER"===i?this.setSrc(t||this.getHLSVideoSrc()):this.setSrc(t||this.getHLSVideoSrc(!0)),o.getDefaultVideoId()===o.getVideoSourceId()&&s?setTimeout(function(){this.videoTag.pause()}.bind(this),0):this.onVideoSrcSet&&this.onVideoSrcSet(a)}.bind(this))}.bind(this)):(this.setSrc(t||o.getVideoSrc()),this.onVideoSrcSet&&this.onVideoSrcSet(null))},setDynamicVideoSrc:function(e,t,i,n){e&&e.mpdMetaFileSrc?r.init(e,function(e,i){this.model.setVideoDuration(i),this.setSrc(e),"TEASER"!==t&&r.fetchPendingChunks(),n?setTimeout(function(){this.videoTag.pause()}.bind(this),0):this.onVideoSrcSet&&this.onVideoSrcSet()}.bind(this)):(this.setSrc(this.video.getVideoSrc()),this.onVideoSrcSet&&this.onVideoSrcSet())},getHLSVideoSrc:function(e){return this.model.getHLSVideoSrc(e)},getMPEGVideoInfo:function(e){var t={mpdMetaFileSrc:this.model.getMPEGVideoInfo(),loopDuration:this.model.config.loopDuration,assetLocation:this.model.getPath(),fromVdxStudio:this.model.fromVdxStudio()};e(t)},fetchPendingChunks:function(){r.isMSESupported()&&"Safari"!==e.sniffer.getBrowserInfo()?r.fetchPendingChunks():this.model.getVideoLoopDuration()<this.getVideoDuration()-.25&&this.setSrc(this.getHLSVideoSrc(!0))},pause:function(){this.videoTag.pause()},resume:function(){var e=this.videoTag.play();e&&e["catch"](function(e){})},showUnmuteOverlay:function(){this.enableMutedAttribute&&(this.unmuteoverlay.style.display="block")},hideUnmuteOverlay:function(){this.unmuteoverlay.style.display="none"},handleUnmuteOverlay:function(e){this.unmuteOverlayClicked=!0,e&&(e.stopPropagation(),e.preventDefault(),t.EventManager.fire("handleVolumeChangeEvent")),this.videoTag.removeAttribute("muted"),this.videoTag.muted=!1,this.hideUnmuteOverlay(),this.userMuted=this.videoTag.muted,this.videoTag.muted?this.addMuteClass():(this.removeMuteClass(),this.videoTag.volume=.25)},handleFullScreen:function(e){this.handleUnmuteOverlay(),e.stopImmediatePropagation(),this.videoTag.webkitRequestFullscreen?this.videoTag.webkitRequestFullscreen():this.videoTag.mozRequestFullScreen?this.videoTag.mozRequestFullScreen():this.videoTag.requestFullscreen?this.videoTag.requestFullscreen():this.videoTag.msRequestFullscreen&&this.videoTag.msRequestFullscreen()},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},handlePlayBut:function(e){e.stopImmediatePropagation(),this.hideUnmuteOverlay(),this.playPause()},handleRewind:function(e){this.handleUnmuteOverlay(),e.stopImmediatePropagation();var t=i.customEvent("rewind",{type:"rewind",status:"rewind"});this.setTime(0),this.rewindButton.dispatchEvent(t),this.videoTag.paused&&this.videoTag.play()},playPause:function(){this.videoTag.paused||this.videoTag.ended?(this.videoTag.ended&&!this.model.isVideoDynamicStreaming()&&this.videoTag.load(),this.videoTag.play()):(this.videoTag.setAttribute("data-pause",!0),this.videoTag.pause())},handleVolume:function(e){this.hideUnmuteOverlay(),e&&e.stopImmediatePropagation(),this.videoTag.muted=!this.videoTag.muted,e&&(this.userMuted=this.videoTag.muted),this.videoTag.muted?this.addMuteClass():(this.removeMuteClass(),this.videoTag.volume=.25),t.EventManager.fire("handleVolumeChangeEvent")},addMuteClass:function(){this.sound.classList.add("muted"),this.soundIcon.classList.remove("icon-volume-up"),this.soundIcon.classList.add("icon-volume-off")},removeMuteClass:function(){this.sound.classList.remove("muted"),this.soundIcon.classList.add("icon-volume-up"),this.soundIcon.classList.remove("icon-volume-off")},addPauseIcon:function(){var e;e=this.btnPlay.querySelector(".icon-play"),e&&(e.classList.add("icon-pause"),e.classList.remove("icon-play"))},addPlayIcon:function(){var e;e=this.btnPlay.querySelector(".icon-pause"),e&&(e.classList.add("icon-play"),e.classList.remove("icon-pause"))},handleVideoMoveEvent:function(){var e=this,t=e.videoInnerContainer.getAttribute("data-state");"block"!==e.controls.style.display&&t?(e.showControls(!0),i.removeClass(e.videoInnerContainer,"rm-cursor-none"),1==e.getHandCursorFlag()&&i.addClass(e.videoTag,"rm-hover-hand-cursor")):t&&(this.timmer&&clearTimeout(this.timmer),this.timmer=setTimeout(function(){"block"===e.controls.style.display&&t&&(e.showControls(!1),i.addClass(e.videoInnerContainer,"rm-cursor-none"),i.removeClass(e.videoTag,"rm-hover-hand-cursor"))}.bind(e),e.model.config.prop.controlTimeOut))},addDataAttribute:function(e){"mainUnit"===e&&this.handleVideoMoveEvent(),this.videoInnerContainer.setAttribute("data-state",e)},removeDataAttribute:function(e){this.videoInnerContainer.removeAttribute("data-state")},handleVideoLeaveEvent:function(){this.showControls()},handleProgressEvent:function(e){e.stopImmediatePropagation()},setInitialListeners:function(e){function i(){function e(e){n.call(this,e)}var t=["MSFullscreenChange","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"];t.forEach(function(t){document.addEventListener(t,e.bind(this))}.bind(this))}function n(i){var n=this.model.getVideoSourceId()===this.model.getDefaultVideoId();this.videoTag.removeAttribute("controls");var s,o=i.type;switch(this.videoTag.muted||0==this.videoTag.volume?this.addMuteClass():this.removeMuteClass(),o){case"playing":this.timmer&&clearTimeout(this.timmer),this.timmer=setTimeout(function(){"block"===this.controls.style.display&&this.showControls(!1)}.bind(this),this.model.config.prop.controlTimeOut);break;case"ended":this.showControls(!0),"fullscreen"===this.checkForFullScreen()&&(this.exitFullscreen(),this.showControls(!0)),this.videoTag.pause();break;case"loadedmetadata":h=this.videoInnerContainer.querySelector(".totalTime");var a;this.model.isVideoDynamicStreaming()&&n?a=this.getVideoDuration():(a=this.videoTag.duration,a!==1/0&&a||(a=this.model.getVideoDuration(),this.model.setVideoDuration(a)));var d=Math.round(Math.floor(a/60)),u=Math.round(a-60*d);h.textContent=d+":"+("0"+u).slice(-2),setTimeout(c.bind(this),150),this.renderComplete();break;case"timeupdate":var h,m=this.videoTag.currentTime,d=Math.round(Math.floor(m/60)),u=Math.round(m-60*d),f=null;f=this.model.isVideoDynamicStreaming()&&n?this.getVideoDuration():this.videoTag.duration;var p=100*m/f;l.innerText=d+":"+("0"+u).slice(-2),r.style.width=p+"%";break;case"seeked":this.sandbox.sendLoopPixel&&this.model.trackerPlugin.firePixels(this.model.config.trackers.video_looped);break;case"fullscreenchange":case"mozfullscreenchange":case"webkitfullscreenchange":case"MSFullscreenChange":s=this.checkForFullScreen(),"fullscreen"===s?(this.videoTag.removeAttribute("controls"),this.showControls(!0)):(this.showControls(!0),this.videoTag.muted?(this.sound.classList.add("muted"),this.soundIcon.classList.remove("icon-volume-up"),this.soundIcon.classList.add("icon-volume-off")):(this.sound.classList.remove("muted"),this.soundIcon.classList.add("icon-volume-up"),this.soundIcon.classList.remove("icon-volume-off")),this.videoTag.paused||this.videoTag.ended?this.addPlayIcon():this.addPauseIcon());break;case"play":this.addPauseIcon();break;case"pause":this.addPlayIcon(),this.videoTag.getAttribute("data-pause")||(i=null),this.videoTag.removeAttribute("data-pause")}e(i),i&&i.type&&t.EventManager.fire("VideoPlayer_e_"+i.type,i)}var o=s;this.btnFullScreen.addEventListener(o.VIDEOPLAYERCLICK.getEventName(),this.handleFullScreen.bind(this)),this.sound.addEventListener(o.VIDEOPLAYERCLICK.getEventName(),this.handleVolume.bind(this)),this.btnPlay.addEventListener(o.VIDEOPLAYERCLICK.getEventName(),this.handlePlayBut.bind(this)),this.progressbar.addEventListener(o.VIDEOPLAYERCLICK.getEventName(),this.handleProgressEvent.bind(this)),this.controls.addEventListener(o.VIDEOPLAYERCLICK.getEventName(),this.handleControlsClick.bind(this)),this.videoInnerContainer.addEventListener(o.VIDEOPLAYERMOVE.getEventName(),function(e){this.oldClientX&&this.oldClientY||(this.oldClientX=e.clientX,this.oldClientY=e.clientY),e.clientX===this.oldClientX&&e.clientY===this.oldClientY||this.handleVideoMoveEvent.call(this),this.oldClientX=e.clientX,this.oldClientY=e.clientY}.bind(this)),this.videoInnerContainer.addEventListener(o.VIDEOPLAYERLEAVE.getEventName(),this.handleVideoLeaveEvent.bind(this)),this.rewindButton.addEventListener(o.VIDEOPLAYERCLICK.getEventName(),this.handleRewind.bind(this)),this.rewindButton.addEventListener(o.VIDEOREWIND.getEventName(),n.bind(this));var r=this.videoInnerContainer.querySelector(".timeBar"),l=(this.videoInnerContainer.querySelector(".current"),this.videoInnerContainer.querySelector(".elapsedTime"));this.unmuteoverlay.addEventListener(o.VIDEOPLAYERCLICK.getEventName(),this.handleUnmuteOverlay.bind(this)),i.call(this);var c=function(){var e=this.model.getVideoSourceId()===this.model.getDefaultVideoId();if(this.videoTag.buffered.length>0){var t,i=this.videoTag.buffered.end(0),n=null;n=this.model.isVideoDynamicStreaming()&&e?this.getVideoDuration():this.videoTag.duration;var s=100*i/n;t=this.videoInnerContainer.querySelector(".bufferBar"),t.style.width=s+"%",i<n&&setTimeout(c.bind(this),500)}};a.forEach(function(e){this.videoTag.addEventListener(e,n.bind(this))}.bind(this))},getVideoDuration:function(){return this.model.getVideoDuration()},checkForFullScreen:function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||!!document.msFullscreenElement?"fullscreen":"fullscreenOff";return e},resizePlayer:function(e){e.width&&(!l.isNumber(e.width)&&e.width.indexOf("%")>1?this.videoContainer.style.width=e.width:this.videoContainer.style.width=parseInt(e.width,10)),e.height&&(!l.isNumber(e.height)&&e.height.indexOf("%")>1?this.videoContainer.style.height=e.height:this.videoContainer.style.height=parseInt(e.height,10)),l.isNumber(e.top)&&(this.videoContainer.style.top=e.top),l.isNumber(e.left)&&(this.videoContainer.style.left=e.left)},getSize:function(){return{width:this.videoContainer.clientWidth,height:this.videoContainer.clientHeight,left:this.videoContainer.offsetLeft,top:this.videoContainer.offsetTop}},showControls:function(e){e?(this.controls.classList.contains("hidden-controls")&&this.controls.classList.remove("hidden-controls"),i.removeClass(this.controls,"opec-controls")):i.addClass(this.controls,"opec-controls")},hideControls:function(){i.addClass(this.controls,"hidden-controls")},setLoop:function(e){e?this.videoTag.setAttribute("loop","loop"):this.videoTag.removeAttribute("loop")},setTime:function(e){try{this.videoTag.src&&(this.videoTag.currentTime=e)}catch(t){}},showHandCursor:function(){this.setHandCursorFlag(!0),i.addClass(this.videoTag,"rm-hover-hand-cursor")},hideHandCursor:function(){this.setHandCursorFlag(!1),i.removeClass(this.videoTag,"rm-hover-hand-cursor")},reset:function(){this.videoTag.pause(),this.videoTag.removeAttribute("src")},setSrc:function(e){if(!e)throw"Src must be specfied";this.videoTag.setAttribute("src",e)},setPosterImage:function(e){e&&this.videoTag.setAttribute("poster",e)},setVolume:function(e){var i,n=this,s=!1;e>0?(this.removeMuteClass(),this.videoTag.muted&&(this.videoTag.muted=!1),this.videoTag.volume=e,i=this.videoTag.play(),i&&i.then&&i.then(function(){s=!0,t.EventManager.fire("volumeChangeEvent",s)},function(){n.videoTag.muted=!0,n.videoTag.play(),s=!1,t.EventManager.fire("volumeChangeEvent",s)})):(this.videoTag.muted=!0,s=!1,this.addMuteClass())},getVideoTag:function(){return this.videoTag},checkPauseStatus:function(){return this.videoTag.paused},togglePosition:function(e){e?(this.container.parentNode.style.setProperty("position",e,"important"),this.videoContainer.style.top=0,this.container.parentNode.style.left=e?"1px":""):(this.container.parentNode.style.removeProperty("position"),this.videoContainer.style.removeProperty("top"),this.container.parentNode.style.left="")}});return new c},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("VideoModel",function(e){var n=t.BaseModel.extend({init:function(){this.trackerPlugin=i.require("tracker",e)},onConfig:function(e){this.maintainAspectRatio=!1,this.controlsVisible=!1,this.cookData(e),this.defaultVideoID=void 0,this.ajaxLoadTime=0},getPlayerDimensions:function(){return{top:this.config.top||0,left:this.config.left||0,width:this.config.width||"100%",height:this.config.height||"100%"}},cookData:function(e){this.config=e},getVideoId:function(){return this.config.prop.videoID},getVideoSourceId:function(){return this.currentVideoId},getVideoLandingURL:function(e){var t=e||this.currentVideoId;return this.config.videos&&this.config.videos[t]&&this.config.videos[t].landingURL||""},getVideoSrc:function(e){if(!e&&!this.config.prop.src){var t=null;if(this.config.videos){var i=this.config.videos;Object.keys(i).forEach(function(e){i[e]["default"]===!0&&(this.currentVideoId=e,t=i[e].src.indexOf("//")==-1?this.getPath()+i[e].src:i[e].src)}.bind(this));var n=this.config.videos.video1.src.indexOf("//")==-1?this.getPath()+this.config.videos.video1.src:this.config.videos.video1.src;return null===t?n:t}}var s=e&&this.config.videos&&this.config.videos[e].src;return s&&(this.currentVideoId=e,s.indexOf("//")>=0)?s:this.getPath()+(s||this.config.prop.src)},getVideoMuted:function(){return this.config.prop.isMuted},getInitialAttributes:function(){return{width:this.config.width,height:this.config.height}},getDefaultVideoId:function(){function e(){return this.defaultVideoID||Object.keys(t).forEach(function(e){t[e]["default"]&&(this.defaultVideoID=e)}.bind(this)),this.defaultVideoID}var t=this.config.videos;return e.call(this)},getPosterImage:function(e){var t;if(e||this.config.prop.posterImage)t=e&&this.config.videos&&this.config.videos[e].poster||this.config.prop.posterImage;else{var i=null;if(this.config.videos){var n=this.config.videos;Object.keys(n).forEach(function(e){n[e]["default"]===!0&&(i=n[e].poster)}.bind(this)),t=null===i?this.config.videos.video1.poster:i}}return t.indexOf("//")==-1?this.getPath()+t:t},getPosterSrc:function(){var e=null;if(this.config.videos){var t=this.config.videos;Object.keys(t).forEach(function(i){t[i]["default"]===!0&&(e=this.getPath()+t[i].poster)}.bind(this))}return e},getMPEGVideoInfo:function(e){return this.getDynamicVideoSrc(e)+"_metaFile.mpd"},getHLSVideoSrc:function(e){var t=this.getDynamicVideoSrc(null);return t+=e?"_hlsMetaFile2.m3u8":"_hlsMetaFile1.m3u8"},getDynamicVideoSrc:function(){var e=null;if(this.config.videos){var t=this.config.videos;Object.keys(t).forEach(function(i){if(t[i]["default"]===!0)if(this.currentVideoId=i,t[i].src.indexOf("//")==-1)e=this.getPath()+t[i].src.split(".")[0];else{var n=/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(t[i].src);e=n[2].split(".")[0]}}.bind(this))}return e},getInitialStyle:function(){var t=!e.utility.isNumber(this.config.width)&&this.config.width.indexOf("%")>-1?"width:"+this.config.width+";":"width:"+this.config.width+"px;",i=null===this.config.height?"":"height:"+this.config.height+"px;",n=this.config.top?"top:"+this.config.top+"px;":"",s=this.config.left?"left:"+this.config.left+"px;":"";
return"position:relative;"+t+i+n+s},setVideoTime:function(e){this.videoTime=e},getVideoTime:function(){return this.videoTime},getDynamicVideoInfo:function(){return{mpdMetaFileSrc:this.getVideoMetaFileSrc(),loopDuration:this.getVideoLoopDuration(),assetLocation:this.getPath()}},isVideoDynamicStreaming:function(){return this.config.isVideoDynamicStreaming},fromVdxStudio:function(){return this.config.fromVdxStudio},getVideoLoopDuration:function(){return this.config.loopDuration},setVideoDuration:function(e){this.videoDuration=e},getVideoDuration:function(){return this.videoDuration},getPath:function(){return this.config.museLocation?this.config.museLocation:""},fetchFromIndexedDB:function(t){e.baseEventManager.fire("IndexedDBEvent","source_changed");var i=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,n=(window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,1),s="video_object",o=this.getVideoSourceId(),r=this.getVideoSrc(),a=this,l=r,c=i.open(l,n);this.ajaxLoadTime=0===this.ajaxLoadTime?Date.now():"",c.onsuccess=function(e){var t,i,o;a.db=c.result,t=a.db,t.onerror=function(e){},i=t.transaction([s],"readwrite"),i.onabort=function(){},i.onerror=function(){},t.setVersion&&t.version!=n?(o=t.setVersion(n),o.onsuccess=function(){h(t),u(i)}):u(i)},c.onerror=function(t){"Chrome"===e.sniffer.getBrowserInfo()&&this.trackerPlugin.firePixels(config.trackers.db_error)},c.onupgradeneeded=function(e){h(e.target.result)};var d=function(t){var i,n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.addEventListener("load",function(){200===n.status&&("Chrome"===e.sniffer.getBrowserInfo()&&this.trackerPlugin.firePixels(this.config.trackers.ajax_completed),i=n.response,m(i))}.bind(this),!1),n.send()}.bind(this),u=function(i){var n,a,l;i.objectStore(s).get(o).onsuccess=function(i){"undefined"!=typeof i.target.result?(n=i.target.result,a=window.URL||window.webkitURL,l=a.createObjectURL(n),"Chrome"===e.sniffer.getBrowserInfo()&&this.trackerPlugin.firePixels(this.config.trackers.source_changed),t(l)):d(r)}.bind(this),i.onerror=function(t){"Chrome"===e.sniffer.getBrowserInfo()&&trackerPlugin.firePixels(config.trackers.transaction_error)},i.onabort=function(){"Chrome"===e.sniffer.getBrowserInfo()&&trackerPlugin.firePixels(config.trackers.transaction_aborted)}}.bind(this),h=function(e){e.createObjectStore(s)},m=function(t){var i=a.db.transaction([s],"readwrite"),n="";i.objectStore(s).put(t,o);this.ajaxLoadTime&&(n=Date.now()-this.ajaxLoadTime,"Chrome"===e.sniffer.getBrowserInfo()&&(this.config.trackers.ajaxLoadTime.custom4="ajaxLoad:"+n+";"+this.config.trackers.ajaxLoadTime.custom4,this.trackerPlugin.firePixels(this.config.trackers.ajaxLoadTime))),this.ajaxLoadTime="",u(i)}.bind(this)},deleteFromIndexedDB:function(){if(!this.isVideoDynamicStreaming()){var t=this.db.name;this.db.close();var i=indexedDB.deleteDatabase(t);i.onsuccess=function(){"Chrome"===e.sniffer.getBrowserInfo()&&this.trackerPlugin.firePixels(this.config.trackers.db_delete_success)}.bind(this),i.onerror=function(){"Chrome"===e.sniffer.getBrowserInfo()&&this.trackerPlugin.firePixels(this.config.trackers.db_delete_error)}.bind(this),i.onblocked=function(){this.trackerPlugin.firePixels(this.config.trackers.db_delete_blocked)}.bind(this)}},getUnmuteIconPath:function(){return this.config.prop.unmuteIcon}});return new n},n)}(window,window.EU,window.EXPO_CREATIVE),function(e,t,i){"use strict";var n="1.0.0";i.registerPlugin("VideoController",function(){var e=t.CreateClass({init:function(){},onConfig:function(e,t){this.view=e,this.model=t,this.reset()},onVideoClick:function(){},onVideoOver:function(){},onVideoOut:function(){},onVideoEnd:function(){this.dispatchVideoEnd()},resizePlayer:function(e){this.view.resizePlayer(e)},showControls:function(e){this.view.showControls(e)},hideControls:function(){this.view.hideControls()},setLoop:function(e){this.view.setLoop(e)},setTime:function(e){this.view.setTime(e)},getSize:function(){return this.view.getSize()},setVolume:function(e){this.view&&this.view.setVolume(e)},addDataAttribute:function(e){this.view.addDataAttribute(e)},removeDataAttribute:function(e){this.view.removeDataAttribute(e)},pausePlayer:function(){this.view.pause()},addPlayListener:function(e){this.view.addPlayListener(e)},setInitialListeners:function(e){this.view.setInitialListeners(e)},resumePlayer:function(){this.view.resume()},onVideoProgress:function(e){return this.model.setVideoTime(e.target.currentTime),this.progressPixels.start?e.target.currentTime>e.target.duration/4&&!this.progressPixels.q1?void this.dispatchVideoQ1():e.target.currentTime>e.target.duration/2&&!this.progressPixels.q2?void this.dispatchVideoQ2():e.target.currentTime>3*e.target.duration/4&&!this.progressPixels.q3?void this.dispatchVideoQ3():void 0:void this.dispatchVideoStart()},dispatchVideoStart:function(){this.progressPixels.start=!0},dispatchVideoQ1:function(){this.progressPixels.q1=!0},dispatchVideoQ2:function(){this.progressPixels.q2=!0},dispatchVideoQ3:function(){this.progressPixels.q3=!0},dispatchVideoEnd:function(){this.progressPixels.end=!0},showHandCursor:function(){this.view.showHandCursor()},hideHandCursor:function(){this.view.hideHandCursor()},reset:function(){this.progressPixels={start:!1,q1:!1,q2:!1,q3:!1,end:!1}},getVideoSourceId:function(){return this.model.getVideoSourceId()},getVideoLandingURL:function(e){return this.model.getVideoLandingURL(e)},checkPauseStatus:function(){return this.view.checkPauseStatus()}});return new e},n)}(window,window.EU,window.EXPO_CREATIVE);